

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/v1.32/assets/css/just-the-docs-default.css">
  
  <style type="text/css">
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(4) > .nav-list > .nav-list-item:nth-child(22) > .nav-list-link { display: block; font-weight: 600; text-decoration: none; background-image: linear-gradient(-90deg, #ebedf5 0%, rgba(235, 237, 245, 0.8) 80%, rgba(235, 237, 245, 0) 100%); }

.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list > .nav-list-item:not(.passive):nth-child(22) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list > .nav-list-item:not(.passive):nth-child(22) > .nav-list { display: block; }

.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list { display: block; }

</style>


  

  
    <script src="/v1.32/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/v1.32/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="icon" href="/v1.32/favicon.ico" type="image/x-icon">



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Unity Catalog | lakeFS Documentation</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Unity Catalog" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Accessing lakeFS-exported Delta Lake tables from Unity Catalog." />
<meta property="og:description" content="Accessing lakeFS-exported Delta Lake tables from Unity Catalog." />
<meta property="og:site_name" content="lakeFS Documentation" />
<meta property="og:image" content="https://docs.lakefs.io/assets/img/docs_logo.png" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://docs.lakefs.io/assets/img/docs_logo.png" />
<meta property="twitter:title" content="Unity Catalog" />
<meta name="twitter:site" content="@lakeFS" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Accessing lakeFS-exported Delta Lake tables from Unity Catalog.","headline":"Unity Catalog","image":"https://docs.lakefs.io/assets/img/docs_logo.png","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/v1.32/assets/logo.svg"}},"url":"/v1.32/integrations/unity-catalog.html"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Google Tag Manager Head -->
<!-- type="text/plain" is intentional for cookie consent support -->
<script type="text/plain" data-category="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KTZBZW9');</script>
<!-- End Google Tag Manager Head -->

<meta name="robots" content="noindex">

<meta property="og:image" content="/v1.32/assets/img/lakefs-logo-with-text.png">
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/fontawesome.min.css" integrity="sha512-giQeaPns4lQTBMRpOOHsYnGw1tGVzbAIHUyHRgn7+6FmiEgGGjaG0T2LZJmAPMzRCl+Cug0ItQ2xDZpTmEc+CQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<link rel="stylesheet" href="/v1.32/assets/css/cookieconsent.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
<script type="module" src="/v1.32/assets/js/cookieconsent-init.js"></script>
<script src="/v1.32/assets/js/copy-code.js"></script>
<script>
    $(function () {
        $(".tabs").tabs();
    });
</script>
<script src="/v1.32/assets/js/feedback.js"></script>
<link href="https://data-folks.masto.host/@lakeFS" rel="me">

</head>

<script src="https://unpkg.com/mermaid@9.3.0/dist/mermaid.min.js"></script>
<script>
    $(document).ready(function () {
        mermaid.initialize({
            startOnLoad:true,
            theme: "default",
        });
        window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
    });
</script>
<body>
<img src="/assets/img/cookies.png" style="display: none;">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTZBZW9"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-link">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-search">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="16px" viewBox="0 0 20 16" version="1.1"
             class="feather feather-menu">
            <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="header-/-mobile" transform="translate(-30.000000, -32.000000)" fill="#279890">
                    <g id="Group" transform="translate(30.000000, 32.000000)">
                        <path
                                d="M20,14 L20,16 L0,16 L0,14 L20,14 Z M20,7 L20,9 L0,9 L0,7 L20,7 Z M20,0 L20,2 L0,2 L0,0 L20,0 Z"
                                id="mobile-menu" />
                    </g>
                </g>
            </g>
        </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-chevron-right">
            <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-file">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
            <polyline points="13 2 13 9 20 9"></polyline>
        </svg>
    </symbol>
</svg>
<div class="body-wrapper">
    <div class="side-bar">
        <div class="site-header">
            <a href="https://lakefs.io" class="site-title lh-tight">
  <div class="site-logo" role="img" aria-label="lakeFS Documentation"></div>

</a>
            <a href="#" id="menu-button" class="site-button">
                <svg viewBox="0 0 24 24" class="icon">
                    <use xlink:href="#svg-menu"></use>
                </svg>
            </a>
        </div>
        <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
            
            <div class="search">
                <div class="search-input-wrap">
                    <input type="text" id="search-input" class="search-input" tabindex="0"
                           placeholder="Search lakeFS Documentation" aria-label="Search lakeFS Documentation"
                           autocomplete="off">
                    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon">
                            <use xlink:href="#svg-search"></use>
                        </svg></label>
                </div>
                <div id="search-results" class="search-results"></div>
            </div>
            

            <div class="nav-category nav-version">
                <label for="selectversion">Version:</label>
                <select id="selectversion" name="version" onchange="javascript:location.href = '/' + encodeURI(this.value);">
                    <option value="" selected>Latest</option>
                </select>
            </div>
            <script async>
                window.addEventListener("load",  async () => {
                    const pathFirstLevel = location.pathname.split('/')[1];
                    const selectedVersion = pathFirstLevel.startsWith('v') && pathFirstLevel || '';
                    const selectVersionElmFirst = document.getElementById('selectversion').firstElementChild;
                    const response = await fetch('/versions.json');
                    if (!response.ok) {
                        return
                    }
                    const versions = await response.json();
                    for (let [key, value] of Object.entries(versions)) {
                        const el = document.createElement("option");
                        el.value = key;
                        el.textContent = value;
                        if (key === selectedVersion) {
                            el.selected = true;
                        }
                        selectVersionElmFirst.after(el);
                    }
                });
            </script>

            <ul class="nav-list"><li
            class="nav-list-item"><a href="/v1.32/"
           class="nav-list-link">Welcome to lakeFS</a></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v1.32/quickstart/"
           class="nav-list-link">⭐ Quickstart</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.32/quickstart/launch.html"
                   class="nav-list-link">1️⃣ Run lakeFS</a></li><li class="nav-list-item "><a href="/v1.32/quickstart/query.html"
                   class="nav-list-link">2️⃣ Query the data</a></li><li class="nav-list-item "><a href="/v1.32/quickstart/branch.html"
                   class="nav-list-link">3️⃣ Create a branch</a></li><li class="nav-list-item "><a href="/v1.32/quickstart/commit-and-merge.html"
                   class="nav-list-link">4️⃣ Commit and Merge</a></li><li class="nav-list-item "><a href="/v1.32/quickstart/rollback.html"
                   class="nav-list-link">5️⃣ Roll back Changes</a></li><li class="nav-list-item "><a href="/v1.32/quickstart/actions-and-hooks.html"
                   class="nav-list-link">6️⃣ Using Actions and Hooks in lakeFS</a></li><li class="nav-list-item "><a href="/v1.32/quickstart/work-with-data-locally.html"
                   class="nav-list-link">7️⃣ Work with lakeFS data locally</a></li><li class="nav-list-item "><a href="/v1.32/quickstart/learning-more-lakefs.html"
                   class="nav-list-link">Learn more about lakeFS</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v1.32/howto/"
           class="nav-list-link">How-To</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/v1.32/howto/deploy/"
                   class="nav-list-link">Install lakeFS</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/v1.32/howto/deploy/aws.html"
                           class="nav-list-link">AWS</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/howto/deploy/azure.html"
                           class="nav-list-link">Azure</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/howto/deploy/gcp.html"
                           class="nav-list-link">GCP</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/howto/deploy/onprem.html"
                           class="nav-list-link">On-Premises</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/howto/deploy/upgrade.html"
                           class="nav-list-link">Upgrade lakeFS</a>
                    </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/v1.32/howto/hooks/"
                   class="nav-list-link">Actions and Hooks</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/v1.32/howto/hooks/airflow.html"
                           class="nav-list-link">Airflow Hooks</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/howto/hooks/lua.html"
                           class="nav-list-link">Lua Hooks</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/howto/hooks/webhooks.html"
                           class="nav-list-link">Webhooks</a>
                    </li></ul></li><li class="nav-list-item "><a href="/v1.32/howto/protect-branches.html"
                   class="nav-list-link">Branch Protection</a></li><li class="nav-list-item "><a href="/v1.32/howto/copying.html"
                   class="nav-list-link">Copying data to/from lakeFS</a></li><li class="nav-list-item "><a href="/v1.32/howto/catalog_exports.html"
                   class="nav-list-link">Data Catalogs Export</a></li><li class="nav-list-item "><a href="/v1.32/howto/export.html"
                   class="nav-list-link">Export Data</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/v1.32/howto/garbage-collection/"
                   class="nav-list-link">Garbage Collection</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/v1.32/howto/garbage-collection/gc.html"
                           class="nav-list-link">Garbage Collection</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/howto/garbage-collection/managed-gc.html"
                           class="nav-list-link">Managed Garbage Collection</a>
                    </li></ul></li><li class="nav-list-item "><a href="/v1.32/howto/import.html"
                   class="nav-list-link">Import Data</a></li><li class="nav-list-item "><a href="/v1.32/howto/migrate-away.html"
                   class="nav-list-link">Migrating away from lakeFS</a></li><li class="nav-list-item "><a href="/v1.32/howto/mirroring.html"
                   class="nav-list-link">Mirroring</a></li><li class="nav-list-item "><a href="/v1.32/howto/private-link.html"
                   class="nav-list-link">Private Link</a></li><li class="nav-list-item "><a href="/v1.32/howto/virtual-host-addressing.html"
                   class="nav-list-link">S3 Virtual-host addressing (advanced)</a></li><li class="nav-list-item "><a href="/v1.32/howto/sizing-guide.html"
                   class="nav-list-link">Sizing Guide</a></li><li class="nav-list-item "><a href="/v1.32/howto/scim.html"
                   class="nav-list-link">System for Cross-domain Identity Management (SCIM)</a></li><li class="nav-list-item "><a href="/v1.32/howto/local-checkouts.html"
                   class="nav-list-link">Work with lakeFS data locally</a></li></ul></li><li
            class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v1.32/integrations/"
           class="nav-list-link">Integrations</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.32/integrations/aws_cli.html"
                   class="nav-list-link">AWS CLI</a></li><li class="nav-list-item "><a href="/v1.32/integrations/airbyte.html"
                   class="nav-list-link">Airbyte</a></li><li class="nav-list-item "><a href="/v1.32/integrations/athena.html"
                   class="nav-list-link">Amazon Athena</a></li><li class="nav-list-item "><a href="/v1.32/integrations/sagemaker.html"
                   class="nav-list-link">Amazon SageMaker</a></li><li class="nav-list-item "><a href="/v1.32/integrations/airflow.html"
                   class="nav-list-link">Apache Airflow</a></li><li class="nav-list-item "><a href="/v1.32/integrations/hive.html"
                   class="nav-list-link">Apache Hive</a></li><li class="nav-list-item "><a href="/v1.32/integrations/iceberg.html"
                   class="nav-list-link">Apache Iceberg</a></li><li class="nav-list-item "><a href="/v1.32/integrations/kafka.html"
                   class="nav-list-link">Apache Kafka</a></li><li class="nav-list-item "><a href="/v1.32/integrations/spark.html"
                   class="nav-list-link">Apache Spark</a></li><li class="nav-list-item "><a href="/v1.32/integrations/cloudera.html"
                   class="nav-list-link">Cloudera</a></li><li class="nav-list-item "><a href="/v1.32/integrations/delta.html"
                   class="nav-list-link">Delta Lake</a></li><li class="nav-list-item "><a href="/v1.32/integrations/dremio.html"
                   class="nav-list-link">Dremio</a></li><li class="nav-list-item "><a href="/v1.32/integrations/duckdb.html"
                   class="nav-list-link">DuckDB</a></li><li class="nav-list-item "><a href="/v1.32/integrations/git.html"
                   class="nav-list-link">Git</a></li><li class="nav-list-item "><a href="/v1.32/integrations/glue_hive_metastore.html"
                   class="nav-list-link">Glue / Hive metastore</a></li><li class="nav-list-item "><a href="/v1.32/integrations/glue_metastore.html"
                   class="nav-list-link">Glue Data Catalog</a></li><li class="nav-list-item "><a href="/v1.32/integrations/huggingface_datasets.html"
                   class="nav-list-link">HuggingFace Datasets</a></li><li class="nav-list-item "><a href="/v1.32/integrations/kubeflow.html"
                   class="nav-list-link">Kubeflow</a></li><li class="nav-list-item "><a href="/v1.32/integrations/presto_trino.html"
                   class="nav-list-link">Presto / Trino</a></li><li class="nav-list-item "><a href="/v1.32/integrations/python.html"
                   class="nav-list-link">Python</a></li><li class="nav-list-item "><a href="/v1.32/integrations/r.html"
                   class="nav-list-link">R</a></li><li class="nav-list-item  active"><a href="/v1.32/integrations/unity-catalog.html"
                   class="nav-list-link active">Unity Catalog</a></li><li class="nav-list-item "><a href="/v1.32/integrations/vertex_ai.html"
                   class="nav-list-link">Vertex AI</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v1.32/understand/"
           class="nav-list-link">Understanding lakeFS</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.32/understand/architecture.html"
                   class="nav-list-link">Architecture</a></li><li class="nav-list-item "><a href="/v1.32/understand/model.html"
                   class="nav-list-link">Concepts and  Model</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/v1.32/understand/data_lifecycle_management/"
                   class="nav-list-link">Data Lifecycle Management</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/v1.32/understand/data_lifecycle_management/ci.html"
                           class="nav-list-link">During Deployment</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/understand/data_lifecycle_management/production.html"
                           class="nav-list-link">In Production</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/understand/data_lifecycle_management/data-devenv.html"
                           class="nav-list-link">In Test</a>
                    </li></ul></li><li class="nav-list-item "><a href="/v1.32/understand/data-structure.html"
                   class="nav-list-link">Data Structure</a></li><li class="nav-list-item "><a href="/v1.32/understand/faq.html"
                   class="nav-list-link">FAQ</a></li><li class="nav-list-item "><a href="/v1.32/understand/glossary.html"
                   class="nav-list-link">Glossary</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/v1.32/understand/how/"
                   class="nav-list-link">How lakeFS Works</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/v1.32/understand/how/kv.html"
                           class="nav-list-link">Internal database structure</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/understand/how/merge.html"
                           class="nav-list-link">Merge</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/understand/how/versioning-internals.html"
                           class="nav-list-link">Versioning Internals</a>
                    </li></ul></li><li class="nav-list-item "><a href="/v1.32/understand/performance-best-practices.html"
                   class="nav-list-link">Performance Best Practices</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/v1.32/understand/use_cases/"
                   class="nav-list-link">Use Cases</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/v1.32/understand/use_cases/cicd_for_data.html"
                           class="nav-list-link">CI/CD for Data Lakes</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/understand/use_cases/etl_testing.html"
                           class="nav-list-link">ETL Testing Environment</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/understand/use_cases/reproducibility.html"
                           class="nav-list-link">Reproducibility</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/understand/use_cases/rollback.html"
                           class="nav-list-link">Rollback</a>
                    </li></ul></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v1.32/reference/"
           class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.32/reference/auditing.html"
                   class="nav-list-link">Auditing</a></li><li class="nav-list-item "><a href="/v1.32/reference/monitor.html"
                   class="nav-list-link">Monitoring using Prometheus</a></li><li class="nav-list-item "><a href="/v1.32/reference/s3.html"
                   class="nav-list-link">S3 Gateway API</a></li><li class="nav-list-item "><a href="/v1.32/reference/spark-client.html"
                   class="nav-list-link">Spark Client</a></li><li class="nav-list-item "><a href="/v1.32/reference/api.html"
                   class="nav-list-link">lakeFS API</a></li><li class="nav-list-item "><a href="/v1.32/reference/configuration.html"
                   class="nav-list-link">lakeFS Server Configuration</a></li><li class="nav-list-item "><a href="/v1.32/reference/cli.html"
                   class="nav-list-link">lakectl (lakeFS command-line tool)</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v1.32/project/"
           class="nav-list-link">The lakeFS Project</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.32/project/contributing.html"
                   class="nav-list-link">Contributing to lakeFS</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/v1.32/project/docs/"
                   class="nav-list-link">Documentation</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/v1.32/project/docs/callouts.html"
                           class="nav-list-link">Callouts</a>
                    </li></ul></li><li class="nav-list-item "><a href="/v1.32/project/code-migrate-1.0-sdk.html"
                   class="nav-list-link">Migrating to 1.0</a></li></ul></li><li
            class="nav-list-item"><a href="/v1.32/cloud/"
           class="nav-list-link">lakeFS Cloud</a></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v1.32/enterprise/"
           class="nav-list-link">lakeFS Enterprise</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/v1.32/enterprise/getstarted/"
                   class="nav-list-link">Get Started</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/v1.32/enterprise/getstarted/quickstart.html"
                           class="nav-list-link">Quickstart</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/enterprise/getstarted/install.html"
                           class="nav-list-link">Install</a>
                    </li><li class="nav-list-item ">
                        <a href="/v1.32/enterprise/getstarted/migrate-from-oss.html"
                           class="nav-list-link">Migrate from lakeFS OSS</a>
                    </li></ul></li><li class="nav-list-item "><a href="/v1.32/enterprise/upgrade.html"
                   class="nav-list-link">Upgrade</a></li><li class="nav-list-item "><a href="/v1.32/enterprise/troubleshooting.html"
                   class="nav-list-link">Troubleshooting lakeFS Enterprise</a></li><li class="nav-list-item "><a href="/v1.32/enterprise/configuration.html"
                   class="nav-list-link">Configuration Reference</a></li><li class="nav-list-item "><a href="/v1.32/enterprise/architecture.html"
                   class="nav-list-link">Architecture</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v1.32/security/"
           class="nav-list-link">Security</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.32/security/access-control-lists.html"
                   class="nav-list-link">Access Control Lists (ACLs) -Deprecated-</a></li><li class="nav-list-item "><a href="/v1.32/security/authentication.html"
                   class="nav-list-link">Authentication</a></li><li class="nav-list-item "><a href="/v1.32/security/external-principals-aws.html"
                   class="nav-list-link">Login to lakeFS with AWS IAM Roles</a></li><li class="nav-list-item "><a href="/v1.32/security/presigned-url.html"
                   class="nav-list-link">Presigned URLs</a></li><li class="nav-list-item "><a href="/v1.32/security/remote-authenticator.html"
                   class="nav-list-link">Remote Authenticator</a></li><li class="nav-list-item "><a href="/v1.32/security/rbac.html"
                   class="nav-list-link">Role-Based Access Control (RBAC)</a></li><li class="nav-list-item "><a href="/v1.32/security/sts-login.html"
                   class="nav-list-link">Short-lived token (STS like) Authentication for lakeFS</a></li><li class="nav-list-item "><a href="/v1.32/security/sso.html"
                   class="nav-list-link">Single Sign On (SSO)</a></li></ul></li></ul>
            <div class="mobile-menu">
                
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

            </div>
        </nav>

    </div>
    <div class="main" id="top">
         <div class="feedback-container">
            <div id="is-helpful-ty">
                <div class="text-epsilon">Thank you for your feedback.</div>
                <div class="mt-2 text-epsilon">
                    <a href="https://lakefs.io/slack" target="_blank">Join the community</a> to get more help.
                </div>
            </div>
            <div class="feedback-buttons">
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-up" id="page-helpful-yes"></button>
                    <span class="tooltiptext">
                        This page is <b>helpful</b>
                    </span>
                </span>
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-down" id="page-helpful-no"></button>
                    <span class="tooltiptext">
                        This page is <b>not helpful</b>
                    </span>
                </span>
            </div>
        </div>
        <div id="main-header" class="main-header">
            
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

        </div>
        <div id="main-content-wrap" class="main-content-wrap">
            
            
            <nav aria-label="Breadcrumb" class="breadcrumb-nav">
                <ol class="breadcrumb-nav-list">
                    
                    <li class="breadcrumb-nav-list-item"><a href="/v1.32/integrations/">Integrations</a>
                    </li>
                    
                    <li class="breadcrumb-nav-list-item"><span>Unity Catalog</span></li>
                </ol>
            </nav>
            
            
            <div id="main-content" class="main-content" role="main">
                
                    <h1 id="using-lakefs-with-the-unity-catalog">
  
  
    <a href="#using-lakefs-with-the-unity-catalog" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using lakeFS with the Unity Catalog
  
  
</h1>
    

<div class="toc-block">
<h2 class="no_toc text-delta" id="table-of-contents">
  
  
    <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents
  
  
</h2>
    

<ol id="markdown-toc">
  <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a>    <ol>
      <li><a href="#databricks-authentication" id="markdown-toc-databricks-authentication">Databricks authentication</a></li>
    </ol>
  </li>
  <li><a href="#guide" id="markdown-toc-guide">Guide</a>    <ol>
      <li><a href="#table-descriptor-definition" id="markdown-toc-table-descriptor-definition">Table descriptor definition</a></li>
      <li><a href="#write-some-data" id="markdown-toc-write-some-data">Write some data</a></li>
      <li><a href="#the-unity-catalog-exporter-script" id="markdown-toc-the-unity-catalog-exporter-script">The Unity Catalog exporter script</a></li>
      <li><a href="#action-configuration" id="markdown-toc-action-configuration">Action configuration</a></li>
      <li><a href="#databricks-integration" id="markdown-toc-databricks-integration">Databricks Integration</a></li>
    </ol>
  </li>
</ol>

</div>
<h2 id="overview">
  
  
    <a href="#overview" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview
  
  
</h2>
    

<p>Databricks Unity Catalog serves as a centralized data governance platform for your data lakes.
Through the Unity Catalog, you can search for and locate data assets across workspaces via a unified catalog.
Leveraging the external tables feature within Unity Catalog, you can register a Delta Lake table exported from lakeFS and
access it through the unified catalog. 
The subsequent step-by-step guide will lead you through the process of configuring a <a href="/howto/hooks/lua.html">Lua hook</a>
that exports Delta Lake tables from lakeFS, and subsequently registers them in Unity Catalog.</p>

<blockquote class="note">
  <p>Currently, Unity Catalog export feature exclusively supports AWS S3 and Azure ADLS Gen2 as the underlying storage solution. It’s planned to <a href="https://github.com/treeverse/lakeFS/issues/7199">support other cloud providers soon</a>.</p>
</blockquote>

<p>Reference Guide: <a href="https://lakefs.io/blog/lakefs-unity-catalog-integration-tutorial/">lakeFS + Unity Catalog Integration: Step-by-Step Tutorial</a></p>
<h2 id="prerequisites">
  
  
    <a href="#prerequisites" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites
  
  
</h2>
    

<p>Before starting, ensure you have the following:</p>

<ol>
  <li>Access to Unity Catalog</li>
  <li>An active lakeFS installation with S3 as the backing storage, and a repository in this installation.</li>
  <li>A Databricks SQL warehouse.</li>
  <li>AWS Credentials with S3 access.</li>
  <li>lakeFS credentials with access to your Delta Tables.</li>
</ol>

<blockquote class="note">
  <p>Supported from lakeFS v1.4.0</p>
</blockquote>
<h3 id="databricks-authentication">
  
  
    <a href="#databricks-authentication" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Databricks authentication
  
  
</h3>
    

<p>Given that the hook will ultimately register a table in Unity Catalog, authentication with Databricks is imperative.
Make sure that:</p>

<ol>
  <li>You have a Databricks <a href="https://docs.databricks.com/en/dev-tools/service-principals.html">Service Principal</a>.</li>
  <li>The Service principal has <a href="https://docs.databricks.com/en/dev-tools/service-principals.html#step-3-assign-workspace-level-permissions-to-the-databricks-service-principal">token usage permissions</a>,
and an associated <a href="https://docs.databricks.com/en/dev-tools/service-principals.html#step-4-generate-a-databricks-personal-access-token-for-the-databricks-service-principal">token</a>
configured.</li>
  <li>The service principal has the <code class="language-plaintext highlighter-rouge">Service principal: Manager</code> privilege over itself (Workspace: Admin console -&gt; Service principals -&gt; <code class="language-plaintext highlighter-rouge">&lt;service principal&gt;</code> -&gt; Permissions -&gt; Grant access (<code class="language-plaintext highlighter-rouge">&lt;service principal&gt;</code>:
<code class="language-plaintext highlighter-rouge">Service principal: Manager</code>), with <code class="language-plaintext highlighter-rouge">Workspace access</code> and <code class="language-plaintext highlighter-rouge">Databricks SQL access</code> checked (Admin console -&gt; Service principals -&gt; <code class="language-plaintext highlighter-rouge">&lt;service principal&gt;</code> -&gt; Configurations).</li>
  <li>Your SQL warehouse allows the service principal to use it (SQL Warehouses -&gt; <code class="language-plaintext highlighter-rouge">&lt;SQL warehouse&gt;</code> -&gt; Permissions -&gt; <code class="language-plaintext highlighter-rouge">&lt;service principal&gt;</code>: <code class="language-plaintext highlighter-rouge">Can use</code>).</li>
  <li>The catalog grants the <code class="language-plaintext highlighter-rouge">USE CATALOG</code>, <code class="language-plaintext highlighter-rouge">USE SCHEMA</code>, <code class="language-plaintext highlighter-rouge">CREATE SCHEMA</code> permissions to the service principal(Catalog -&gt; <code class="language-plaintext highlighter-rouge">&lt;catalog name&gt;</code> -&gt; Permissions -&gt; Grant -&gt; <code class="language-plaintext highlighter-rouge">&lt;service principal&gt;</code>: <code class="language-plaintext highlighter-rouge">USE CATALOG</code>, <code class="language-plaintext highlighter-rouge">USE SCHEMA</code>, <code class="language-plaintext highlighter-rouge">CREATE SCHEMA</code>).</li>
  <li>You have an <em>External Location</em> configured, and the service principal has the <code class="language-plaintext highlighter-rouge">CREATE EXTERNAL TABLE</code> permission over it (Catalog -&gt; External Data -&gt; External Locations -&gt; Create location).</li>
</ol>
<h2 id="guide">
  
  
    <a href="#guide" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Guide
  
  
</h2>
    
<h3 id="table-descriptor-definition">
  
  
    <a href="#table-descriptor-definition" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table descriptor definition
  
  
</h3>
    

<p>To guide the Unity Catalog exporter in configuring the table in the catalog, define its properties in the Delta Lake table descriptor. 
The table descriptor should include (at minimum) the following fields:</p>
<ol>
  <li><code class="language-plaintext highlighter-rouge">name</code>: The table name.</li>
  <li><code class="language-plaintext highlighter-rouge">type</code>: Should be <code class="language-plaintext highlighter-rouge">delta</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">catalog</code>: The name of the catalog in which the table will be created.</li>
  <li><code class="language-plaintext highlighter-rouge">path</code>: The path in lakeFS (starting from the root of the branch) in which the Delta Lake table’s data is found.</li>
</ol>

<p>Let’s define the table descriptor and upload it to lakeFS:</p>

<p>Save the following as <code class="language-plaintext highlighter-rouge">famous-people-td.yaml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">famous_people</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">delta</span>
<span class="na">catalog</span><span class="pi">:</span> <span class="s">my-catalog-name</span>
<span class="na">path</span><span class="pi">:</span> <span class="s">tables/famous-people</span>
</code></pre></div></div>

<blockquote class="note">
  <p>It’s recommended to create a Unity catalog with the same name as your repository</p>
</blockquote>

<p>Upload the table descriptor to <code class="language-plaintext highlighter-rouge">_lakefs_tables/famous-people-td.yaml</code> and commit:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lakectl fs upload lakefs://repo/main/_lakefs_tables/famous-people-td.yaml <span class="nt">-s</span> ./famous-people-td.yaml <span class="o">&amp;&amp;</span> <span class="se">\</span>
lakectl commit lakefs://repo/main <span class="nt">-m</span> <span class="s2">"add famous people table descriptor"</span>
</code></pre></div></div>
<h3 id="write-some-data">
  
  
    <a href="#write-some-data" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Write some data
  
  
</h3>
    

<p>Insert data into the table path, using your preferred method (e.g. <a href="/integrations/spark.html">Spark</a>), and commit upon completion.</p>

<p>We shall use Spark and lakeFS’s S3 gateway to write some data as a Delta table:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pyspark <span class="nt">--packages</span> <span class="s2">"io.delta:delta-spark_2.12:3.0.0,org.apache.hadoop:hadoop-aws:3.3.4,com.amazonaws:aws-java-sdk-bundle:1.12.262"</span> <span class="se">\</span>
  <span class="nt">--conf</span> spark.sql.extensions<span class="o">=</span>io.delta.sql.DeltaSparkSessionExtension <span class="se">\</span>
  <span class="nt">--conf</span> spark.sql.catalog.spark_catalog<span class="o">=</span>org.apache.spark.sql.delta.catalog.DeltaCatalog <span class="se">\</span>
  <span class="nt">--conf</span> spark.hadoop.fs.s3a.aws.credentials.provider<span class="o">=</span><span class="s1">'org.apache.hadoop.fs.s3a.SimpleAWSCredentialsProvider'</span> <span class="se">\</span>
  <span class="nt">--conf</span> spark.hadoop.fs.s3a.endpoint<span class="o">=</span><span class="s1">'&lt;LAKEFS_SERVER_URL&gt;'</span> <span class="se">\</span>
  <span class="nt">--conf</span> spark.hadoop.fs.s3a.access.key<span class="o">=</span><span class="s1">'&lt;LAKEFS_ACCESS_KEY&gt;'</span> <span class="se">\</span>
  <span class="nt">--conf</span> spark.hadoop.fs.s3a.secret.key<span class="o">=</span><span class="s1">'&lt;LAKEFS_SECRET_ACCESS_KEY&gt;'</span> <span class="se">\</span>
  <span class="nt">--conf</span> spark.hadoop.fs.s3a.path.style.access<span class="o">=</span><span class="nb">true</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
   <span class="p">(</span><span class="s">'James'</span><span class="p">,</span><span class="s">'Bond'</span><span class="p">,</span><span class="s">'England'</span><span class="p">,</span><span class="s">'intelligence'</span><span class="p">),</span>
   <span class="p">(</span><span class="s">'Robbie'</span><span class="p">,</span><span class="s">'Williams'</span><span class="p">,</span><span class="s">'England'</span><span class="p">,</span><span class="s">'music'</span><span class="p">),</span>
   <span class="p">(</span><span class="s">'Hulk'</span><span class="p">,</span><span class="s">'Hogan'</span><span class="p">,</span><span class="s">'USA'</span><span class="p">,</span><span class="s">'entertainment'</span><span class="p">),</span>
   <span class="p">(</span><span class="s">'Mister'</span><span class="p">,</span><span class="s">'T'</span><span class="p">,</span><span class="s">'USA'</span><span class="p">,</span><span class="s">'entertainment'</span><span class="p">),</span>
   <span class="p">(</span><span class="s">'Rafael'</span><span class="p">,</span><span class="s">'Nadal'</span><span class="p">,</span><span class="s">'Spain'</span><span class="p">,</span><span class="s">'professional athlete'</span><span class="p">),</span>
   <span class="p">(</span><span class="s">'Paul'</span><span class="p">,</span><span class="s">'Haver'</span><span class="p">,</span><span class="s">'Belgium'</span><span class="p">,</span><span class="s">'music'</span><span class="p">),</span>
<span class="p">]</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">"firstname"</span><span class="p">,</span><span class="s">"lastname"</span><span class="p">,</span><span class="s">"country"</span><span class="p">,</span><span class="s">"category"</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="p">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">schema</span> <span class="o">=</span> <span class="n">columns</span><span class="p">)</span>
<span class="n">df</span><span class="p">.</span><span class="n">write</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="s">"delta"</span><span class="p">).</span><span class="n">mode</span><span class="p">(</span><span class="s">"overwrite"</span><span class="p">).</span><span class="n">partitionBy</span><span class="p">(</span><span class="s">"category"</span><span class="p">,</span> <span class="s">"country"</span><span class="p">).</span><span class="n">save</span><span class="p">(</span><span class="s">"s3a://repo/main/tables/famous-people"</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="the-unity-catalog-exporter-script">
  
  
    <a href="#the-unity-catalog-exporter-script" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The Unity Catalog exporter script
  
  
</h3>
    

<blockquote class="note">
  <p>For code references check <a href="/howto/hooks/lua.html#lakefscatalogexportdelta_exporter">delta_exporter</a> and 
<a href="/howto/hooks/lua.html#lakefscatalogexportunity_exporter">unity_exporter</a> docs.</p>
</blockquote>

<p>Create <code class="language-plaintext highlighter-rouge">unity_exporter.lua</code>:</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">local</span> <span class="n">aws</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"aws"</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">formats</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"formats"</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">databricks</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"databricks"</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">delta_export</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"lakefs/catalogexport/delta_exporter"</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">unity_export</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"lakefs/catalogexport/unity_exporter"</span><span class="p">)</span>

<span class="kd">local</span> <span class="n">sc</span> <span class="o">=</span> <span class="n">aws</span><span class="p">.</span><span class="n">s3_client</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">aws</span><span class="p">.</span><span class="n">access_key_id</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">aws</span><span class="p">.</span><span class="n">secret_access_key</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">aws</span><span class="p">.</span><span class="n">region</span><span class="p">)</span>

<span class="c1">-- Export Delta Lake tables export:</span>
<span class="kd">local</span> <span class="n">delta_client</span> <span class="o">=</span> <span class="n">formats</span><span class="p">.</span><span class="n">delta_client</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">lakefs</span><span class="p">.</span><span class="n">access_key_id</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">lakefs</span><span class="p">.</span><span class="n">secret_access_key</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">aws</span><span class="p">.</span><span class="n">region</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">delta_table_details</span> <span class="o">=</span> <span class="n">delta_export</span><span class="p">.</span><span class="n">export_delta_log</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">table_defs</span><span class="p">,</span> <span class="n">sc</span><span class="p">.</span><span class="n">put_object</span><span class="p">,</span> <span class="n">delta_client</span><span class="p">,</span> <span class="s2">"_lakefs_tables"</span><span class="p">)</span>

<span class="c1">-- Register the exported table in Unity Catalog:</span>
<span class="kd">local</span> <span class="n">databricks_client</span> <span class="o">=</span> <span class="n">databricks</span><span class="p">.</span><span class="n">client</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">databricks_host</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">databricks_token</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">registration_statuses</span> <span class="o">=</span> <span class="n">unity_export</span><span class="p">.</span><span class="n">register_tables</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="s2">"_lakefs_tables"</span><span class="p">,</span> <span class="n">delta_table_details</span><span class="p">,</span> <span class="n">databricks_client</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">warehouse_id</span><span class="p">)</span>

<span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="n">status</span> <span class="k">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">registration_statuses</span><span class="p">)</span> <span class="k">do</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Unity catalog registration for table \"" .. t .. "</span><span class="err">\</span><span class="s2">" completed with commit schema status : "</span> <span class="o">..</span> <span class="n">status</span> <span class="o">..</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Upload the lua script to the <code class="language-plaintext highlighter-rouge">main</code> branch under <code class="language-plaintext highlighter-rouge">scripts/unity_exporter.lua</code> and commit:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lakectl fs upload lakefs://repo/main/scripts/unity_exporter.lua <span class="nt">-s</span> ./unity_exporter.lua <span class="o">&amp;&amp;</span> <span class="se">\</span>
lakectl commit lakefs://repo/main <span class="nt">-m</span> <span class="s2">"upload unity exporter script"</span>
</code></pre></div></div>
<h3 id="action-configuration">
  
  
    <a href="#action-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Action configuration
  
  
</h3>
    

<p>Define an action configuration that will run the above script after a commit is completed (<code class="language-plaintext highlighter-rouge">post-commit</code>) over the <code class="language-plaintext highlighter-rouge">main</code> branch.</p>

<p>Create <code class="language-plaintext highlighter-rouge">unity_exports_action.yaml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">unity_exports</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="na">post-commit</span><span class="pi">:</span>
     <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">main"</span><span class="pi">]</span>
<span class="na">hooks</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">unity_export</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">lua</span>
    <span class="na">properties</span><span class="pi">:</span>
      <span class="na">script_path</span><span class="pi">:</span> <span class="s">scripts/unity_exporter.lua</span>
      <span class="na">args</span><span class="pi">:</span>
        <span class="na">aws</span><span class="pi">:</span>
          <span class="na">access_key_id</span><span class="pi">:</span> <span class="s">&lt;AWS_ACCESS_KEY_ID&gt;</span>
          <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s">&lt;AWS_SECRET_ACCESS_KEY&gt;</span>
          <span class="na">region</span><span class="pi">:</span> <span class="s">&lt;AWS_REGION&gt;</span>
        <span class="na">lakefs</span><span class="pi">:</span> <span class="c1"># provide credentials of a user that has access to the script and Delta Table</span>
          <span class="na">access_key_id</span><span class="pi">:</span> <span class="s">&lt;LAKEFS_ACCESS_KEY_ID&gt;</span> 
          <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s">&lt;LAKEFS_SECRET_ACCESS_KEY&gt;</span>
        <span class="na">table_defs</span><span class="pi">:</span> <span class="c1"># an array of table descriptors used to be defined in Unity Catalog</span>
          <span class="pi">-</span> <span class="s">famous-people-td</span>
        <span class="na">databricks_host</span><span class="pi">:</span> <span class="s">&lt;DATABRICKS_HOST_URL&gt;</span>
        <span class="na">databricks_token</span><span class="pi">:</span> <span class="s">&lt;DATABRICKS_SERVICE_PRINCIPAL_TOKEN&gt;</span>
        <span class="na">warehouse_id</span><span class="pi">:</span> <span class="s">&lt;WAREHOUSE_ID&gt;</span>
</code></pre></div></div>

<p>Upload the action configurations to <code class="language-plaintext highlighter-rouge">_lakefs_actions/unity_exports_action.yaml</code> and commit:</p>

<blockquote class="note">
  <p>Once the commit will finish its run, the action will start running since we’ve configured it to run on <code class="language-plaintext highlighter-rouge">post-commit</code> 
events on the <code class="language-plaintext highlighter-rouge">main</code> branch.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lakectl fs upload lakefs://repo/main/_lakefs_actions/unity_exports_action.yaml <span class="nt">-s</span> ./unity_exports_action.yaml <span class="o">&amp;&amp;</span> <span class="se">\</span>
lakectl commit lakefs://repo/main <span class="nt">-m</span> <span class="s2">"upload action and run it"</span>
</code></pre></div></div>

<p>The action has run and exported the <code class="language-plaintext highlighter-rouge">famous_people</code> Delta Lake table to the repo’s storage namespace, and has register 
the table as an external table in Unity Catalog under the catalog <code class="language-plaintext highlighter-rouge">my-catalog-name</code>, schema <code class="language-plaintext highlighter-rouge">main</code> (as the branch’s name) and 
table name <code class="language-plaintext highlighter-rouge">famous_people</code>: <code class="language-plaintext highlighter-rouge">my-catalog-name.main.famous_people</code>.</p>

<p><img src="/v1.32/assets/img/unity_export_hook_result_log.png" alt="Hooks log result in lakeFS UI" /></p>
<h3 id="databricks-integration">
  
  
    <a href="#databricks-integration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Databricks Integration
  
  
</h3>
    

<p>After registering the table in Unity, you can leverage your preferred method to <a href="https://docs.databricks.com/en/query/index.html">query the data</a> 
from the exported table under <code class="language-plaintext highlighter-rouge">my-catalog-name.main.famous_people</code>, and view it in the Databricks’s Catalog Explorer, or
retrieve it using the Databricks CLI with the following command:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>databricks tables get my-catalog-name.main.famous_people
</code></pre></div></div>

<p><img src="/v1.32/assets/img/unity_exported_table_columns.png" alt="Unity Catalog Explorer view" /></p>

                

                
                

                

            </div>
        </div>

        
        

        <div class="search-overlay"></div>
        
    </div>
</div>

<footer>
    <div class="footer-sidebar"></div>
    <div class="footer-main">
        <div class="row">
            <div class="left">
                <ul class="footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs.lakefs.io/" class="site-button" >
                            Docs
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/blog/" class="site-button" >
                            Blog
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                            GitHub
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/community/" class="site-button" >
                            Community
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/cloud-registration/" class="site-button" >
                            lakeFS Cloud
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/contact-us/" class="site-button" >
                            Contact
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
            <div class="right">
                <ul class="footer-social">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/youtube" class="site-button" >
                            <img src="/v1.32/assets/icons/youtube.svg" class="no-hover" />
                            <img src="/v1.32/assets/icons/youtube-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://www.linkedin.com/company/treeverse" class="site-button" >
                            <img src="/v1.32/assets/icons/linkedin.svg" class="no-hover" />
                            <img src="/v1.32/assets/icons/linkedin-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                            <img src="/v1.32/assets/icons/github.svg" class="no-hover" />
                            <img src="/v1.32/assets/icons/github-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://twitter.com/lakeFS" class="site-button" >
                            <img src="/v1.32/assets/icons/twitter.svg" class="no-hover" />
                            <img src="/v1.32/assets/icons/twitter-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://data-folks.masto.host/@lakeFS" class="site-button" >
                            <img src="/v1.32/assets/icons/mastodon.svg" class="no-hover" />
                            <img src="/v1.32/assets/icons/mastodon-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/slack" class="site-button" >
                            <img src="/v1.32/assets/icons/slack.svg" class="no-hover" />
                            <img src="/v1.32/assets/icons/slack-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row top-border">
            <div class="left">
                <a href="https://lakefs.io" class="lh-tight" style="margin-bottom: 0px;">
                    <div class="site-logo"></div>
                </a>                    
            </div>
            <div class="right">
                <ul class="bottom-footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/terms-of-use/" class="site-button" >
                            Terms of use
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/privacy-policy/" class="site-button" >
                            Privacy Policy
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
    </div>
</footer>


</body>

</html>

