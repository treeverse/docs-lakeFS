

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/assets/css/just-the-docs-default.css">
  
  <style type="text/css">
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(3) > .nav-list > .nav-list-item:nth-child(13) > .nav-list-link { display: block; font-weight: 600; text-decoration: none; background-image: linear-gradient(-90deg, #ebedf5 0%, rgba(235, 237, 245, 0.8) 80%, rgba(235, 237, 245, 0) 100%); }

.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(3) > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(3) > .nav-list > .nav-list-item:not(.passive):nth-child(13) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(3) > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(3) > .nav-list > .nav-list-item:not(.passive):nth-child(13) > .nav-list { display: block; }

.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list { display: block; }

</style>


  

  
    <script src="/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="icon" href="/favicon.ico" type="image/x-icon">



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Multiple Storage Backend | lakeFS Documentation</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Multiple Storage Backend" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to manage data across multiple storage systems with lakeFS" />
<meta property="og:description" content="How to manage data across multiple storage systems with lakeFS" />
<meta property="og:site_name" content="lakeFS Documentation" />
<meta property="og:image" content="https://docs.lakefs.io/assets/img/docs_logo.png" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://docs.lakefs.io/assets/img/docs_logo.png" />
<meta property="twitter:title" content="Multiple Storage Backend" />
<meta name="twitter:site" content="@lakeFS" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"How to manage data across multiple storage systems with lakeFS","headline":"Multiple Storage Backend","image":"https://docs.lakefs.io/assets/img/docs_logo.png","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/logo.svg"}},"url":"/howto/multiple-storage-backends.html"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Google Tag Manager Head -->
<!-- type="text/plain" is intentional for cookie consent support -->
<script type="text/plain" data-category="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KTZBZW9');</script>
<!-- End Google Tag Manager Head -->

<meta property="og:image" content="/assets/img/lakefs-logo-with-text.png">
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/fontawesome.min.css" integrity="sha512-giQeaPns4lQTBMRpOOHsYnGw1tGVzbAIHUyHRgn7+6FmiEgGGjaG0T2LZJmAPMzRCl+Cug0ItQ2xDZpTmEc+CQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<link rel="stylesheet" href="/assets/css/cookieconsent.css" />
<script type="module" src="/assets/js/cookieconsent-init.js"></script>
<script src="/assets/js/copy-code.js"></script>
<script>
    $(function () {
        $(".tabs").tabs();
    });
</script>
<script src="/assets/js/feedback.js"></script>


</head>

<script src="https://unpkg.com/mermaid@9.3.0/dist/mermaid.min.js"></script>
<script>
    $(document).ready(function () {
        mermaid.initialize({
            startOnLoad:true,
            theme: "default",
        });
        window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
    });
</script>
<body>
<img src="/assets/img/cookies.png" style="display: none;">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTZBZW9"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-link">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-search">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="16px" viewBox="0 0 20 16" version="1.1"
             class="feather feather-menu">
            <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="header-/-mobile" transform="translate(-30.000000, -32.000000)" fill="#279890">
                    <g id="Group" transform="translate(30.000000, 32.000000)">
                        <path
                                d="M20,14 L20,16 L0,16 L0,14 L20,14 Z M20,7 L20,9 L0,9 L0,7 L20,7 Z M20,0 L20,2 L0,2 L0,0 L20,0 Z"
                                id="mobile-menu" />
                    </g>
                </g>
            </g>
        </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-chevron-right">
            <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-file">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
            <polyline points="13 2 13 9 20 9"></polyline>
        </svg>
    </symbol>
</svg>
<div class="body-wrapper">
    <div class="side-bar">
        <div class="site-header">
            <a href="https://lakefs.io" class="site-title lh-tight">
  <div class="site-logo" role="img" aria-label="lakeFS Documentation"></div>

</a>
            <a href="#" id="menu-button" class="site-button">
                <svg viewBox="0 0 24 24" class="icon">
                    <use xlink:href="#svg-menu"></use>
                </svg>
            </a>
        </div>
        <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
            
            <div class="search">
                <div class="search-input-wrap">
                    <input type="text" id="search-input" class="search-input" tabindex="0"
                           placeholder="Search lakeFS Documentation" aria-label="Search lakeFS Documentation"
                           autocomplete="off">
                    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon">
                            <use xlink:href="#svg-search"></use>
                        </svg></label>
                </div>
                <div id="search-results" class="search-results"></div>
            </div>
            

            <div class="nav-category nav-version">
                <label for="selectversion">Version:</label>
                <select id="selectversion" name="version" onchange="javascript:location.href = '/' + encodeURI(this.value);">
                    <option value="" selected>Latest</option>
                </select>
            </div>
            <script async>
                window.addEventListener("load",  async () => {
                    const pathFirstLevel = location.pathname.split('/')[1];
                    const selectedVersion = pathFirstLevel.startsWith('v') && pathFirstLevel || '';
                    const selectVersionElmFirst = document.getElementById('selectversion').firstElementChild;
                    const response = await fetch('/versions.json');
                    if (!response.ok) {
                        return
                    }
                    const versions = await response.json();
                    for (let [key, value] of Object.entries(versions)) {
                        const el = document.createElement("option");
                        el.value = key;
                        el.textContent = value;
                        if (key === selectedVersion) {
                            el.selected = true;
                        }
                        selectVersionElmFirst.after(el);
                    }
                });
            </script>

            <ul class="nav-list"><li
            class="nav-list-item"><a href="/"
           class="nav-list-link">Welcome to lakeFS</a></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/quickstart/"
           class="nav-list-link">⭐ Quickstart</a><ul class="nav-list "><li class="nav-list-item "><a href="/quickstart/launch.html"
                   class="nav-list-link">1️⃣ Run lakeFS</a></li><li class="nav-list-item "><a href="/quickstart/query.html"
                   class="nav-list-link">2️⃣ Query the data</a></li><li class="nav-list-item "><a href="/quickstart/branch.html"
                   class="nav-list-link">3️⃣ Create a branch</a></li><li class="nav-list-item "><a href="/quickstart/commit-and-merge.html"
                   class="nav-list-link">4️⃣ Commit and Merge</a></li><li class="nav-list-item "><a href="/quickstart/rollback.html"
                   class="nav-list-link">5️⃣ Roll back Changes</a></li><li class="nav-list-item "><a href="/quickstart/actions-and-hooks.html"
                   class="nav-list-link">6️⃣ Using Actions and Hooks in lakeFS</a></li><li class="nav-list-item "><a href="/quickstart/work-with-data-locally.html"
                   class="nav-list-link">7️⃣ Work with lakeFS data locally</a></li><li class="nav-list-item "><a href="/quickstart/learning-more-lakefs.html"
                   class="nav-list-link">Learn more about lakeFS</a></li></ul></li><li
            class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/howto/"
           class="nav-list-link">How-To</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/howto/deploy/"
                   class="nav-list-link">Install lakeFS</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/howto/deploy/aws.html"
                           class="nav-list-link">AWS</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/azure.html"
                           class="nav-list-link">Azure</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/gcp.html"
                           class="nav-list-link">GCP</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/onprem.html"
                           class="nav-list-link">On-Premises</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/upgrade.html"
                           class="nav-list-link">Upgrade lakeFS</a>
                    </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/howto/hooks/"
                   class="nav-list-link">Actions and Hooks</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/howto/hooks/airflow.html"
                           class="nav-list-link">Airflow Hooks</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/hooks/lua.html"
                           class="nav-list-link">Lua Hooks</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/hooks/webhooks.html"
                           class="nav-list-link">Webhooks</a>
                    </li></ul></li><li class="nav-list-item "><a href="/howto/lakefs-tables.html"
                   class="nav-list-link">lakeFS Tables<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a></li><li class="nav-list-item "><a href="/howto/backup-and-restore.html"
                   class="nav-list-link">Backup and Restore Repository</a></li><li class="nav-list-item "><a href="/howto/protect-branches.html"
                   class="nav-list-link">Branch Protection</a></li><li class="nav-list-item "><a href="/howto/copying.html"
                   class="nav-list-link">Copying data to/from lakeFS</a></li><li class="nav-list-item "><a href="/howto/catalog_exports.html"
                   class="nav-list-link">Data Catalogs Exports</a></li><li class="nav-list-item "><a href="/howto/export.html"
                   class="nav-list-link">Export Data</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/howto/garbage-collection/"
                   class="nav-list-link">Garbage Collection</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/howto/garbage-collection/gc.html"
                           class="nav-list-link">Garbage Collection</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/garbage-collection/managed-gc.html"
                           class="nav-list-link">Managed Garbage Collection<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/garbage-collection/standalone-gc.html"
                           class="nav-list-link">Standalone Garbage Collection<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a>
                    </li></ul></li><li class="nav-list-item "><a href="/howto/import.html"
                   class="nav-list-link">Import Data</a></li><li class="nav-list-item "><a href="/howto/migrate-away.html"
                   class="nav-list-link">Migrating away from lakeFS</a></li><li class="nav-list-item "><a href="/howto/mirroring.html"
                   class="nav-list-link">Mirroring<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a></li><li class="nav-list-item  active"><a href="/howto/multiple-storage-backends.html"
                   class="nav-list-link active">Multiple Storage Backend<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a></li><li class="nav-list-item "><a href="/howto/private-link.html"
                   class="nav-list-link">Private Link</a></li><li class="nav-list-item "><a href="/howto/pull-requests.html"
                   class="nav-list-link">Pull Requests</a></li><li class="nav-list-item "><a href="/howto/virtual-host-addressing.html"
                   class="nav-list-link">S3 Virtual-host addressing (advanced)</a></li><li class="nav-list-item "><a href="/howto/sizing-guide.html"
                   class="nav-list-link">Sizing Guide</a></li><li class="nav-list-item "><a href="/howto/scim.html"
                   class="nav-list-link">System for Cross-domain Identity Management (SCIM)<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a></li><li class="nav-list-item "><a href="/howto/local-checkouts.html"
                   class="nav-list-link">Work with lakeFS data locally</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/integrations/"
           class="nav-list-link">Integrations</a><ul class="nav-list "><li class="nav-list-item "><a href="/integrations/aws_cli.html"
                   class="nav-list-link">AWS CLI</a></li><li class="nav-list-item "><a href="/integrations/airbyte.html"
                   class="nav-list-link">Airbyte</a></li><li class="nav-list-item "><a href="/integrations/athena.html"
                   class="nav-list-link">Amazon Athena</a></li><li class="nav-list-item "><a href="/integrations/sagemaker.html"
                   class="nav-list-link">Amazon SageMaker</a></li><li class="nav-list-item "><a href="/integrations/airflow.html"
                   class="nav-list-link">Apache Airflow</a></li><li class="nav-list-item "><a href="/integrations/hive.html"
                   class="nav-list-link">Apache Hive</a></li><li class="nav-list-item "><a href="/integrations/iceberg.html"
                   class="nav-list-link">Apache Iceberg</a></li><li class="nav-list-item "><a href="/integrations/kafka.html"
                   class="nav-list-link">Apache Kafka</a></li><li class="nav-list-item "><a href="/integrations/spark.html"
                   class="nav-list-link">Apache Spark</a></li><li class="nav-list-item "><a href="/integrations/cloudera.html"
                   class="nav-list-link">Cloudera</a></li><li class="nav-list-item "><a href="/integrations/databricks.html"
                   class="nav-list-link">Databricks</a></li><li class="nav-list-item "><a href="/integrations/delta.html"
                   class="nav-list-link">Delta Lake</a></li><li class="nav-list-item "><a href="/integrations/dremio.html"
                   class="nav-list-link">Dremio</a></li><li class="nav-list-item "><a href="/integrations/duckdb.html"
                   class="nav-list-link">DuckDB</a></li><li class="nav-list-item "><a href="/integrations/git.html"
                   class="nav-list-link">Git</a></li><li class="nav-list-item "><a href="/integrations/glue_hive_metastore.html"
                   class="nav-list-link">Glue / Hive metastore</a></li><li class="nav-list-item "><a href="/integrations/glue_metastore.html"
                   class="nav-list-link">Glue Data Catalog</a></li><li class="nav-list-item "><a href="/integrations/huggingface_datasets.html"
                   class="nav-list-link">HuggingFace Datasets</a></li><li class="nav-list-item "><a href="/integrations/kubeflow.html"
                   class="nav-list-link">Kubeflow</a></li><li class="nav-list-item "><a href="/integrations/mlflow.html"
                   class="nav-list-link">MLflow</a></li><li class="nav-list-item "><a href="/integrations/presto_trino.html"
                   class="nav-list-link">Presto / Trino</a></li><li class="nav-list-item "><a href="/integrations/python.html"
                   class="nav-list-link">Python</a></li><li class="nav-list-item "><a href="/integrations/r.html"
                   class="nav-list-link">R</a></li><li class="nav-list-item "><a href="/integrations/red_hat_openshift_ai.html"
                   class="nav-list-link">Red Hat OpenShift AI</a></li><li class="nav-list-item "><a href="/integrations/unity-catalog.html"
                   class="nav-list-link">Unity Catalog</a></li><li class="nav-list-item "><a href="/integrations/vertex_ai.html"
                   class="nav-list-link">Vertex AI</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/understand/"
           class="nav-list-link">Understanding lakeFS</a><ul class="nav-list "><li class="nav-list-item "><a href="/understand/architecture.html"
                   class="nav-list-link">Architecture</a></li><li class="nav-list-item "><a href="/understand/model.html"
                   class="nav-list-link">Concepts and  Model</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/understand/data_lifecycle_management/"
                   class="nav-list-link">Data Lifecycle Management</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/understand/data_lifecycle_management/ci.html"
                           class="nav-list-link">During Deployment</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/data_lifecycle_management/production.html"
                           class="nav-list-link">In Production</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/data_lifecycle_management/data-devenv.html"
                           class="nav-list-link">In Test</a>
                    </li></ul></li><li class="nav-list-item "><a href="/understand/data-structure.html"
                   class="nav-list-link">Data Structure</a></li><li class="nav-list-item "><a href="/understand/faq.html"
                   class="nav-list-link">FAQ</a></li><li class="nav-list-item "><a href="/understand/glossary.html"
                   class="nav-list-link">Glossary</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/understand/how/"
                   class="nav-list-link">How lakeFS Works</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/understand/how/kv.html"
                           class="nav-list-link">Internal database structure</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/how/merge.html"
                           class="nav-list-link">Merge</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/how/versioning-internals.html"
                           class="nav-list-link">Versioning Internals</a>
                    </li></ul></li><li class="nav-list-item "><a href="/understand/performance-best-practices.html"
                   class="nav-list-link">Performance Best Practices</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/understand/use_cases/"
                   class="nav-list-link">Use Cases</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/understand/use_cases/cicd_for_data.html"
                           class="nav-list-link">CI/CD for Data Lakes</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/use_cases/etl_testing.html"
                           class="nav-list-link">ETL Testing Environment</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/use_cases/reproducibility.html"
                           class="nav-list-link">Reproducibility</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/use_cases/rollback.html"
                           class="nav-list-link">Rollback</a>
                    </li></ul></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/reference/"
           class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/reference/mount.html"
                   class="nav-list-link">Mount<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/reference/mount-csi-driver.html"
                           class="nav-list-link">Mount CSI Driver</a>
                    </li><li class="nav-list-item ">
                        <a href="/reference/mount-write-mode-semantics.html"
                           class="nav-list-link">Mount Write Mode Semantics</a>
                    </li></ul></li><li class="nav-list-item "><a href="/reference/auditing.html"
                   class="nav-list-link">Auditing<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a></li><li class="nav-list-item "><a href="/reference/monitor.html"
                   class="nav-list-link">Monitoring using Prometheus</a></li><li class="nav-list-item "><a href="/reference/s3.html"
                   class="nav-list-link">S3 Gateway API</a></li><li class="nav-list-item "><a href="/reference/spark-client.html"
                   class="nav-list-link">Spark Client</a></li><li class="nav-list-item "><a href="/reference/api.html"
                   class="nav-list-link">lakeFS API</a></li><li class="nav-list-item "><a href="/reference/configuration.html"
                   class="nav-list-link">lakeFS Server Configuration</a></li><li class="nav-list-item "><a href="/reference/cli.html"
                   class="nav-list-link">lakectl (lakeFS command-line tool)</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/project/"
           class="nav-list-link">The lakeFS Project</a><ul class="nav-list "><li class="nav-list-item "><a href="/project/contributing.html"
                   class="nav-list-link">Contributing to lakeFS</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/project/docs/"
                   class="nav-list-link">Documentation</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/project/docs/callouts.html"
                           class="nav-list-link">Callouts</a>
                    </li></ul></li><li class="nav-list-item "><a href="/project/code-migrate-1.0-sdk.html"
                   class="nav-list-link">Migrating to 1.0</a></li></ul></li><li
            class="nav-list-item"><a href="/cloud/"
           class="nav-list-link">lakeFS Cloud</a></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/enterprise/"
           class="nav-list-link">lakeFS Enterprise</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/enterprise/getstarted/"
                   class="nav-list-link">Get Started</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/enterprise/getstarted/quickstart.html"
                           class="nav-list-link">Quickstart</a>
                    </li><li class="nav-list-item ">
                        <a href="/enterprise/getstarted/install.html"
                           class="nav-list-link">Install</a>
                    </li><li class="nav-list-item ">
                        <a href="/enterprise/getstarted/migrate-from-oss.html"
                           class="nav-list-link">Migrate from lakeFS OSS</a>
                    </li></ul></li><li class="nav-list-item "><a href="/enterprise/upgrade.html"
                   class="nav-list-link">Upgrade</a></li><li class="nav-list-item "><a href="/enterprise/troubleshooting.html"
                   class="nav-list-link">Troubleshooting lakeFS Enterprise</a></li><li class="nav-list-item "><a href="/enterprise/configuration.html"
                   class="nav-list-link">Configuration Reference</a></li><li class="nav-list-item "><a href="/enterprise/architecture.html"
                   class="nav-list-link">Architecture</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/security/"
           class="nav-list-link">Security</a><ul class="nav-list "><li class="nav-list-item "><a href="/security/ACL-server-implementation.html"
                   class="nav-list-link">ACL Server Implementation</a></li><li class="nav-list-item "><a href="/security/access-control-lists.html"
                   class="nav-list-link">Access Control Lists (ACLs) -Deprecated-</a></li><li class="nav-list-item "><a href="/security/authentication.html"
                   class="nav-list-link">Authentication</a></li><li class="nav-list-item "><a href="/security/authorization-yaml.html"
                   class="nav-list-link">Authorization API</a></li><li class="nav-list-item "><a href="/security/external-principals-aws.html"
                   class="nav-list-link">Login to lakeFS with AWS IAM Roles<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a></li><li class="nav-list-item "><a href="/security/presigned-url.html"
                   class="nav-list-link">Presigned URLs</a></li><li class="nav-list-item "><a href="/security/remote-authenticator.html"
                   class="nav-list-link">Remote Authenticator</a></li><li class="nav-list-item "><a href="/security/rbac.html"
                   class="nav-list-link">Role-Based Access Control (RBAC)<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a></li><li class="nav-list-item "><a href="/security/sts-login.html"
                   class="nav-list-link">Short-lived token (STS like) Authentication for lakeFS<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a></li><li class="nav-list-item "><a href="/security/sso.html"
                   class="nav-list-link">Single Sign On (SSO)<span class="badge badge-enterprise" title="Enterprise">Enterprise</span></a></li></ul></li></ul>
            <div class="mobile-menu">
                
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

            </div>
        </nav>

    </div>
    <div class="main" id="top">
         <div class="feedback-container">
            <div id="is-helpful-ty">
                <div class="text-epsilon">Thank you for your feedback.</div>
                <div class="mt-2 text-epsilon">
                    <a href="https://lakefs.io/slack" target="_blank">Join the community</a> to get more help.
                </div>
            </div>
            <div class="feedback-buttons">
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-up" id="page-helpful-yes"></button>
                    <span class="tooltiptext">
                        This page is <b>helpful</b>
                    </span>
                </span>
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-down" id="page-helpful-no"></button>
                    <span class="tooltiptext">
                        This page is <b>not helpful</b>
                    </span>
                </span>
            </div>
        </div>
        <div id="main-header" class="main-header">
            
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

        </div>
        <div id="main-content-wrap" class="main-content-wrap">
            
            
            <nav aria-label="Breadcrumb" class="breadcrumb-nav">
                <ol class="breadcrumb-nav-list">
                    
                    <li class="breadcrumb-nav-list-item"><a href="/howto/">How-To</a>
                    </li>
                    
                    <li class="breadcrumb-nav-list-item"><span>Multiple Storage Backend</span></li>
                </ol>
            </nav>
            
            
            <div id="main-content" class="main-content" role="main">
                
                    <h1 id="multi-storage-backend">
  
  
    <a href="#multi-storage-backend" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Multi-Storage Backend
  
  
</h1>
    

<p class="label label-purple">lakeFS Enterprise</p>

<blockquote class="note">
  <p>Multi-storage backend support is only available to licensed <a href="/enterprise/">lakeFS Enterprise</a> customers.
<a href="https://info.lakefs.io/thanks-msb">Contact us</a> to get started!</p>
</blockquote>

<div class="toc-block">
<h2 class="no_toc text-delta" id="table-of-contents">
  
  
    <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents
  
  
</h2>
    

<ol id="markdown-toc">
  <li><a href="#what-is-multi-storage-backend-support" id="markdown-toc-what-is-multi-storage-backend-support">What is Multi-storage Backend Support?</a></li>
  <li><a href="#use-cases" id="markdown-toc-use-cases">Use Cases</a></li>
  <li><a href="#configuration" id="markdown-toc-configuration">Configuration</a></li>
  <li><a href="#working-with-repositories" id="markdown-toc-working-with-repositories">Working with Repositories</a></li>
  <li><a href="#limitations" id="markdown-toc-limitations">Limitations</a></li>
</ol>

</div>
<h2 id="what-is-multi-storage-backend-support">
  
  
    <a href="#what-is-multi-storage-backend-support" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is Multi-storage Backend Support?
  
  
</h2>
    

<p>lakeFS multi-storage backend support enables seamless data management across multiple storage systems —
on-premises, across public clouds, or hybrid environments. This capability makes lakeFS a unified data management platform
for all organizational data assets, which is especially critical in AI/ML environments that rely on diverse datasets stored
in multiple locations.</p>

<p>With a multi-store setup, lakeFS can connect to and manage any combination of supported storage systems, including:</p>

<ul>
  <li>AWS S3</li>
  <li>Azure Blob</li>
  <li>Google Cloud Storage</li>
  <li>other S3-compatible storage</li>
  <li>local storage</li>
</ul>

<blockquote class="note">
  <p>Multi-storage backends support is available from version v1.51.0 of lakeFS Enterprise.</p>
</blockquote>
<h2 id="use-cases">
  
  
    <a href="#use-cases" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use Cases
  
  
</h2>
    

<ol>
  <li><strong>Distributed Data Management</strong>:
    <ul>
      <li>Eliminate data silos and enable seamless cross-cloud collaboration.</li>
      <li>Maintain version control across different storage providers for consistency and reproducibility.</li>
      <li>Ideal for AI/ML environments where datasets are distributed across multiple storage locations.</li>
    </ul>
  </li>
  <li><strong>Unified Data Access</strong>:
    <ul>
      <li>Access data across multiple storage backends using a single, consistent <a href="/understand/model.html#lakefs-protocol-uris">URI format</a>.</li>
    </ul>
  </li>
  <li><strong>Centralized Access Control &amp; Governance</strong>:
    <ul>
      <li>Access permissions and policies can be centrally managed across all connected storage systems using lakeFS <a href="/security/rbac.html">RBAC</a>.</li>
      <li>Compliance and security controls remain consistent, regardless of where the data is stored.</li>
    </ul>
  </li>
</ol>
<h2 id="configuration">
  
  
    <a href="#configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration
  
  
</h2>
    

<p>To configure your lakeFS server to connect to multiple storage backends, define them under the <code class="language-plaintext highlighter-rouge">blockstores</code> section in your server configurations.
The <code class="language-plaintext highlighter-rouge">blockstores.stores</code> field is an array of storage backends, each with its own configuration.</p>

<p>For a complete list of available options, refer to the <a href="/reference/configuration.html#blockstores">server configuration reference</a>.</p>

<blockquote class="note">
  <p><strong>Note:</strong> If you’re upgrading from a single-store lakeFS setup, refer to the <a href="#upgrading-from-single-to-multi-store">upgrade guidelines</a>
to ensure a smooth transition.</p>
</blockquote>
<h3 id="example-configurations">
  
  
    <a href="#example-configurations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example Configurations
  
  
</h3>
    

<div class="tabs">
  <ul>
    <li><a href="#on-prem">On-prem</a></li>
    <li><a href="#multi-cloud">Multi-cloud</a></li>
    <li><a href="#hybrid">Hybrid</a></li>
  </ul>

  <div id="on-prem">

    <p>This example setup configures lakeFS to manage data across two separate MinIO instances:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">blockstores</span><span class="pi">:</span>
  <span class="na">signing</span><span class="pi">:</span>
    <span class="na">secret_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">some-secret"</span>
  <span class="na">stores</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">minio-prod"</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Primary</span><span class="nv"> </span><span class="s">on-prem</span><span class="nv"> </span><span class="s">MinIO</span><span class="nv"> </span><span class="s">storage</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">production</span><span class="nv"> </span><span class="s">data"</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">s3"</span>
      <span class="na">s3</span><span class="pi">:</span>
        <span class="na">force_path_style</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">endpoint</span><span class="pi">:</span> <span class="s1">'</span><span class="s">http://minio-prod.local'</span>
        <span class="na">discover_bucket_region</span><span class="pi">:</span> <span class="no">false</span>
        <span class="na">credentials</span><span class="pi">:</span>
          <span class="na">access_key_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prod_access_key"</span>
          <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prod_secret_key"</span>
    <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">minio-backup"</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Backup</span><span class="nv"> </span><span class="s">MinIO</span><span class="nv"> </span><span class="s">storage</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">disaster</span><span class="nv"> </span><span class="s">recovery"</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">s3"</span>
      <span class="na">s3</span><span class="pi">:</span>
        <span class="na">force_path_style</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">endpoint</span><span class="pi">:</span> <span class="s1">'</span><span class="s">http://minio-backup.local'</span>
        <span class="na">discover_bucket_region</span><span class="pi">:</span> <span class="no">false</span>
        <span class="na">credentials</span><span class="pi">:</span>
          <span class="na">access_key_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">backup_access_key"</span>
          <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">backup_secret_key"</span>
</code></pre></div>    </div>

  </div>

  <div id="multi-cloud">

    <p>This example setup configures lakeFS to manage data across two public cloud providers: AWS and Azure:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">blockstores</span><span class="pi">:</span>
  <span class="na">signing</span><span class="pi">:</span>
    <span class="na">secret_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">some-secret"</span>
  <span class="na">stores</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">s3-prod"</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AWS</span><span class="nv"> </span><span class="s">S3</span><span class="nv"> </span><span class="s">storage</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">production</span><span class="nv"> </span><span class="s">data"</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">s3"</span>
      <span class="na">s3</span><span class="pi">:</span>
        <span class="na">region</span><span class="pi">:</span> <span class="s2">"</span><span class="s">us-east-1"</span>
    <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">azure-analytics"</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Azure</span><span class="nv"> </span><span class="s">Blob</span><span class="nv"> </span><span class="s">storage</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">analytics</span><span class="nv"> </span><span class="s">data"</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">azure"</span>
      <span class="na">azure</span><span class="pi">:</span>
        <span class="na">storage_account</span><span class="pi">:</span> <span class="s2">"</span><span class="s">analytics-account"</span>
        <span class="na">storage_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">EXAMPLE45551FSAsVVCXCF"</span>
</code></pre></div>    </div>

  </div>

  <div id="hybrid">

    <p>This hybrid setup allows lakeFS to manage data across both cloud and on-prem storages.</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">blockstores</span><span class="pi">:</span>
  <span class="na">signing</span><span class="pi">:</span>
    <span class="na">secret_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">some-secret"</span>
  <span class="na">stores</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">s3-archive"</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AWS</span><span class="nv"> </span><span class="s">S3</span><span class="nv"> </span><span class="s">storage</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">long-term</span><span class="nv"> </span><span class="s">archival"</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">s3"</span>
      <span class="na">s3</span><span class="pi">:</span>
        <span class="na">region</span><span class="pi">:</span> <span class="s2">"</span><span class="s">us-west-2"</span>
    <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">minio-fast-access"</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">On-prem</span><span class="nv"> </span><span class="s">MinIO</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">high-performance</span><span class="nv"> </span><span class="s">workloads"</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">s3"</span>
      <span class="na">s3</span><span class="pi">:</span>
        <span class="na">force_path_style</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">endpoint</span><span class="pi">:</span> <span class="s1">'</span><span class="s">http://minio.local'</span>
        <span class="na">discover_bucket_region</span><span class="pi">:</span> <span class="no">false</span>
        <span class="na">credentials</span><span class="pi">:</span>
          <span class="na">access_key_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">minio_access_key"</span>
          <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">minio_secret_key"</span>
</code></pre></div>    </div>

  </div>
</div>
<h3 id="key-considerations">
  
  
    <a href="#key-considerations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Key Considerations
  
  
</h3>
    

<ul>
  <li>Unique Blockstore IDs: Each storage must have a unique id.</li>
  <li>Persistence of Blockstore IDs: Once defined, an id must not change.</li>
  <li>S3 Authentication Handling:
    <ul>
      <li>All standard S3 authentication methods are supported.</li>
      <li>Every blockstore needs to be authenticated.  So make sure to configure a profile or static credentials for all storages of type <code class="language-plaintext highlighter-rouge">s3</code>.
  S3 storage will use the credentials chain by default, so you might be able to use that for one storage.</li>
    </ul>
  </li>
</ul>

<blockquote class="warning">
  <p>Changing a storage ID is not supported and may result in unexpected behavior. Ensure IDs remain consistent once configured.</p>
</blockquote>
<h3 id="upgrading-from-a-single-storage-backend-to-multiple-storage-backends">
  
  
    <a href="#upgrading-from-a-single-storage-backend-to-multiple-storage-backends" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Upgrading from a single storage backend to Multiple Storage backends
  
  
</h3>
    

<p>When upgrading from a single storage backend to a multi-storage setup, follow these guidelines:</p>

<ul>
  <li>Use the new <code class="language-plaintext highlighter-rouge">blockstores</code> structure, <strong>replacing</strong> the existing <code class="language-plaintext highlighter-rouge">blockstore</code> configuration. Note that <code class="language-plaintext highlighter-rouge">blockstore</code> and <code class="language-plaintext highlighter-rouge">blockstores</code>
configurations are mutually exclusive - lakeFS does not support both simultaneously.</li>
  <li>Define all previously available <a href="/reference/configuration.html#blockstore">single-blockstore settings</a> under their respective storage backends.</li>
  <li>The <code class="language-plaintext highlighter-rouge">signing.secret_key</code> is a required setting global to all connected stores.</li>
  <li>Set <code class="language-plaintext highlighter-rouge">backward_compatible: true</code> for the existing storage backend to ensure:
    <ul>
      <li>Existing repositories continue to use the original storage backend.</li>
      <li>Newly created repositories default to this backend unless explicitly assigned a different one, to ensure a non-breaking upgrade process.</li>
      <li><strong>This setting is mandatory</strong> — lakeFS will not function if it is unset.</li>
      <li><strong>Do not remove this setting</strong> as long as you need to support repositories created before the upgrade.
If removed, lakeFS will fail to start because it will treat existing repositories as disconnected from any configured storage.</li>
    </ul>
  </li>
</ul>
<h3 id="adding-or-removing-a-storage-backend">
  
  
    <a href="#adding-or-removing-a-storage-backend" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding or Removing a Storage Backend
  
  
</h3>
    

<p>To add a storage backend, update the server configuration with the new storage entry and restart the server.</p>

<p>To remove a storage backend:</p>

<ul>
  <li>Delete all repositories associated with the storage backend. (definition only)</li>
  <li>Remove the storage entry from the configuration.</li>
  <li>Restart the server.</li>
</ul>

<blockquote class="warning">
  <p>lakeFS will fail to start if there are repositories defined on a removed storage. Ensure all necessary cleanup is completed before removing a storage backend.</p>
</blockquote>
<h3 id="listing-connected-storage-backends">
  
  
    <a href="#listing-connected-storage-backends" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Listing Connected Storage Backends
  
  
</h3>
    

<p>The <a href="https://docs.lakefs.io/reference/api.html#/config/getConfig">Get Config</a> API endpoint returns a list of storage
configurations. In multi-storage setups, this is the recommended method to list connected storage backends and view their details.</p>
<h3 id="troubleshooting">
  
  
    <a href="#troubleshooting" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Troubleshooting
  
  
</h3>
    

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>Issue</th>
      <th>Cause</th>
      <th>Solution</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Blockstore ID conflicts</td>
      <td>Duplicate <code class="language-plaintext highlighter-rouge">id</code> values in <code class="language-plaintext highlighter-rouge">stores</code></td>
      <td>Ensure each storage backend has a unique ID</td>
    </tr>
    <tr>
      <td>Missing <code class="language-plaintext highlighter-rouge">backward_compatible</code></td>
      <td>Upgrade from single to multi-storage without setting the flag</td>
      <td>Add <code class="language-plaintext highlighter-rouge">backward_compatible: true</code> for the existing storage</td>
    </tr>
    <tr>
      <td>Unsupported configurations in OSS or unlicensed Enterprise accounts</td>
      <td>Using multi-storage features in an unsupported setup</td>
      <td>Contact us to start using the feature</td>
    </tr>
  </tbody>
</table></div>
<h3 id="migrating-from-multiple-storage-backend-to-single-storage-backend">
  
  
    <a href="#migrating-from-multiple-storage-backend-to-single-storage-backend" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Migrating from Multiple Storage Backend to Single Storage Backend
  
  
</h3>
    

<p>Once you upgrade to a multi-storage setup, you cannot simply revert back by changing the configuration from <code class="language-plaintext highlighter-rouge">blockstores</code> to <code class="language-plaintext highlighter-rouge">blockstore</code>. The internal repository metadata format changes to support multiple storage backends, and is not backward compatible with the single storage format. If you need to consolidate your data and revert from a multi-storage setup to a single storage backend, you’ll need to perform a full migration by following these steps:</p>
<h4 id="overview">
  
  
    <a href="#overview" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview
  
  
</h4>
    

<p>The migration process involves:</p>

<ol>
  <li>Dumping repository references from the multi-storage setup</li>
  <li>Deleting repositories in the multi-storage environment</li>
  <li>Configuring lakeFS with a single storage backend</li>
  <li></li>
  <li>Restoring repositories to the single storage environment</li>
</ol>
<h4 id="step-by-step-guide">
  
  
    <a href="#step-by-step-guide" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step-by-Step Guide
  
  
</h4>
    

<p>Use the <code class="language-plaintext highlighter-rouge">lakefs-refs.py</code> script, instruction on how to aquire found in <a href="/howto/backup-and-restore.html#python-helper-script-for-backup-and-restore">Backup and Restore</a>.</p>

<ol>
  <li>
    <p><strong>Dump Repository References</strong></p>

    <p>To dump the repository metadata:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Dump a single repository</span>
python lakefs-refs.py dump my-repository
   
<span class="c"># Or dump all repositories</span>
python lakefs-refs.py dump <span class="nt">--all</span>
</code></pre></div>    </div>

    <p>This will create manifest files for each repository.</p>

    <p>Optionally, you can use the <code class="language-plaintext highlighter-rouge">--rm</code> flag to automatically delete repositories after successful dump:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Dump and delete a single repository</span>
python lakefs-refs.py dump my-repository <span class="nt">--rm</span>
   
<span class="c"># Or dump and delete all repositories</span>
python lakefs-refs.py dump <span class="nt">--all</span> <span class="nt">--rm</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Delete Source Repositories</strong> (if not using –rm flag)</p>

    <p>If you didn’t use the <code class="language-plaintext highlighter-rouge">--rm</code> flag in step 1, you’ll need to delete the repositories manually. Note that deleting a repository only removes the repository record from lakeFS - it does not delete the actual data files or metadata from your storage.</p>

    <p>You can delete repositories through:</p>

    <p>a. The lakeFS UI
b. Using lakectl (ex: <code class="language-plaintext highlighter-rouge">lakectl repo delete lakefs://my-repository</code>)</p>
  </li>
  <li>
    <p><strong>Configure lakeFS Single Storage</strong></p>

    <ul>
      <li>Update your lakeFS configuration to use a single storage backend (using the <code class="language-plaintext highlighter-rouge">blockstore</code> section instead of <code class="language-plaintext highlighter-rouge">blockstores</code>).</li>
      <li>Start or restart lakeFS after applying the new configuration</li>
      <li>Example of single storage backend configuration: (multi storage backend example can be found in the <a href="#configuration">Configuration</a> section)</li>
    </ul>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">...</span>
<span class="na">blockstore</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">s3</span>
  <span class="na">s3</span><span class="pi">:</span>
    <span class="na">region</span><span class="pi">:</span> <span class="s">us-east-1</span>
<span class="nn">...</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Copy Repository Data</strong> (if needed)</p>
  </li>
</ol>

<p>If the repositories you want to restore were created on a storage system that lakeFS is no longer connected to:</p>

<p>a. Copy data from the old storage locations to the new one:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c"># Example for S3</span>
   aws s3 <span class="nb">sync </span>s3://old-bucket/path/to/storge-namespace s3://new-bucket/path/to/storage-namespace
   
   <span class="c"># Alternative: Using rclone for cross-provider transfers</span>
   <span class="c"># rclone supports various storage providers (S3, Azure, GCS, etc.)</span>
   rclone <span class="nb">sync </span>azure:old-container/path/to/storage-namespace aws:new-bucket/path/to/storage-namespace
</code></pre></div></div>

<p>b. Update the manifest file, created on step 1 (dump repository references) with the new storage namespace:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">   </span><span class="p">{</span><span class="w">
     </span><span class="nl">"repository"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-repository"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"storage_namespace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s3://new-bucket/path/to/repo"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">update</span><span class="w"> </span><span class="err">here</span><span class="w"> </span><span class="err">...</span><span class="w">
       </span><span class="nl">"default_branch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"storage_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"storage-1"</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="nl">"refs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">existing</span><span class="w"> </span><span class="err">refs</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">...</span><span class="w">
     </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ol>
  <li>
    <p><strong>Restore Repositories</strong></p>

    <blockquote class="note">
      <p>Note: If you copied the data to a new location in step 4, make sure to update the storage namespace in the manifest files before restoring.</p>
    </blockquote>

    <p>Use the <code class="language-plaintext highlighter-rouge">--ignore-storage-id</code> flag to ensure repositories are created without storage IDs in the single-storage environment:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Restore a single repository</span>
python lakefs-refs.py restore my-repository_manifest.json <span class="nt">--ignore-storage-id</span>
   
<span class="c"># Or restore multiple repositories</span>
python lakefs-refs.py restore repo1_manifest.json repo2_manifest.json <span class="nt">--ignore-storage-id</span>
</code></pre></div>    </div>
  </li>
</ol>
<h4 id="important-notes">
  
  
    <a href="#important-notes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Important Notes
  
  
</h4>
    

<ul>
  <li>Keep the manifest files safe as they contain repository metadata</li>
  <li>If using different storage backends, ensure proper access permissions to copy the data</li>
  <li>The <code class="language-plaintext highlighter-rouge">--commit</code> flag can be used if you want to ensure all changes are committed before dumping</li>
  <li>Make sure the new storage backend has sufficient space for all repository data</li>
  <li>A lakeFS instance configured with a single storage type will not start if repositories created on multiple storage setup still exist</li>
</ul>
<h2 id="working-with-repositories">
  
  
    <a href="#working-with-repositories" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Working with Repositories
  
  
</h2>
    

<p>After setting up lakeFS Enterprise to connect with multiple storage backends, this section explains how to use these
connected storages when working with lakeFS.</p>

<p>With multiple storage backends configured, lakeFS repositories are now linked to a specific storage. Together with
the repository’s <a href="/understand/model.html#concepts-unique-to-lakefs">storage namespace</a>, this defines the exact location in
the underlying storage where the repository’s data is stored.</p>

<p>The choice of storage backend impacts the following lakeFS operations:</p>
<h3 id="creating-a-repository">
  
  
    <a href="#creating-a-repository" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a Repository
  
  
</h3>
    

<p>In a multi-storage setup, users must specify a storage ID when creating a repository. This can be done using the following methods:</p>

<div class="tabs">
  <ul>
    <li><a href="#ui">UI</a></li>
    <li><a href="#cli">CLI</a></li>
    <li><a href="#api">API</a></li>
    <li><a href="#hl-sdk">High-level Python SDK</a></li>
  </ul>

  <div id="ui">

    <p>Select a storage backend from the dropdown menu.
<img src="/assets/img/msb/msb_create_repo_ui.png" alt="create repo with storage id" /></p>

  </div>

  <div id="cli">

    <p>Use the <code class="language-plaintext highlighter-rouge">--storage-id</code> flag with the <a href="/reference/cli.html#lakectl-repo-create">repo create</a> command:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lakectl repo create lakefs://my-repo s3://my-bucket <span class="nt">--storage-id</span> my-storage
</code></pre></div>    </div>

    <p><strong>Note</strong>: The <code class="language-plaintext highlighter-rouge">--storage-id</code> flag is currently hidden in the CLI.</p>

  </div>

  <div id="api">

    <p>Use the <code class="language-plaintext highlighter-rouge">storage_id</code> parameter in the <a href="/reference/api.html#/repositories/createRepository">Create Repository endpoint</a>.</p>

  </div>

  <div id="hl-sdk">

    <p>Starting from version 0.9.0 of the <a href="https://docs.lakefs.io/integrations/python.html#using-the-lakefs-sdk">High-level Python SDK</a>,
you can use <code class="language-plaintext highlighter-rouge">kwargs</code> to pass <code class="language-plaintext highlighter-rouge">storage_id</code> dynamically when calling the <a href="https://pydocs-lakefs.lakefs.io/lakefs.repository.html#lakefs.repository.Repository.create">create repository method</a>:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span>

<span class="n">repo</span> <span class="o">=</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">Repository</span><span class="p">(</span><span class="s">"example-repo"</span><span class="p">).</span><span class="n">create</span><span class="p">(</span><span class="n">storage_namespace</span><span class="o">=</span><span class="s">"s3://storage-bucket/repos/example-repo"</span><span class="p">,</span> <span class="n">storage_id</span><span class="o">=</span><span class="s">"my-storage-id"</span><span class="p">)</span>
</code></pre></div>    </div>

  </div>

</div>

<p><strong>Important notes:</strong></p>

<ul>
  <li>In multi-storage setups where a storage backend is marked as <code class="language-plaintext highlighter-rouge">backward_compatible: true</code>, repository creation requests
without a storage ID will default to this storage.</li>
  <li>If no storage backend is marked as <code class="language-plaintext highlighter-rouge">backward_compatible</code>, repository creation requests without a storage ID will fail.</li>
  <li>Each repository is linked to a single backend and stores data within a single storage namespace on that backend.</li>
</ul>
<h3 id="viewing-repository-details">
  
  
    <a href="#viewing-repository-details" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Viewing Repository Details
  
  
</h3>
    

<p>To check which storage backend is associated with a repository:</p>

<div class="tabs">
  <ul>
    <li><a href="#ui">UI</a></li>
    <li><a href="#api">API</a></li>
  </ul>

  <div id="ui">

    <p>The storage ID is displayed under “Storage” in the repository settings page.
<img src="/assets/img/msb/msb_repo_settings_ui.png" alt="repo settings" /></p>

  </div>

  <div id="api">

    <p>Use the <a href="/reference/api.html#/repositories/listRepositories">List Repositories</a> endpoint. Its response includes the storage ID.</p>

  </div>
</div>
<h3 id="importing-data-into-a-repository">
  
  
    <a href="#importing-data-into-a-repository" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Importing Data into a Repository
  
  
</h3>
    

<p>Importing data into a repository is supported when the credentials used for the repository’s backing blockstore allow
read and list access to the storage location.</p>
<h2 id="limitations">
  
  
    <a href="#limitations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Limitations
  
  
</h2>
    
<h3 id="supported-storages">
  
  
    <a href="#supported-storages" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Supported storages
  
  
</h3>
    

<p>Multi-storage backend support has been validated on:</p>

<ul>
  <li>Self-managed S3-compatible object storage (MinIO)</li>
  <li>Amazon S3</li>
  <li>Local storage</li>
</ul>

<blockquote class="note">
  <p><strong>Note:</strong> Other storage backends may work but have not been officially tested. If you’re interested in exploring
additional configurations, please reach <a href="https://info.lakefs.io/thanks-msb">contact us</a>.</p>
</blockquote>
<h3 id="unsupported-clients">
  
  
    <a href="#unsupported-clients" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Unsupported clients
  
  
</h3>
    

<p>The following clients do not currently support working with multiple storage backends. However, we are actively working
to bridge this gap:</p>

<ul>
  <li><a href="/howto/garbage-collection/">Spark-based GC</a></li>
  <li><a href="/reference/spark-client.html">Spark client</a></li>
  <li><a href="/integrations/spark.html#lakefs-hadoop-filesystem">lakeFS Hadoop FileSystem</a></li>
  <li><a href="/reference/mount.html">Everest</a></li>
</ul>

                

                
                

                

            </div>
        </div>

        
        

        <div class="search-overlay"></div>
        
    </div>
</div>

<footer>
    <div class="footer-sidebar"></div>
    <div class="footer-main">
        <div class="row">
            <div class="left">
                <ul class="footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs.lakefs.io/" class="site-button" >
                            Docs
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/blog/" class="site-button" >
                            Blog
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                            GitHub
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/community/" class="site-button" >
                            Community
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/cloud-registration/" class="site-button" >
                            lakeFS Cloud
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/contact-us/" class="site-button" >
                            Contact
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
            <div class="right">
                <ul class="footer-social">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/youtube" class="site-button" >
                            <img src="/assets/icons/youtube.svg" class="no-hover" />
                            <img src="/assets/icons/youtube-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://www.linkedin.com/company/treeverse" class="site-button" >
                            <img src="/assets/icons/linkedin.svg" class="no-hover" />
                            <img src="/assets/icons/linkedin-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                            <img src="/assets/icons/github.svg" class="no-hover" />
                            <img src="/assets/icons/github-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://twitter.com/lakeFS" class="site-button" >
                            <img src="/assets/icons/twitter.svg" class="no-hover" />
                            <img src="/assets/icons/twitter-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/slack" class="site-button" >
                            <img src="/assets/icons/slack.svg" class="no-hover" />
                            <img src="/assets/icons/slack-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row top-border">
            <div class="left">
                <a href="https://lakefs.io" class="lh-tight" style="margin-bottom: 0px;">
                    <div class="site-logo"></div>
                </a>                    
            </div>
            <div class="right">
                <ul class="bottom-footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/terms-of-use/" class="site-button" >
                            Terms of use
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/privacy-policy/" class="site-button" >
                            Privacy Policy
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
    </div>
</footer>


</body>

</html>

