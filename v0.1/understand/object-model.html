

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  

  <link rel="shortcut icon" href="/v0.1/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/v0.1/assets/css/just-the-docs-default.css">

  

  
    <script type="text/javascript" src="/v0.1/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/v0.1/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Object Model | lakeFS</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Object Model" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The lakeFS object model blends the object models of git and of object stores such as S3. Here are the explicit definitions." />
<meta property="og:description" content="The lakeFS object model blends the object models of git and of object stores such as S3. Here are the explicit definitions." />
<meta property="og:site_name" content="lakeFS" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Object Model" />
<script type="application/ld+json">
{"description":"The lakeFS object model blends the object models of git and of object stores such as S3. Here are the explicit definitions.","headline":"Object Model","@type":"WebPage","url":"/v0.1/understand/object-model.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/v0.1/assets/logo.svg"}},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Google Tag Manager Head -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KTZBZW9');</script>
<!-- End Google Tag Manager Head -->
<meta property="og:image" content="/v0.1/assets/img/shared-image.png">
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/js/fontawesome.min.js" integrity="sha512-i3N2a3sMtKOQHXCJF3qEpce5twcGN9mRsWQe6PUTf9WS/eG5XkivI97uxit7B2nRGz5XuoszBaqndSqxdeVfag==" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="/v0.1/assets/js/copy-code.js"></script>
<script>
    $(function () {
        $(".tabs").tabs();
    });
</script>


</head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTZBZW9"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-link">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-search">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="16px" viewBox="0 0 20 16" version="1.1"
             class="feather feather-menu">
            <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="header-/-mobile" transform="translate(-30.000000, -32.000000)" fill="#279890">
                    <g id="Group" transform="translate(30.000000, 32.000000)">
                        <path
                                d="M20,14 L20,16 L0,16 L0,14 L20,14 Z M20,7 L20,9 L0,9 L0,7 L20,7 Z M20,0 L20,2 L0,2 L0,0 L20,0 Z"
                                id="mobile-menu" />
                    </g>
                </g>
            </g>
        </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-chevron-right">
            <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-file">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
            <polyline points="13 2 13 9 20 9"></polyline>
        </svg>
    </symbol>
</svg>
<div class="body-wrapper">
    <div class="side-bar">
        <div class="site-header">
            <a href="https://lakefs.io" class="site-title lh-tight">
  <div class="site-logo"></div>

</a>
            <a href="#" id="menu-button" class="site-button">
                <svg viewBox="0 0 24 24" class="icon">
                    <use xlink:href="#svg-menu"></use>
                </svg>
            </a>
        </div>
        <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
            
            <div class="search">
                <div class="search-input-wrap">
                    <input type="text" id="search-input" class="search-input" tabindex="0"
                           placeholder="Search lakeFS" aria-label="Search lakeFS"
                           autocomplete="off">
                    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon">
                            <use xlink:href="#svg-search"></use>
                        </svg></label>
                </div>
                <div id="search-results" class="search-results"></div>
            </div>
            

            <div class="nav-category nav-version">
                <label for="selectversion">Version:</label>
                <select id="selectversion" name="version" onchange="javascript:location.href = '/' + this.value;">
                    <option value="" selected>Latest</option>
                </select>
            </div>
            <script async>
                window.addEventListener("load",  async () => {
                    const pathFirstLevel = location.pathname.split('/')[1];
                    const selectedVersion = pathFirstLevel.startsWith('v') && pathFirstLevel || '';
                    const selectVersionElmFirst = document.getElementById('selectversion').firstElementChild;
                    const response = await fetch('/versions.json');
                    if (!response.ok) {
                        return
                    }
                    const versions = await response.json();
                    for (let [key, value] of Object.entries(versions)) {
                        const el = document.createElement("option");
                        el.value = key;
                        el.textContent = value;
                        if (key === selectedVersion) {
                            el.selected = true;
                        }
                        selectVersionElmFirst.after(el);
                    }
                });
            </script>

            <ul class="nav-list"><li
            class="nav-list-item"><a href="/v0.1/"
           class="nav-list-link">What is lakeFS</a></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v0.1/quickstart/"
           class="nav-list-link">Quickstart</a><ul class="nav-list "><li class="nav-list-item "><a href="/v0.1/quickstart/try.html"
                   class="nav-list-link">Try without installing</a></li><li class="nav-list-item "><a href="/v0.1/quickstart/installing.html"
                   class="nav-list-link">Install lakeFS</a></li><li class="nav-list-item "><a href="/v0.1/quickstart/repository.html"
                   class="nav-list-link">Create a Repository</a></li><li class="nav-list-item "><a href="/v0.1/quickstart/add_data.html"
                   class="nav-list-link">Add Data</a></li><li class="nav-list-item "><a href="/v0.1/quickstart/first_commit.html"
                   class="nav-list-link">Commit the Changes</a></li><li class="nav-list-item "><a href="/v0.1/quickstart/more_quickstart_options.html"
                   class="nav-list-link">More Quickstart Options</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v0.1/deploy/"
           class="nav-list-link">Deploy lakeFS</a><ul class="nav-list "><li class="nav-list-item "><a href="/v0.1/deploy/aws.html"
                   class="nav-list-link">On AWS</a></li><li class="nav-list-item "><a href="/v0.1/deploy/azure.html"
                   class="nav-list-link">On Azure</a></li><li class="nav-list-item "><a href="/v0.1/deploy/gcp.html"
                   class="nav-list-link">On GCP</a></li><li class="nav-list-item "><a href="/v0.1/deploy/k8s.html"
                   class="nav-list-link">With Kubernetes</a></li><li class="nav-list-item "><a href="/v0.1/deploy/docker.html"
                   class="nav-list-link">With Docker</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v0.1/setup/"
           class="nav-list-link">Setup lakeFS</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/v0.1/setup/storage/"
                   class="nav-list-link">Prepare Your Storage</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/v0.1/setup/storage/s3.html"
                           class="nav-list-link">AWS S3</a>
                    </li><li class="nav-list-item ">
                        <a href="/v0.1/setup/storage/gcs.html"
                           class="nav-list-link">Google Cloud Storage</a>
                    </li><li class="nav-list-item ">
                        <a href="/v0.1/setup/storage/blob.html"
                           class="nav-list-link">Azure Blob Storage</a>
                    </li></ul></li><li class="nav-list-item "><a href="/v0.1/setup/create-repo.html"
                   class="nav-list-link">Create a Repository</a></li><li class="nav-list-item "><a href="/v0.1/setup/import.html"
                   class="nav-list-link">Import data into lakeFS</a></li><li class="nav-list-item "><a href="/v0.1/setup/hooks.html"
                   class="nav-list-link">Hooks</a></li><li class="nav-list-item "><a href="/v0.1/setup/virtual-host-addressing.html"
                   class="nav-list-link">S3 Virtual-host addressing (advanced)</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v0.1/usecases/"
           class="nav-list-link">Using lakeFS</a><ul class="nav-list "><li class="nav-list-item "><a href="/v0.1/usecases/data-devenv.html"
                   class="nav-list-link">In Development</a></li><li class="nav-list-item "><a href="/v0.1/usecases/ci.html"
                   class="nav-list-link">During Deployment</a></li><li class="nav-list-item "><a href="/v0.1/usecases/production.html"
                   class="nav-list-link">In Production</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v0.1/reference/"
           class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/v0.1/reference/api.html"
                   class="nav-list-link">API Reference</a></li><li class="nav-list-item "><a href="/v0.1/reference/s3.html"
                   class="nav-list-link">S3 Supported API</a></li><li class="nav-list-item "><a href="/v0.1/reference/configuration.html"
                   class="nav-list-link">Configuration Reference</a></li><li class="nav-list-item "><a href="/v0.1/reference/commands.html"
                   class="nav-list-link">Command (CLI) Reference</a></li><li class="nav-list-item "><a href="/v0.1/reference/protected_branches.html"
                   class="nav-list-link">Protected Branches</a></li><li class="nav-list-item "><a href="/v0.1/reference/export.html"
                   class="nav-list-link">Exporting Data</a></li><li class="nav-list-item "><a href="/v0.1/reference/garbage-collection.html"
                   class="nav-list-link">Garbage Collection</a></li><li class="nav-list-item "><a href="/v0.1/reference/monitor.html"
                   class="nav-list-link">Monitoring using Prometheus</a></li><li class="nav-list-item "><a href="/v0.1/reference/offboarding.html"
                   class="nav-list-link">Migrating away from lakeFS</a></li><li class="nav-list-item "><a href="/v0.1/reference/upgrade.html"
                   class="nav-list-link">Upgrade lakeFS</a></li><li class="nav-list-item "><a href="/v0.1/reference/authorization.html"
                   class="nav-list-link">Authentication & Authorization</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v0.1/integrations/"
           class="nav-list-link">Integrations</a><ul class="nav-list "><li class="nav-list-item "><a href="/v0.1/integrations/distcp.html"
                   class="nav-list-link">Copying Data with DistCp</a></li><li class="nav-list-item "><a href="/v0.1/integrations/rclone.html"
                   class="nav-list-link">Copying data with Rclone</a></li><li class="nav-list-item "><a href="/v0.1/integrations/aws_cli.html"
                   class="nav-list-link">AWS CLI</a></li><li class="nav-list-item "><a href="/v0.1/integrations/spark.html"
                   class="nav-list-link">Spark</a></li><li class="nav-list-item "><a href="/v0.1/integrations/hive.html"
                   class="nav-list-link">Hive</a></li><li class="nav-list-item "><a href="/v0.1/integrations/python.html"
                   class="nav-list-link">Python</a></li><li class="nav-list-item "><a href="/v0.1/integrations/emr.html"
                   class="nav-list-link">EMR</a></li><li class="nav-list-item "><a href="/v0.1/integrations/presto_trino.html"
                   class="nav-list-link">Presto/Trino</a></li><li class="nav-list-item "><a href="/v0.1/integrations/boto.html"
                   class="nav-list-link">Boto (Python)</a></li><li class="nav-list-item "><a href="/v0.1/integrations/minio.html"
                   class="nav-list-link">MinIO</a></li><li class="nav-list-item "><a href="/v0.1/integrations/athena.html"
                   class="nav-list-link">Amazon Athena</a></li><li class="nav-list-item "><a href="/v0.1/integrations/airflow.html"
                   class="nav-list-link">Airflow</a></li><li class="nav-list-item "><a href="/v0.1/integrations/kubeflow.html"
                   class="nav-list-link">Kubeflow</a></li><li class="nav-list-item "><a href="/v0.1/integrations/airbyte.html"
                   class="nav-list-link">Airbyte</a></li><li class="nav-list-item "><a href="/v0.1/integrations/databricks.html"
                   class="nav-list-link">Databricks</a></li><li class="nav-list-item "><a href="/v0.1/integrations/delta.html"
                   class="nav-list-link">Delta Lake</a></li><li class="nav-list-item "><a href="/v0.1/integrations/dbt.html"
                   class="nav-list-link">DBT</a></li><li class="nav-list-item "><a href="/v0.1/integrations/glue_hive_metastore.html"
                   class="nav-list-link">Glue / Hive metastore</a></li><li class="nav-list-item "><a href="/v0.1/integrations/glue_etl.html"
                   class="nav-list-link">Glue ETL</a></li><li class="nav-list-item "><a href="/v0.1/integrations/kakfa.html"
                   class="nav-list-link">Kafka</a></li><li class="nav-list-item "><a href="/v0.1/integrations/mapreduce.html"
                   class="nav-list-link">MapReduce</a></li><li class="nav-list-item "><a href="/v0.1/integrations/sagemaker.html"
                   class="nav-list-link">SageMaker</a></li><li class="nav-list-item "><a href="/v0.1/integrations/dremio.html"
                   class="nav-list-link">Dremio</a></li></ul></li><li
            class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/v0.1/understand/"
           class="nav-list-link">Understanding lakeFS</a><ul class="nav-list "><li class="nav-list-item "><a href="/v0.1/understand/architecture.html"
                   class="nav-list-link">Architecture</a></li><li class="nav-list-item "><a href="/v0.1/understand/versioning-internals.html"
                   class="nav-list-link">Versioning Internals</a></li><li class="nav-list-item  active"><a href="/v0.1/understand/object-model.html"
                   class="nav-list-link active">Object Model</a></li><li class="nav-list-item "><a href="/v0.1/understand/branching-model.html"
                   class="nav-list-link">Branching Model</a></li><li class="nav-list-item "><a href="/v0.1/understand/sizing-guide.html"
                   class="nav-list-link">Sizing Guide</a></li><li class="nav-list-item "><a href="/v0.1/understand/roadmap.html"
                   class="nav-list-link">Roadmap</a></li></ul></li><li
            class="nav-list-item"><a href="/v0.1/commitment.html"
           class="nav-list-link">Our commitment to open source</a></li><li
            class="nav-list-item"><a href="/v0.1/contributing.html"
           class="nav-list-link">Contributing</a></li><li
            class="nav-list-item"><a href="/v0.1/faq.html"
           class="nav-list-link">FAQ</a></li></ul>
            <div class="mobile-menu">
                
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/cloud-registration/" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                lakeFS Cloud
            </a>
        </li>
        
        
    </ul>
</nav>

            </div>
        </nav>

    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
            
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/cloud-registration/" class="site-button"  target="_blank"
               rel="noopener noreferrer" >
                lakeFS Cloud
            </a>
        </li>
        
        
    </ul>
</nav>

        </div>
        <div id="main-content-wrap" class="main-content-wrap">
            
            
            <nav aria-label="Breadcrumb" class="breadcrumb-nav">
                <ol class="breadcrumb-nav-list">
                    
                    <li class="breadcrumb-nav-list-item"><a href="/v0.1/understand/">Understanding lakeFS</a>
                    </li>
                    
                    <li class="breadcrumb-nav-list-item"><span>Object Model</span></li>
                </ol>
            </nav>
            
            
            <div id="main-content" class="main-content" role="main">
                
                <h1 class="no_toc" id="object-model">
        
        
          <a href="#object-model" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Object Model
        
        
      </h1>
    

<div class="toc-block">
      <h2 class="no_toc text-delta" id="table-of-contents">
        
        
          <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents
        
        
      </h2>
    

<ol id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#lakefs-the-object-store" id="markdown-toc-lakefs-the-object-store">lakeFS the object store</a></li>
  <li><a href="#lakefs-the-version-control-system" id="markdown-toc-lakefs-the-version-control-system">lakeFS the version control system</a>    <ol>
      <li><a href="#repository" id="markdown-toc-repository">Repository</a></li>
      <li><a href="#commits" id="markdown-toc-commits">Commits</a></li>
      <li><a href="#identifying-commits" id="markdown-toc-identifying-commits">Identifying commits</a>        <ol>
          <li><a href="#tags" id="markdown-toc-tags">Tags</a></li>
          <li><a href="#branches" id="markdown-toc-branches">Branches</a></li>
          <li><a href="#ref-expressions" id="markdown-toc-ref-expressions">Ref expressions</a></li>
        </ol>
      </li>
      <li><a href="#history" id="markdown-toc-history">History</a></li>
      <li><a href="#three-way-merge" id="markdown-toc-three-way-merge">Three way merge</a></li>
    </ol>
  </li>
  <li><a href="#concepts-unique-to-lakefs" id="markdown-toc-concepts-unique-to-lakefs">Concepts unique to lakeFS</a>    <ol>
      <li><a href="#lakefs-protocol-uris" id="markdown-toc-lakefs-protocol-uris"><code class="language-plaintext highlighter-rouge">lakefs</code> protocol URIs</a></li>
    </ol>
  </li>
</ol>

</div>
      <h2 id="introduction">
        
        
          <a href="#introduction" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction
        
        
      </h2>
    

<p>lakeFS blends concepts from object stores such as S3 with concepts from Git.  This reference
defines the common concepts of lakeFS.  Every concept appearing in <em>italic text</em> is its
definition.</p>
      <h2 id="lakefs-the-object-store">
        
        
          <a href="#lakefs-the-object-store" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> lakeFS the object store
        
        
      </h2>
    

<p>lakeFS is an object store, and borrows concepts from S3.</p>

<p>An <em>object store</em> links objects to paths.  An <em>object</em> holds:</p>

<ul>
  <li>Some <em>contents</em>, with unlimited size and format.</li>
  <li>Some <em>metadata</em>, including
    <ul>
      <li><em>size</em> in bytes</li>
      <li>the <em>creation time</em>, a timestamp with seconds resolution</li>
      <li>a <em>checksum</em> string which uniquely identifies the contents</li>
      <li>some <em>user metadata</em>, a small map of strings to strings.</li>
    </ul>
  </li>
</ul>

<p>Similarly to many object stores, lakeFS objects are immutable and never rewritten.  They can
be entirely replaced or deleted, but not modified.</p>

<p>A <em>path</em> is a readable string, typically decoded as UTF-8.  lakeFS maps paths to their objects
according to specific rules.  lakeFS paths use the <code class="language-plaintext highlighter-rouge">lakefs</code> protocol, described below.</p>
      <h2 id="lakefs-the-version-control-system">
        
        
          <a href="#lakefs-the-version-control-system" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> lakeFS the version control system
        
        
      </h2>
    

<p>lakeFS borrows its concepts for version control from Git.</p>
      <h3 id="repository">
        
        
          <a href="#repository" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Repository
        
        
      </h3>
    

<p>A <em>repository</em> is a collection of objects with common history tracking.  lakeFS manages
versions of the repository, identified by their commits.  A <em>commit</em> is a collection of object
metadata and data, including especially all paths and the object contents and metadata at that
commit.  Commits have their own <em>commit metadata</em>, which includes a textual comment and
additional user metadata.</p>
      <h3 id="commits">
        
        
          <a href="#commits" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Commits
        
        
      </h3>
    

<p>Commits are organized into a <em>history</em> using their parent commits.  Every repository has
exactly one <em>initial commit</em> with no parents.  <span style="font-size: smaller">Note that a
Git repository may have multiple initial commits.</span> A commit with more than one parent is
a <em>merge commit</em>.  <span style="font-size: smaller">Currently lakeFS only supports merge
commits with two parents.</span></p>
      <h3 id="identifying-commits">
        
        
          <a href="#identifying-commits" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Identifying commits
        
        
      </h3>
    

<p>A commit is identified by its <em>commit ID</em>, a digest of all contents of the commit.  Commit IDs
are by nature long, so a unique prefix may be used to abbreviate them (but note that short
prefixes can become non-unique as the repository grows, so prefer to avoid abbreviating when
storing commits for the long term).  A commit may also be identified by using a textual
definition, called a <em>ref</em>.  Examples of refs include tags, branches, and expressions.  The
state of the repository at any commit is always readable.</p>
      <h4 id="tags">
        
        
          <a href="#tags" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tags
        
        
      </h4>
    

<p>A <em>tag</em> is an immutable pointer to a single commit.  Tags have readable names.  Because tags
are commits, a repository can be read from any tag.  Example tags:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">v2.3</code> to mark a release</li>
  <li><code class="language-plaintext highlighter-rouge">dev:jane-before-v2.3-merge</code> to mark Jane’s private temporary point.</li>
</ul>
      <h4 id="branches">
        
        
          <a href="#branches" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Branches
        
        
      </h4>
    

<p>A <em>branch</em> is a mutable pointer to a commit and its staging area.  Repositories are readable
from any branch, but they are also <strong>writable</strong> to a branch.  The <em>staging area</em> associated
with a branch is mutable storage where objects can be created, updated or deleted.  These
objects are readable when reading from the branch.  To <strong>create</strong> a commit from a branch, all
files from the staging area are merged into the contents of the current branch, creating the
new set of objects.  The parent of the commit is the previous branch tip, and the new branch
tip is set to this new commit.  Example branches:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">main</code>, the trunk</li>
  <li><code class="language-plaintext highlighter-rouge">staging</code>, maybe ahead of <code class="language-plaintext highlighter-rouge">main</code></li>
  <li><code class="language-plaintext highlighter-rouge">dev:joe-bugfix-1234</code> for Joe to fix issue 1234.</li>
</ul>
      <h4 id="ref-expressions">
        
        
          <a href="#ref-expressions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ref expressions
        
        
      </h4>
    

<p>lakeFS also supports <em>expressions</em> for creating a ref.  These are similar to <a href="https://git-scm.com/docs/gitrevisions#_specifying_revisions">revisions in
Git</a>; indeed all <code class="language-plaintext highlighter-rouge">~</code> and <code class="language-plaintext highlighter-rouge">^</code>
examples at the end of that section will work unchanged in lakeFS.</p>

<ul>
  <li>A branch or a tag are ref expressions.</li>
  <li>If <code class="language-plaintext highlighter-rouge">&lt;ref&gt;</code> is a ref expression, then:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">&lt;ref&gt;^</code> is a ref expression referring to its first parent.</li>
      <li><code class="language-plaintext highlighter-rouge">&lt;ref&gt;^N</code> is a ref expression referring to its N’th parent; in particular <code class="language-plaintext highlighter-rouge">&lt;ref&gt;^1</code> is the
same as <code class="language-plaintext highlighter-rouge">&lt;ref&gt;^</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">&lt;ref&gt;~</code> is a ref expression referring to its first parent; in particular <code class="language-plaintext highlighter-rouge">&lt;ref&gt;~</code> is the
same as <code class="language-plaintext highlighter-rouge">&lt;ref&gt;^</code> and <code class="language-plaintext highlighter-rouge">&lt;ref&gt;~</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">&lt;ref&gt;~N</code> is a ref expression referring to its N’th parent, always traversing to the first
parent.  So <code class="language-plaintext highlighter-rouge">&lt;ref&gt;~N</code> is the same as <code class="language-plaintext highlighter-rouge">&lt;ref&gt;^^...^</code> with N consecutive carets <code class="language-plaintext highlighter-rouge">^</code>.</li>
    </ul>
  </li>
</ul>
      <h3 id="history">
        
        
          <a href="#history" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> History
        
        
      </h3>
    

<p>The <em>history</em> of the branch is the list of commits from the branch tip through the first
parent of each commit.  Histories go back in time.</p>

<p>The other way to create a commit is to merge an existing commit onto a branch.  To <em>merge</em> a
source commit into a branch, lakeFS finds the <em>best</em> common ancestor of that source commit and
the branch tip, called the “base”.  Then it performs a <a href="#three-way-merge">3-way merge</a>.  The
“best” ancestor is exactly that defined in the documentation for
<a href="https://git-scm.com/docs/git-merge-base#_description">git-merge-base</a>.  The result of a merge
is a new commit, with the destination as the first parent and the source as the second.  Thus
the previous tip of the merge destination is part of the history of the merged object.</p>
      <h3 id="three-way-merge">
        
        
          <a href="#three-way-merge" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Three way merge
        
        
      </h3>
    

<p>To merge a <em>merge source</em> (a commit) into a <em>merge destination</em> (another commit), lakeFS first
finds the <em>merge base</em>, the nearest common parent of the two commits.  It can now perform a
three-way merge, by examining the presence and identity of files in each commit.  In the table
below, “A”, “B” and “C” are possible file contents, “X” is a missing file, and “conflict”
(which only appears as a result) is a merge failure.</p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th style="text-align: center"><strong>In base</strong></th>
      <th style="text-align: center"><strong>In source</strong></th>
      <th style="text-align: center"><strong>In destination</strong></th>
      <th style="text-align: center"><strong>Result</strong></th>
      <th style="text-align: left"><strong>Comment</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">A</td>
      <td style="text-align: center">A</td>
      <td style="text-align: center">A</td>
      <td style="text-align: left">Unchanged file</td>
    </tr>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">B</td>
      <td style="text-align: center">B</td>
      <td style="text-align: center">B</td>
      <td style="text-align: left">Files changed on both sides in same way</td>
    </tr>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">B</td>
      <td style="text-align: center">C</td>
      <td style="text-align: center">conflict</td>
      <td style="text-align: left">Files changed on both sides differently</td>
    </tr>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">A</td>
      <td style="text-align: center">B</td>
      <td style="text-align: center">B</td>
      <td style="text-align: left">File changed only on one branch</td>
    </tr>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">B</td>
      <td style="text-align: center">A</td>
      <td style="text-align: center">B</td>
      <td style="text-align: left">File changed only on one branch</td>
    </tr>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">X</td>
      <td style="text-align: center">X</td>
      <td style="text-align: center">X</td>
      <td style="text-align: left">Files deleted on both sides</td>
    </tr>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">B</td>
      <td style="text-align: center">X</td>
      <td style="text-align: center">conflict</td>
      <td style="text-align: left">File changed on one side, deleted on the other</td>
    </tr>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">X</td>
      <td style="text-align: center">B</td>
      <td style="text-align: center">conflict</td>
      <td style="text-align: left">File changed on one side, deleted on the other</td>
    </tr>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">A</td>
      <td style="text-align: center">X</td>
      <td style="text-align: center">X</td>
      <td style="text-align: left">File deleted on one side</td>
    </tr>
    <tr>
      <td style="text-align: center">A</td>
      <td style="text-align: center">X</td>
      <td style="text-align: center">A</td>
      <td style="text-align: center">X</td>
      <td style="text-align: left">File deleted on one side</td>
    </tr>
  </tbody>
</table></div>

<p>As a format-agnostic system, lakeFS currently merges by complete files.  Format-specific and
other user-defined merge strategies for handling conflicts are on the roadmap.</p>
      <h2 id="concepts-unique-to-lakefs">
        
        
          <a href="#concepts-unique-to-lakefs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Concepts unique to lakeFS
        
        
      </h2>
    

<p><em>Underlying storage</em> is the area on some other object store that lakeFS uses to store object
contents and some of its metadata.  We sometimes refer to underlying storage as <em>physical</em>.
The path used to store the contents of an object is then termed a <em>physical path</em>.  The object
itself on underlying storage is never modified, except to remove it entirely during some
cleanups.</p>

<p>When creating a lakeFS repository, you assign it with a <em>storage namespace</em>. The repository’s
storage namespace is the prefix in the underlying storage where data for this repository
will be stored.</p>

<p>A lot of what lakeFS does is to manage how lakeFS paths translate to <em>physical paths</em> on the
object store.  This mapping is generally <strong>not</strong> straightforward.  Importantly (and unlike
many object stores), lakeFS may map multiple paths to the same object on backing storage, and
always does this for objects that are unchanged across versions.</p>
      <h3 id="lakefs-protocol-uris">
        
        
          <a href="#lakefs-protocol-uris" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">lakefs</code> protocol URIs
        
        
      </h3>
    

<p>lakeFS uses a specific format for path URIs.  The URI <code class="language-plaintext highlighter-rouge">lakefs://&lt;REPO&gt;/&lt;REF&gt;/&lt;KEY&gt;</code> is a path
to objects in the given repo and ref expression under key.  This is used both for path
prefixes and for full paths.  In similar fashion, <code class="language-plaintext highlighter-rouge">lakefs://&lt;REPO&gt;/&lt;REF&gt;</code> identifies the
repository at a ref expression, and <code class="language-plaintext highlighter-rouge">lakefs://&lt;REPO&gt;</code> identifes a repo.</p>

                

                


            </div>
        </div>

        
        

        <div class="search-overlay"></div>
        
    </div>
</div>

<footer>
    <div class="footer-sidebar"></div>
    <div class="footer-main">
        <div class="row">
            <a href="https://lakefs.io" class="site-title lh-tight">
                <div class="site-logo"></div>
            </a>
        </div>
        <div class="row">
            <div class="left">
                <ul class="footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs.lakefs.io/" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            Docs
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/blog/" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            Blog
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            GitHub
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/community/" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            Community
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/cloud-registration/" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            lakeFS Cloud
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/contact-us/" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            Contact
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
            <div class="right">
                <ul class="footer-social">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/youtube" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            <img src="/v0.1/assets/icons/youtube.svg" class="no-hover" />
                            <img src="/v0.1/assets/icons/youtube-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://www.linkedin.com/company/treeverse" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            <img src="/v0.1/assets/icons/linkedin.svg" class="no-hover" />
                            <img src="/v0.1/assets/icons/linkedin-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            <img src="/v0.1/assets/icons/github.svg" class="no-hover" />
                            <img src="/v0.1/assets/icons/github-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://twitter.com/lakeFS" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            <img src="/v0.1/assets/icons/twitter.svg" class="no-hover" />
                            <img src="/v0.1/assets/icons/twitter-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/slack" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            <img src="/v0.1/assets/icons/slack.svg" class="no-hover" />
                            <img src="/v0.1/assets/icons/slack-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row top-border">
            <div class="left"><a href="/v0.1https://www.treeverse.io/">
                    <div class="other-logo"><img src="/v0.1/assets/by-treeverse.png" /></div>
                </a></div>
            <div class="right">
                <ul class="bottom-footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/terms-of-use/" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            Terms of use
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/privacy-policy/" class="site-button"  target="_blank"
                            rel="noopener noreferrer" >
                            Privacy Policy
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
    </div>
</footer>


</body>

</html>

