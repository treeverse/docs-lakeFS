
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lua Hooks reference">
      
      
      
        <link rel="canonical" href="https://docs.lakefs.io/dev/howto/hooks/lua/">
      
      
        <link rel="prev" href="../airflow/">
      
      
        <link rel="next" href="../webhooks/">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Lua Hooks - lakeFS Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/overrides.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lua-hooks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://lakefs.io" title="lakeFS Documentation" class="md-header__button md-logo" aria-label="lakeFS Documentation" data-md-component="logo">
      
  <img src="../../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            lakeFS Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lua Hooks
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/treeverse/lakeFS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    treeverse/lakeFS
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://lakefs.io" title="lakeFS Documentation" class="md-nav__button md-logo" aria-label="lakeFS Documentation" data-md-component="logo">
      
  <img src="../../../assets/logo.svg" alt="logo">

    </a>
    lakeFS Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/treeverse/lakeFS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    treeverse/lakeFS
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to lakeFS
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Quickstart
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/launch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1️⃣ Run lakeFS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/query/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2️⃣ Query the data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/branch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3️⃣ Create a branch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/commit-and-merge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4️⃣ Commit and Merge
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/rollback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5️⃣ Roll back Changes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/actions-and-hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6️⃣ Using Actions and Hooks in lakeFS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/work-with-data-locally/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7️⃣ Work with lakeFS data locally
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/learning-more-lakefs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Learn more about lakeFS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How-To
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-To
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Install lakeFS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Install lakeFS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/azure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Azure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/gcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GCP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/onprem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    On-Premises
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade lakeFS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Actions and Hooks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Actions and Hooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../airflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Airflow Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Lua Hooks
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Lua Hooks
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#action-file-lua-hook-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Action File Lua Hook Properties
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-lua-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      Example Lua Hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lua-library-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Lua Library reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lua Library reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arraytable" class="md-nav__link">
    <span class="md-ellipsis">
      array(table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    <span class="md-ellipsis">
      aws
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_client" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientget_objectbucket-key" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.get_object(bucket, key)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientput_objectbucket-key-value" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.put_object(bucket, key, value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientdelete_objectbucket-key" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.delete_object(bucket [, key])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientlist_objectsbucket-prefix-continuation_token-delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.list_objects(bucket [, prefix, continuation_token, delimiter])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientdelete_recursivebucket-prefix" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.delete_recursive(bucket, prefix)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsglue" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsgluecreate_databasedatabase-options" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.create_database(database, options)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsgluedelete_databasedatabase-catalog_id" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.delete_database(database, catalog_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsglueget_tabledatabase-table-catalog_id" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.get_table(database, table [, catalog_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsgluecreate_tabledatabase-table_input-catalog_id" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.create_table(database, table_input, [, catalog_id])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsglueupdate_tabledatabase-table_input-catalog_id-version_id-skip_archive" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.update_table(database, table_input, [, catalog_id, version_id, skip_archive])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsgluedelete_tabledatabase-table_input-catalog_id" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.delete_table(database, table_input, [, catalog_id])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure" class="md-nav__link">
    <span class="md-ellipsis">
      azure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureblob_client" class="md-nav__link">
    <span class="md-ellipsis">
      azure/blob_client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureblob_clientget_objectpath_uri" class="md-nav__link">
    <span class="md-ellipsis">
      azure/blob_client.get_object(path_uri)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureblob_clientput_objectpath_uri-value" class="md-nav__link">
    <span class="md-ellipsis">
      azure/blob_client.put_object(path_uri, value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureblob_clientdelete_objectpath_uri" class="md-nav__link">
    <span class="md-ellipsis">
      azure/blob_client.delete_object(path_uri)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureabfss_transform_pathpath" class="md-nav__link">
    <span class="md-ellipsis">
      azure/abfss_transform_path(path)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto" class="md-nav__link">
    <span class="md-ellipsis">
      crypto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptoaesencryptcbckey-plaintext" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/aes/encryptCBC(key, plaintext)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptoaesdecryptcbckey-ciphertext" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/aes/decryptCBC(key, ciphertext)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptohmacsign_sha256message-key" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/hmac/sign_sha256(message, key)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptohmacsign_sha1message-key" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/hmac/sign_sha1(message, key)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptomd5digestdata" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/md5/digest(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptosha256digestdata" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/sha256/digest(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#databricksclientdatabricks_host-databricks_service_principal_token" class="md-nav__link">
    <span class="md-ellipsis">
      databricks/client(databricks_host, databricks_service_principal_token)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#databricksclientcreate_schemaschema_name-catalog_name-get_if_exists" class="md-nav__link">
    <span class="md-ellipsis">
      databricks/client.create_schema(schema_name, catalog_name, get_if_exists)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#databricksclientexecute_statementstatement-warehouse_id-catalog_name-schema_name" class="md-nav__link">
    <span class="md-ellipsis">
      databricks/client.execute_statement(statement, warehouse_id, catalog_name, schema_name)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#databricksclientregister_external_tabletable_name-physical_path-warehouse_id-catalog_name-schema_name-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      databricks/client.register_external_table(table_name, physical_path, warehouse_id, catalog_name, schema_name, metadata)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingbase64encodedata" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/base64/encode(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingbase64decodedata" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/base64/decode(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingbase64url_encodedata" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/base64/url_encode(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingbase64url_decodedata" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/base64/url_decode(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodinghexencodevalue" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/hex/encode(value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodinghexdecodevalue" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/hex/decode(value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingjsonmarshaltable" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/json/marshal(table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingjsonunmarshalstring" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/json/unmarshal(string)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingyamlmarshaltable" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/yaml/marshal(table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingyamlunmarshalstring" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/yaml/unmarshal(string)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingparquetget_schemapayload" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/parquet/get_schema(payload)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formats" class="md-nav__link">
    <span class="md-ellipsis">
      formats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatsdelta_clientkey-secret-region" class="md-nav__link">
    <span class="md-ellipsis">
      formats/delta_client(key, secret, region)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatsdelta_clientget_tablerepository_id-reference_id-prefix" class="md-nav__link">
    <span class="md-ellipsis">
      formats/delta_client.get_table(repository_id, reference_id, prefix)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcloud" class="md-nav__link">
    <span class="md-ellipsis">
      gcloud
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcloudgs_clientgcs_credentials_json_string" class="md-nav__link">
    <span class="md-ellipsis">
      gcloud/gs_client(gcs_credentials_json_string)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcloudgswrite_fuse_symlinksource-destination-mount_info" class="md-nav__link">
    <span class="md-ellipsis">
      gcloud/gs.write_fuse_symlink(source, destination, mount_info)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hook" class="md-nav__link">
    <span class="md-ellipsis">
      hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hookfailmessage" class="md-nav__link">
    <span class="md-ellipsis">
      hook/fail(message)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefs" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscreate_tagrepository_id-reference_id-tag_id" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/create_tag(repository_id, reference_id, tag_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsdiff_refsrepository_id-left_reference_id-right_reference_id-after-prefix-delimiter-amount" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/diff_refs(repository_id, left_reference_id, right_reference_id [, after, prefix, delimiter, amount])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefslist_objectsrepository_id-reference_id-after-prefix-delimiter-amount" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/list_objects(repository_id, reference_id [, after, prefix, delimiter, amount])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsget_objectrepository_id-reference_id-path" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/get_object(repository_id, reference_id, path)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsdiff_branchrepository_id-branch_id-after-amount-prefix-delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/diff_branch(repository_id, branch_id [, after, amount, prefix, delimiter])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsstat_objectrepository_id-ref_id-path-user_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/stat_object(repository_id, ref_id, path[, user_metadata])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsupdate_object_user_metadatarepository_id-branch_id-path-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/update_object_user_metadata(repository_id, branch_id, path, metadata)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportglue_exporterget_full_table_namedescriptor-action_info" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/glue_exporter.get_full_table_name(descriptor, action_info)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportdelta_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/delta_exporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportdelta_exporterexport_delta_logaction-table_def_names-write_object-delta_client-table_descriptors_path-path_transformer" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/delta_exporter.export_delta_log(action, table_def_names, write_object, delta_client, table_descriptors_path, path_transformer)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportdelta_exporterchanged_table_defstable_def_names-table_descriptors_path-repository_id-ref-compare_ref" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/delta_exporter.changed_table_defs(table_def_names, table_descriptors_path, repository_id, ref, compare_ref)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexporttable_extractor" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/table_extractor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexporttable_extractorlist_table_descriptor_entriesclient-repo_id-commit_id" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/table_extractor.list_table_descriptor_entries(client, repo_id, commit_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexporttable_extractorget_table_descriptorclient-repo_id-ref-logical_path" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/table_extractor.get_table_descriptor(client, repo_id, ref, logical_path)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexporthiveextract_partition_pagerclient-repo_id-commit_id-base_path-partition_cols-page_size" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/hive.extract_partition_pager(client, repo_id, commit_id, base_path, partition_cols, page_size)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportsymlink_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/symlink_exporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportsymlink_exporterexport_s3s3_client-table_src_path-action_info-options" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/symlink_exporter.export_s3(s3_client, table_src_path, action_info [, options])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportglue_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/glue_exporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportglue_exporterexport_glueglue-db-table_src_path-create_table_input-action_info-options" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/glue_exporter.export_glue(glue, db, table_src_path, create_table_input, action_info, options)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportglue_exporterget_full_table_namedescriptor-action_info_1" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/glue_exporter.get_full_table_name(descriptor, action_info)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportunity_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/unity_exporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportunity_exporterregister_tablesaction-table_descriptors_path-delta_table_details-databricks_client-warehouse_id" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/unity_exporter.register_tables(action, table_descriptors_path, delta_table_details, databricks_client, warehouse_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathparsepath_string" class="md-nav__link">
    <span class="md-ellipsis">
      path/parse(path_string)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathjoinpath_parts" class="md-nav__link">
    <span class="md-ellipsis">
      path/join(*path_parts)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathis_hiddenpath_string-seperator-prefix" class="md-nav__link">
    <span class="md-ellipsis">
      path/is_hidden(path_string [, seperator, prefix])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathdefault_separator" class="md-nav__link">
    <span class="md-ellipsis">
      path/default_separator()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpmatchpattern-s" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/match(pattern, s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpquote_metas" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/quote_meta(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompilepattern" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compile(pattern)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompiled_patternfind_alls-n" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compiled_pattern.find_all(s, n)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompiled_patternfind_all_submatchs-n" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compiled_pattern.find_all_submatch(s, n)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompiled_patternfinds" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compiled_pattern.find(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompiled_patternfind_submatchs" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compiled_pattern.find_submatch(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringssplits-sep" class="md-nav__link">
    <span class="md-ellipsis">
      strings/split(s, sep)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringstrims" class="md-nav__link">
    <span class="md-ellipsis">
      strings/trim(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringsreplaces-old-new-n" class="md-nav__link">
    <span class="md-ellipsis">
      strings/replace(s, old, new, n)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringshas_prefixs-prefix" class="md-nav__link">
    <span class="md-ellipsis">
      strings/has_prefix(s, prefix)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringshas_suffixs-suffix" class="md-nav__link">
    <span class="md-ellipsis">
      strings/has_suffix(s, suffix)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringscontainss-substr" class="md-nav__link">
    <span class="md-ellipsis">
      strings/contains(s, substr)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timenow" class="md-nav__link">
    <span class="md-ellipsis">
      time/now()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeformatepoch_nano-layout-zone" class="md-nav__link">
    <span class="md-ellipsis">
      time/format(epoch_nano, layout, zone)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeformat_isoepoch_nano-zone" class="md-nav__link">
    <span class="md-ellipsis">
      time/format_iso(epoch_nano, zone)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timesleepduration_ns" class="md-nav__link">
    <span class="md-ellipsis">
      time/sleep(duration_ns)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timesinceepoch_nano" class="md-nav__link">
    <span class="md-ellipsis">
      time/since(epoch_nano)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeaddepoch_time-duration_table" class="md-nav__link">
    <span class="md-ellipsis">
      time/add(epoch_time, duration_table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeparselayout-value" class="md-nav__link">
    <span class="md-ellipsis">
      time/parse(layout, value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeparse_isovalue" class="md-nav__link">
    <span class="md-ellipsis">
      time/parse_iso(value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uuidnew" class="md-nav__link">
    <span class="md-ellipsis">
      uuid/new()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neturl" class="md-nav__link">
    <span class="md-ellipsis">
      net/url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nethttp-optional" class="md-nav__link">
    <span class="md-ellipsis">
      net/http (optional)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../webhooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Webhooks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backup-and-restore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup and Restore Repository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protect-branches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Branch Protection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../copying/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Copying data to/from lakeFS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../catalog_exports/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Catalogs Exports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../export/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Export Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Garbage Collection
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Garbage Collection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../garbage-collection/gc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Garbage Collection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../garbage-collection/managed-gc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managed Garbage Collection
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../garbage-collection/standalone-gc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Standalone Garbage Collection
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../import/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Import Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrate-away/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrating away from lakeFS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mirroring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mirroring
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiple-storage-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multiple Storage Backend
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../private-link/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Private Link
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pull-requests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pull Requests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual-host-addressing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    S3 Virtual-host addressing (advanced)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sizing-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sizing Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System for Cross-domain Identity Management (SCIM)
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-checkouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Work with lakeFS data locally
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Integrations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/aws_cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/airbyte/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Airbyte
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/athena/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amazon Athena
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/sagemaker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amazon SageMaker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/airflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apache Airflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/hive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apache Hive
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apache Iceberg
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apache Kafka
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apache Spark
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/cloudera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloudera
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/databricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Databricks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/delta/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delta Lake
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/dremio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dremio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/duckdb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DuckDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/glue_hive_metastore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glue / Hive metastore
    
  </span>
  
    
  
  
    <span class="md-status md-status--deprecated" title="Deprecated Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/glue_metastore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glue Data Catalog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/huggingface_datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HuggingFace Datasets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/kubeflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubeflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/mlflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MLflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/presto_trino/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Presto / Trino
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/r/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    R
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/red_hat_openshift_ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Red Hat OpenShift AI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/unity-catalog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unity Catalog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/vertex_ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vertex AI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Understanding lakeFS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Understanding lakeFS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concepts and  Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data Lifecycle Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Data Lifecycle Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/data_lifecycle_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/data_lifecycle_management/ci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    During Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/data_lifecycle_management/production/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    In Production
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/data_lifecycle_management/data-devenv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    In Test
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/data-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How lakeFS Works
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            How lakeFS Works
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/how/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/how/kv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Internal database structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/how/merge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Merge
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/how/versioning-internals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Versioning Internals
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/performance-best-practices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Performance Best Practices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Use Cases
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            Use Cases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/use_cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/use_cases/cicd_for_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CI/CD for Data Lakes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/use_cases/etl_testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ETL Testing Environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/use_cases/reproducibility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reproducibility
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../understand/use_cases/rollback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rollback
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Mount
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Mount
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mount/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mount-csi-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mount CSI Driver
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mount-write-mode-semantics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mount Write Mode Semantics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/auditing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Auditing
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/monitor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monitoring using Prometheus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/s3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    S3 Gateway API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/spark-client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spark Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lakeFS API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lakeFS Server Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lakectl (lakeFS command-line tool)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    The lakeFS Project
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            The lakeFS Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing to lakeFS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/code-migrate-1.0-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrating to 1.0
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lakeFS Cloud
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    lakeFS Enterprise
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            lakeFS Enterprise
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../enterprise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Get Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            Get Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../enterprise/getstarted/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../enterprise/getstarted/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../enterprise/getstarted/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../enterprise/getstarted/migrate-from-oss/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrate from lakeFS OSS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../enterprise/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../enterprise/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting lakeFS Enterprise
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../enterprise/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../enterprise/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/ACL-server-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACL Server Implementation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/access-control-lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Access Control Lists (ACLs)
    
  </span>
  
    
  
  
    <span class="md-status md-status--deprecated" title="Deprecated Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/authorization-yaml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authorization API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/external-principals-aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Login to lakeFS with AWS IAM Roles
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/presigned-url/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Presigned URLs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/remote-authenticator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote Authenticator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/rbac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Role-Based Access Control (RBAC)
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/sts-login/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Short-lived token (STS like) Authentication for lakeFS
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/sso/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Single Sign On (SSO)
    
  </span>
  
    
  
  
    <span class="md-status md-status--enterprise" title="Enterprise Feature">
    </span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#action-file-lua-hook-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Action File Lua Hook Properties
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-lua-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      Example Lua Hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lua-library-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Lua Library reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lua Library reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arraytable" class="md-nav__link">
    <span class="md-ellipsis">
      array(table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    <span class="md-ellipsis">
      aws
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_client" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientget_objectbucket-key" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.get_object(bucket, key)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientput_objectbucket-key-value" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.put_object(bucket, key, value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientdelete_objectbucket-key" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.delete_object(bucket [, key])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientlist_objectsbucket-prefix-continuation_token-delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.list_objects(bucket [, prefix, continuation_token, delimiter])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awss3_clientdelete_recursivebucket-prefix" class="md-nav__link">
    <span class="md-ellipsis">
      aws/s3_client.delete_recursive(bucket, prefix)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsglue" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsgluecreate_databasedatabase-options" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.create_database(database, options)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsgluedelete_databasedatabase-catalog_id" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.delete_database(database, catalog_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsglueget_tabledatabase-table-catalog_id" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.get_table(database, table [, catalog_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsgluecreate_tabledatabase-table_input-catalog_id" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.create_table(database, table_input, [, catalog_id])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsglueupdate_tabledatabase-table_input-catalog_id-version_id-skip_archive" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.update_table(database, table_input, [, catalog_id, version_id, skip_archive])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsgluedelete_tabledatabase-table_input-catalog_id" class="md-nav__link">
    <span class="md-ellipsis">
      aws/glue.delete_table(database, table_input, [, catalog_id])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure" class="md-nav__link">
    <span class="md-ellipsis">
      azure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureblob_client" class="md-nav__link">
    <span class="md-ellipsis">
      azure/blob_client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureblob_clientget_objectpath_uri" class="md-nav__link">
    <span class="md-ellipsis">
      azure/blob_client.get_object(path_uri)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureblob_clientput_objectpath_uri-value" class="md-nav__link">
    <span class="md-ellipsis">
      azure/blob_client.put_object(path_uri, value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureblob_clientdelete_objectpath_uri" class="md-nav__link">
    <span class="md-ellipsis">
      azure/blob_client.delete_object(path_uri)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureabfss_transform_pathpath" class="md-nav__link">
    <span class="md-ellipsis">
      azure/abfss_transform_path(path)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto" class="md-nav__link">
    <span class="md-ellipsis">
      crypto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptoaesencryptcbckey-plaintext" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/aes/encryptCBC(key, plaintext)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptoaesdecryptcbckey-ciphertext" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/aes/decryptCBC(key, ciphertext)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptohmacsign_sha256message-key" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/hmac/sign_sha256(message, key)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptohmacsign_sha1message-key" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/hmac/sign_sha1(message, key)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptomd5digestdata" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/md5/digest(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cryptosha256digestdata" class="md-nav__link">
    <span class="md-ellipsis">
      crypto/sha256/digest(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#databricksclientdatabricks_host-databricks_service_principal_token" class="md-nav__link">
    <span class="md-ellipsis">
      databricks/client(databricks_host, databricks_service_principal_token)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#databricksclientcreate_schemaschema_name-catalog_name-get_if_exists" class="md-nav__link">
    <span class="md-ellipsis">
      databricks/client.create_schema(schema_name, catalog_name, get_if_exists)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#databricksclientexecute_statementstatement-warehouse_id-catalog_name-schema_name" class="md-nav__link">
    <span class="md-ellipsis">
      databricks/client.execute_statement(statement, warehouse_id, catalog_name, schema_name)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#databricksclientregister_external_tabletable_name-physical_path-warehouse_id-catalog_name-schema_name-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      databricks/client.register_external_table(table_name, physical_path, warehouse_id, catalog_name, schema_name, metadata)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingbase64encodedata" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/base64/encode(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingbase64decodedata" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/base64/decode(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingbase64url_encodedata" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/base64/url_encode(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingbase64url_decodedata" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/base64/url_decode(data)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodinghexencodevalue" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/hex/encode(value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodinghexdecodevalue" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/hex/decode(value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingjsonmarshaltable" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/json/marshal(table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingjsonunmarshalstring" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/json/unmarshal(string)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingyamlmarshaltable" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/yaml/marshal(table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingyamlunmarshalstring" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/yaml/unmarshal(string)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingparquetget_schemapayload" class="md-nav__link">
    <span class="md-ellipsis">
      encoding/parquet/get_schema(payload)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formats" class="md-nav__link">
    <span class="md-ellipsis">
      formats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatsdelta_clientkey-secret-region" class="md-nav__link">
    <span class="md-ellipsis">
      formats/delta_client(key, secret, region)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatsdelta_clientget_tablerepository_id-reference_id-prefix" class="md-nav__link">
    <span class="md-ellipsis">
      formats/delta_client.get_table(repository_id, reference_id, prefix)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcloud" class="md-nav__link">
    <span class="md-ellipsis">
      gcloud
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcloudgs_clientgcs_credentials_json_string" class="md-nav__link">
    <span class="md-ellipsis">
      gcloud/gs_client(gcs_credentials_json_string)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcloudgswrite_fuse_symlinksource-destination-mount_info" class="md-nav__link">
    <span class="md-ellipsis">
      gcloud/gs.write_fuse_symlink(source, destination, mount_info)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hook" class="md-nav__link">
    <span class="md-ellipsis">
      hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hookfailmessage" class="md-nav__link">
    <span class="md-ellipsis">
      hook/fail(message)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefs" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscreate_tagrepository_id-reference_id-tag_id" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/create_tag(repository_id, reference_id, tag_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsdiff_refsrepository_id-left_reference_id-right_reference_id-after-prefix-delimiter-amount" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/diff_refs(repository_id, left_reference_id, right_reference_id [, after, prefix, delimiter, amount])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefslist_objectsrepository_id-reference_id-after-prefix-delimiter-amount" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/list_objects(repository_id, reference_id [, after, prefix, delimiter, amount])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsget_objectrepository_id-reference_id-path" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/get_object(repository_id, reference_id, path)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsdiff_branchrepository_id-branch_id-after-amount-prefix-delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/diff_branch(repository_id, branch_id [, after, amount, prefix, delimiter])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsstat_objectrepository_id-ref_id-path-user_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/stat_object(repository_id, ref_id, path[, user_metadata])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefsupdate_object_user_metadatarepository_id-branch_id-path-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/update_object_user_metadata(repository_id, branch_id, path, metadata)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportglue_exporterget_full_table_namedescriptor-action_info" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/glue_exporter.get_full_table_name(descriptor, action_info)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportdelta_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/delta_exporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportdelta_exporterexport_delta_logaction-table_def_names-write_object-delta_client-table_descriptors_path-path_transformer" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/delta_exporter.export_delta_log(action, table_def_names, write_object, delta_client, table_descriptors_path, path_transformer)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportdelta_exporterchanged_table_defstable_def_names-table_descriptors_path-repository_id-ref-compare_ref" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/delta_exporter.changed_table_defs(table_def_names, table_descriptors_path, repository_id, ref, compare_ref)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexporttable_extractor" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/table_extractor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexporttable_extractorlist_table_descriptor_entriesclient-repo_id-commit_id" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/table_extractor.list_table_descriptor_entries(client, repo_id, commit_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexporttable_extractorget_table_descriptorclient-repo_id-ref-logical_path" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/table_extractor.get_table_descriptor(client, repo_id, ref, logical_path)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexporthiveextract_partition_pagerclient-repo_id-commit_id-base_path-partition_cols-page_size" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/hive.extract_partition_pager(client, repo_id, commit_id, base_path, partition_cols, page_size)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportsymlink_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/symlink_exporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportsymlink_exporterexport_s3s3_client-table_src_path-action_info-options" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/symlink_exporter.export_s3(s3_client, table_src_path, action_info [, options])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportglue_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/glue_exporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportglue_exporterexport_glueglue-db-table_src_path-create_table_input-action_info-options" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/glue_exporter.export_glue(glue, db, table_src_path, create_table_input, action_info, options)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportglue_exporterget_full_table_namedescriptor-action_info_1" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/glue_exporter.get_full_table_name(descriptor, action_info)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportunity_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/unity_exporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lakefscatalogexportunity_exporterregister_tablesaction-table_descriptors_path-delta_table_details-databricks_client-warehouse_id" class="md-nav__link">
    <span class="md-ellipsis">
      lakefs/catalogexport/unity_exporter.register_tables(action, table_descriptors_path, delta_table_details, databricks_client, warehouse_id)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathparsepath_string" class="md-nav__link">
    <span class="md-ellipsis">
      path/parse(path_string)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathjoinpath_parts" class="md-nav__link">
    <span class="md-ellipsis">
      path/join(*path_parts)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathis_hiddenpath_string-seperator-prefix" class="md-nav__link">
    <span class="md-ellipsis">
      path/is_hidden(path_string [, seperator, prefix])
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathdefault_separator" class="md-nav__link">
    <span class="md-ellipsis">
      path/default_separator()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpmatchpattern-s" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/match(pattern, s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpquote_metas" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/quote_meta(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompilepattern" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compile(pattern)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompiled_patternfind_alls-n" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compiled_pattern.find_all(s, n)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompiled_patternfind_all_submatchs-n" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compiled_pattern.find_all_submatch(s, n)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompiled_patternfinds" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compiled_pattern.find(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexpcompiled_patternfind_submatchs" class="md-nav__link">
    <span class="md-ellipsis">
      regexp/compiled_pattern.find_submatch(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringssplits-sep" class="md-nav__link">
    <span class="md-ellipsis">
      strings/split(s, sep)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringstrims" class="md-nav__link">
    <span class="md-ellipsis">
      strings/trim(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringsreplaces-old-new-n" class="md-nav__link">
    <span class="md-ellipsis">
      strings/replace(s, old, new, n)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringshas_prefixs-prefix" class="md-nav__link">
    <span class="md-ellipsis">
      strings/has_prefix(s, prefix)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringshas_suffixs-suffix" class="md-nav__link">
    <span class="md-ellipsis">
      strings/has_suffix(s, suffix)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stringscontainss-substr" class="md-nav__link">
    <span class="md-ellipsis">
      strings/contains(s, substr)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timenow" class="md-nav__link">
    <span class="md-ellipsis">
      time/now()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeformatepoch_nano-layout-zone" class="md-nav__link">
    <span class="md-ellipsis">
      time/format(epoch_nano, layout, zone)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeformat_isoepoch_nano-zone" class="md-nav__link">
    <span class="md-ellipsis">
      time/format_iso(epoch_nano, zone)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timesleepduration_ns" class="md-nav__link">
    <span class="md-ellipsis">
      time/sleep(duration_ns)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timesinceepoch_nano" class="md-nav__link">
    <span class="md-ellipsis">
      time/since(epoch_nano)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeaddepoch_time-duration_table" class="md-nav__link">
    <span class="md-ellipsis">
      time/add(epoch_time, duration_table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeparselayout-value" class="md-nav__link">
    <span class="md-ellipsis">
      time/parse(layout, value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeparse_isovalue" class="md-nav__link">
    <span class="md-ellipsis">
      time/parse_iso(value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uuidnew" class="md-nav__link">
    <span class="md-ellipsis">
      uuid/new()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neturl" class="md-nav__link">
    <span class="md-ellipsis">
      net/url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nethttp-optional" class="md-nav__link">
    <span class="md-ellipsis">
      net/http (optional)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="lua-hooks">Lua Hooks<a class="headerlink" href="#lua-hooks" title="Permanent link">&para;</a></h1>
<p>lakeFS supports running hooks without relying on external components using an <a href="https://github.com/Shopify/go-lua">embedded Lua VM</a></p>
<p>Using Lua hooks, it is possible to pass a Lua script to be executed directly by the lakeFS server when an action occurs.</p>
<p>The Lua runtime embedded in lakeFS is limited for security reasons. It provides a narrow set of APIs and functions that by default do not allow:</p>
<ol>
<li>Accessing any of the running lakeFS server's environment</li>
<li>Accessing the local filesystem available the lakeFS process</li>
</ol>
<h2 id="action-file-lua-hook-properties">Action File Lua Hook Properties<a class="headerlink" href="#action-file-lua-hook-properties" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>See the <a href="../#action-files">Action configuration</a> for overall configuration schema and details.</p>
</div>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Data Type</th>
<th>Required</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>args</code></td>
<td>One or more arguments to pass to the hook</td>
<td>Dictionary</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td><code>script</code></td>
<td>An inline Lua script</td>
<td>String</td>
<td>either this or <code>script_path</code> must be specified</td>
<td></td>
</tr>
<tr>
<td><code>script_path</code></td>
<td>The path in lakeFS to a Lua script</td>
<td>String</td>
<td>either this or <code>script</code> must be specified</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="example-lua-hooks">Example Lua Hooks<a class="headerlink" href="#example-lua-hooks" title="Permanent link">&para;</a></h2>
<p>For more examples and configuration samples, check out the <a href="https://github.com/treeverse/lakeFS/tree/master/examples/hooks">examples/hooks/</a> directory in the lakeFS repository. You'll also find step-by-step examples of hooks in action in the <a href="https://github.com/treeverse/lakeFS-samples/">lakeFS samples repository</a>.</p>
<div class="admonition example">
<p class="admonition-title">Display information about an event</p>
<p>This example will print out a JSON representation of the event that occurred:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dump_all</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">on</span><span class="p">:</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">post-commit</span><span class="p">:</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">post-merge</span><span class="p">:</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="nt">post-create-tag</span><span class="p">:</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="nt">post-create-branch</span><span class="p">:</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="nt">hooks</span><span class="p">:</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dump_event</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lua</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="nt">properties</span><span class="p">:</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">      </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">        </span><span class="no">json = require(&quot;encoding/json&quot;)</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">        </span><span class="no">print(json.marshal(action))</span>
</span></code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Ensure that a commit includes a mandatory metadata field</p>
<p>A more useful example: ensure every commit contains a required metadata field:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pre commit metadata field check</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">on</span><span class="p">:</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">pre-commit</span><span class="p">:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="nt">hooks</span><span class="p">:</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ensure_commit_metadata</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lua</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="nt">properties</span><span class="p">:</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">      </span><span class="nt">args</span><span class="p">:</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">        </span><span class="nt">notebook_url</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;pattern&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;my-jupyter.example.com/.*&quot;</span><span class="p p-Indicator">}</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">        </span><span class="nt">spark_version</span><span class="p">:</span><span class="w">  </span><span class="p p-Indicator">{}</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">      </span><span class="nt">script_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lua_hooks/ensure_metadata_field.lua</span>
</span></code></pre></div>
<p>Lua code at <code>lakefs://repo/main/lua_hooks/ensure_metadata_field.lua</code>:</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nv">regexp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;regexp&quot;</span><span class="p">)</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kr">for</span><span class="w"> </span><span class="nv">k</span><span class="p">,</span><span class="w"> </span><span class="nv">props</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">args</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nv">current_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">action</span><span class="p">.</span><span class="py">commit</span><span class="p">.</span><span class="py">metadata</span><span class="p">[</span><span class="nv">k</span><span class="p">]</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="nv">current_value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="nb">error</span><span class="p">(</span><span class="s2">&quot;missing mandatory metadata field: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">k</span><span class="p">)</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="kr">end</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="nv">props</span><span class="p">.</span><span class="py">pattern</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">regexp</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="nv">props</span><span class="p">.</span><span class="py">pattern</span><span class="p">,</span><span class="w"> </span><span class="nv">current_value</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="nb">error</span><span class="p">(</span><span class="s2">&quot;current value for commit metadata field &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">k</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; does not match pattern: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">props</span><span class="p">.</span><span class="py">pattern</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; - got: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">current_value</span><span class="p">)</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">  </span><span class="kr">end</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="kr">end</span>
</span></code></pre></div>
</div>
<p>For more examples and configuration samples, check out the <a href="https://github.com/treeverse/lakeFS/tree/master/examples/hooks">examples/hooks/</a> directory in the lakeFS repository.</p>
<h2 id="lua-library-reference">Lua Library reference<a class="headerlink" href="#lua-library-reference" title="Permanent link">&para;</a></h2>
<p>The Lua runtime embedded in lakeFS is limited for security reasons. The provided APIs are shown below.</p>
<h3 id="arraytable"><code>array(table)</code><a class="headerlink" href="#arraytable" title="Permanent link">&para;</a></h3>
<p>Helper function to mark a table object as an array for the runtime by setting <code>_is_array: true</code> metatable field.</p>
<h3 id="aws"><code>aws</code><a class="headerlink" href="#aws" title="Permanent link">&para;</a></h3>
<h3 id="awss3_client"><code>aws/s3_client</code><a class="headerlink" href="#awss3_client" title="Permanent link">&para;</a></h3>
<p>S3 client library.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;aws&quot;</span><span class="p">)</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c1">-- pass valid AWS credentials</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws</span><span class="p">.</span><span class="nf">s3_client</span><span class="p">(</span><span class="s2">&quot;ACCESS_KEY_ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;SECRET_ACCESS_KEY&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;REGION&quot;</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="awss3_clientget_objectbucket-key"><code>aws/s3_client.get_object(bucket, key)</code><a class="headerlink" href="#awss3_clientget_objectbucket-key" title="Permanent link">&para;</a></h3>
<p>Returns the body (as a Lua string) of the requested object and a boolean value that is true if the requested object exists</p>
<h3 id="awss3_clientput_objectbucket-key-value"><code>aws/s3_client.put_object(bucket, key, value)</code><a class="headerlink" href="#awss3_clientput_objectbucket-key-value" title="Permanent link">&para;</a></h3>
<p>Sets the object at the given bucket and key to the value of the supplied value string</p>
<h3 id="awss3_clientdelete_objectbucket-key"><code>aws/s3_client.delete_object(bucket [, key])</code><a class="headerlink" href="#awss3_clientdelete_objectbucket-key" title="Permanent link">&para;</a></h3>
<p>Deletes the object at the given key</p>
<h3 id="awss3_clientlist_objectsbucket-prefix-continuation_token-delimiter"><code>aws/s3_client.list_objects(bucket [, prefix, continuation_token, delimiter])</code><a class="headerlink" href="#awss3_clientlist_objectsbucket-prefix-continuation_token-delimiter" title="Permanent link">&para;</a></h3>
<p>Returns a table of results containing the following structure:</p>
<ul>
<li><code>is_truncated</code>: (boolean) whether there are more results to paginate through using the continuation token</li>
<li><code>next_continuation_token</code>: (string) to pass in the next request to get the next page of results</li>
<li><code>results</code> (table of tables) information about the objects (and prefixes if a delimiter is used)</li>
</ul>
<p>a result could in one of the following structures</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">{</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">   </span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;a/common/prefix/&quot;</span><span class="p">,</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">   </span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;prefix&quot;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="p">}</span>
</span></code></pre></div>
<p>or:</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p">{</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">   </span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;path/to/object&quot;</span><span class="p">,</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">   </span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">   </span><span class="p">[</span><span class="s2">&quot;etag&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;etagString&quot;</span><span class="p">,</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">   </span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">   </span><span class="p">[</span><span class="s2">&quot;last_modified&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2023-12-31T23:10:00Z&quot;</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="awss3_clientdelete_recursivebucket-prefix"><code>aws/s3_client.delete_recursive(bucket, prefix)</code><a class="headerlink" href="#awss3_clientdelete_recursivebucket-prefix" title="Permanent link">&para;</a></h3>
<p>Deletes all objects under the given prefix</p>
<h3 id="awsglue"><code>aws/glue</code><a class="headerlink" href="#awsglue" title="Permanent link">&para;</a></h3>
<p>Glue client library.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;aws&quot;</span><span class="p">)</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1">-- pass valid AWS credentials</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">glue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws</span><span class="p">.</span><span class="nf">glue_client</span><span class="p">(</span><span class="s2">&quot;ACCESS_KEY_ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;SECRET_ACCESS_KEY&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;REGION&quot;</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="awsgluecreate_databasedatabase-options"><code>aws/glue.create_database(database, options)</code><a class="headerlink" href="#awsgluecreate_databasedatabase-options" title="Permanent link">&para;</a></h3>
<p>Create a new Database in Glue Catalog.</p>
<p>Parameters:</p>
<ul>
<li><code>database(string)</code>: Glue Database name.</li>
<li><code>options(table)</code> (optional):</li>
<li><code>error_on_already_exists(boolean)</code>: Whether the call fail with an error if a DB with this name already exists</li>
<li><code>create_db_input(Table)</code>: a Table that is passed "as is" to AWS and is parallel to the AWS SDK <a href="https://docs.aws.amazon.com/glue/latest/webapi/API_CreateDatabase.html#API_CreateDatabase_RequestSyntax">CreateDatabaseInput</a></li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="nv">error_on_already_exists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="nv">create_db_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">DatabaseInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">Description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Created via LakeFS Action&quot;</span><span class="p">},</span><span class="w"> </span><span class="nv">Tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">Owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Joe&quot;</span><span class="p">}}</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="p">}</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="nv">glue</span><span class="p">.</span><span class="nf">create_database</span><span class="p">(</span><span class="nv">db</span><span class="p">,</span><span class="w"> </span><span class="nv">opts</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="awsgluedelete_databasedatabase-catalog_id"><code>aws/glue.delete_database(database, catalog_id)</code><a class="headerlink" href="#awsgluedelete_databasedatabase-catalog_id" title="Permanent link">&para;</a></h3>
<p>Delete an existing Database in Glue Catalog.</p>
<p>Parameters:</p>
<ul>
<li><code>database(string)</code>: Glue Database name.</li>
<li><code>catalog_id(string)</code> (optional): Glue Catalog ID</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nv">glue</span><span class="p">.</span><span class="nf">delete_database</span><span class="p">(</span><span class="nv">db</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;461129977393&quot;</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="awsglueget_tabledatabase-table-catalog_id"><code>aws/glue.get_table(database, table [, catalog_id)</code><a class="headerlink" href="#awsglueget_tabledatabase-table-catalog_id" title="Permanent link">&para;</a></h3>
<p>Describe a table from the Glue Catalog.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">table</span><span class="p">,</span><span class="w"> </span><span class="nv">exists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">glue</span><span class="p">.</span><span class="nf">get_table</span><span class="p">(</span><span class="nv">db</span><span class="p">,</span><span class="w"> </span><span class="nv">table_name</span><span class="p">)</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kr">if</span><span class="w"> </span><span class="nv">exists</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="nv">json</span><span class="p">.</span><span class="nf">marshal</span><span class="p">(</span><span class="nv">table</span><span class="p">))</span>
</span></code></pre></div>
</div>
<h3 id="awsgluecreate_tabledatabase-table_input-catalog_id"><code>aws/glue.create_table(database, table_input, [, catalog_id])</code><a class="headerlink" href="#awsgluecreate_tabledatabase-table_input-catalog_id" title="Permanent link">&para;</a></h3>
<p>Create a new table in Glue Catalog.
The <code>table_input</code> argument is a JSON that is passed "as is" to AWS and is parallel to the AWS SDK <a href="https://docs.aws.amazon.com/glue/latest/webapi/API_CreateTable.html#API_CreateTable_RequestSyntax">TableInput</a></p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;encoding/json&quot;</span><span class="p">)</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="nv">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my-table&quot;</span><span class="p">,</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="nv">PartitionKeys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">array</span><span class="p">(</span><span class="nv">partitions</span><span class="p">),</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="c1">-- etc...</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="p">}</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="kd">local</span><span class="w"> </span><span class="nv">json_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">json</span><span class="p">.</span><span class="nf">marshal</span><span class="p">(</span><span class="nv">input</span><span class="p">)</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="nv">glue</span><span class="p">.</span><span class="nf">create_table</span><span class="p">(</span><span class="s2">&quot;my-db&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">table_input</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="awsglueupdate_tabledatabase-table_input-catalog_id-version_id-skip_archive"><code>aws/glue.update_table(database, table_input, [, catalog_id, version_id, skip_archive])</code><a class="headerlink" href="#awsglueupdate_tabledatabase-table_input-catalog_id-version_id-skip_archive" title="Permanent link">&para;</a></h3>
<p>Update an existing Table in Glue Catalog.
The <code>table_input</code> is the same as the argument in <code>glue.create_table</code> function.</p>
<h3 id="awsgluedelete_tabledatabase-table_input-catalog_id"><code>aws/glue.delete_table(database, table_input, [, catalog_id])</code><a class="headerlink" href="#awsgluedelete_tabledatabase-table_input-catalog_id" title="Permanent link">&para;</a></h3>
<p>Delete an existing Table in Glue Catalog.</p>
<h3 id="azure"><code>azure</code><a class="headerlink" href="#azure" title="Permanent link">&para;</a></h3>
<h3 id="azureblob_client"><code>azure/blob_client</code><a class="headerlink" href="#azureblob_client" title="Permanent link">&para;</a></h3>
<p>Azure blob client library.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">azure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;azure&quot;</span><span class="p">)</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="c1">-- pass valid Azure credentials</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">azure</span><span class="p">.</span><span class="nf">blob_client</span><span class="p">(</span><span class="s2">&quot;AZURE_STORAGE_ACCOUNT&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;AZURE_ACCESS_KEY&quot;</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="azureblob_clientget_objectpath_uri"><code>azure/blob_client.get_object(path_uri)</code><a class="headerlink" href="#azureblob_clientget_objectpath_uri" title="Permanent link">&para;</a></h3>
<p>Returns the body (as a Lua string) of the requested object and a boolean value that is true if the requested object exists<br />
<code>path_uri</code> - A valid Azure blob storage uri in the form of <code>https://myaccount.blob.core.windows.net/mycontainer/myblob</code></p>
<h3 id="azureblob_clientput_objectpath_uri-value"><code>azure/blob_client.put_object(path_uri, value)</code><a class="headerlink" href="#azureblob_clientput_objectpath_uri-value" title="Permanent link">&para;</a></h3>
<p>Sets the object at the given bucket and key to the value of the supplied value string<br />
<code>path_uri</code> - A valid Azure blob storage uri in the form of <code>https://myaccount.blob.core.windows.net/mycontainer/myblob</code></p>
<h3 id="azureblob_clientdelete_objectpath_uri"><code>azure/blob_client.delete_object(path_uri)</code><a class="headerlink" href="#azureblob_clientdelete_objectpath_uri" title="Permanent link">&para;</a></h3>
<p>Deletes the object at the given key<br />
<code>path_uri</code> - A valid Azure blob storage uri in the form of <code>https://myaccount.blob.core.windows.net/mycontainer/myblob</code></p>
<h3 id="azureabfss_transform_pathpath"><code>azure/abfss_transform_path(path)</code><a class="headerlink" href="#azureabfss_transform_pathpath" title="Permanent link">&para;</a></h3>
<p>Transform an HTTPS Azure URL to a ABFSS scheme. Used by the delta_exporter function to support Azure Unity catalog use cases
<code>path</code> - A valid Azure blob storage URL in the form of <code>https://myaccount.blob.core.windows.net/mycontainer/myblob</code></p>
<h3 id="crypto"><code>crypto</code><a class="headerlink" href="#crypto" title="Permanent link">&para;</a></h3>
<h3 id="cryptoaesencryptcbckey-plaintext"><code>crypto/aes/encryptCBC(key, plaintext)</code><a class="headerlink" href="#cryptoaesencryptcbckey-plaintext" title="Permanent link">&para;</a></h3>
<p>Returns a ciphertext for the aes encrypted text</p>
<h3 id="cryptoaesdecryptcbckey-ciphertext"><code>crypto/aes/decryptCBC(key, ciphertext)</code><a class="headerlink" href="#cryptoaesdecryptcbckey-ciphertext" title="Permanent link">&para;</a></h3>
<p>Returns the decrypted (plaintext) string for the encrypted ciphertext</p>
<h3 id="cryptohmacsign_sha256message-key"><code>crypto/hmac/sign_sha256(message, key)</code><a class="headerlink" href="#cryptohmacsign_sha256message-key" title="Permanent link">&para;</a></h3>
<p>Returns a SHA256 hmac signature for the given message with the supplied key (using the SHA256 hashing algorithm)</p>
<h3 id="cryptohmacsign_sha1message-key"><code>crypto/hmac/sign_sha1(message, key)</code><a class="headerlink" href="#cryptohmacsign_sha1message-key" title="Permanent link">&para;</a></h3>
<p>Returns a SHA1 hmac signature for the given message with the supplied key (using the SHA1 hashing algorithm)</p>
<h3 id="cryptomd5digestdata"><code>crypto/md5/digest(data)</code><a class="headerlink" href="#cryptomd5digestdata" title="Permanent link">&para;</a></h3>
<p>Returns the MD5 digest (string) of the given data</p>
<h3 id="cryptosha256digestdata"><code>crypto/sha256/digest(data)</code><a class="headerlink" href="#cryptosha256digestdata" title="Permanent link">&para;</a></h3>
<p>Returns the SHA256 digest (string) of the given data</p>
<h3 id="databricksclientdatabricks_host-databricks_service_principal_token"><code>databricks/client(databricks_host, databricks_service_principal_token)</code><a class="headerlink" href="#databricksclientdatabricks_host-databricks_service_principal_token" title="Permanent link">&para;</a></h3>
<p>Returns a table representing a Databricks client with the <code>register_external_table</code> and <code>create_or_get_schema</code> methods.</p>
<h3 id="databricksclientcreate_schemaschema_name-catalog_name-get_if_exists"><code>databricks/client.create_schema(schema_name, catalog_name, get_if_exists)</code><a class="headerlink" href="#databricksclientcreate_schemaschema_name-catalog_name-get_if_exists" title="Permanent link">&para;</a></h3>
<p>Creates a schema, or retrieves it if exists, in the configured Databricks host's Unity catalog.
If a schema doesn't exist, a new schema with the given <code>schema_name</code> will be created under the given <code>catalog_name</code>.
Returns the created/fetched schema name.</p>
<p>Parameters:</p>
<ul>
<li><code>schema_name(string)</code>: The required schema name</li>
<li><code>catalog_name(string)</code>: The catalog name under which the schema will be created (or from which it will be fetched)</li>
<li><code>get_if_exists(boolean)</code>: In case of failure due to an existing schema with the given <code>schema_name</code> in the given
<code>catalog_name</code>, return the schema.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">databricks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;databricks&quot;</span><span class="p">)</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">databricks</span><span class="p">.</span><span class="nf">client</span><span class="p">(</span><span class="s2">&quot;https://my-host.cloud.databricks.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;my-service-principal-token&quot;</span><span class="p">)</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">schema_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">.</span><span class="nf">create_schema</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;mycatalog&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="databricksclientexecute_statementstatement-warehouse_id-catalog_name-schema_name"><code>databricks/client.execute_statement(statement, warehouse_id, catalog_name, schema_name)</code><a class="headerlink" href="#databricksclientexecute_statementstatement-warehouse_id-catalog_name-schema_name" title="Permanent link">&para;</a></h3>
<p>Parameters:</p>
<ul>
<li><code>statement(boolean)</code>: The SQL statement to execute on the databricks table</li>
<li><code>warehouse_id(string)</code>: The SQL warehouse ID used in Databricks to run the <code>CREATE TABLE</code> query (fetched from the SQL warehouse</li>
<li><code>catalog_name(string)</code>: The catalog name under which the schema will be created (or from which it will be fetched)</li>
<li><code>schema_name(string)</code>: The required schema name
  <code>status</code>, return the SQL status i.e. SUCCEEDED or an error code/message</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">databricks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;databricks&quot;</span><span class="p">)</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">databricks</span><span class="p">.</span><span class="nf">client</span><span class="p">(</span><span class="s2">&quot;https://my-host.cloud.databricks.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;my-service-principal-token&quot;</span><span class="p">)</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">statement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ALTER TABLE &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">table_descriptor</span><span class="p">.</span><span class="py">name</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; ALTER COLUMN ID SET MASK mask_num&quot;</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="nv">databricks_client</span><span class="p">.</span><span class="nf">execute_statement</span><span class="p">(</span><span class="nv">statement</span><span class="p">,</span><span class="w"> </span><span class="nv">args</span><span class="p">.</span><span class="py">warehouse_id</span><span class="p">,</span><span class="w"> </span><span class="nv">table_descriptor</span><span class="p">.</span><span class="py">catalog</span><span class="p">,</span><span class="w"> </span><span class="nv">table_descriptor</span><span class="p">.</span><span class="py">schema</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="databricksclientregister_external_tabletable_name-physical_path-warehouse_id-catalog_name-schema_name-metadata"><code>databricks/client.register_external_table(table_name, physical_path, warehouse_id, catalog_name, schema_name, metadata)</code><a class="headerlink" href="#databricksclientregister_external_tabletable_name-physical_path-warehouse_id-catalog_name-schema_name-metadata" title="Permanent link">&para;</a></h3>
<p>Registers an external table under the provided warehouse ID, catalog name, and schema name.
In order for this method call to succeed, an external location should be configured in the catalog, with the
<code>physical_path</code>'s root storage URI (for example: <code>s3://mybucket</code>).
Returns the table's creation status.</p>
<p>Parameters:</p>
<ul>
<li><code>table_name(string)</code>: Table name.</li>
<li><code>physical_path(string)</code>: A location to which the external table will refer, e.g. <code>s3://mybucket/the/path/to/mytable</code>.</li>
<li><code>warehouse_id(string)</code>: The SQL warehouse ID used in Databricks to run the <code>CREATE TABLE</code> query (fetched from the SQL warehouse
<code>Connection Details</code>, or by running <code>databricks warehouses get</code>, choosing your SQL warehouse and fetching its ID).</li>
<li><code>catalog_name(string)</code>: The name of the catalog under which a schema will be created (or fetched from).</li>
<li><code>schema_name(string)</code>: The name of the schema under which the table will be created.</li>
<li><code>metadata(table)</code>: A table of metadata to be added to the table's registration. The metadata table should be of the form:
  <code>{key1 = "value1", key2 = "value2", ...}</code>.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">databricks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;databricks&quot;</span><span class="p">)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">databricks</span><span class="p">.</span><span class="nf">client</span><span class="p">(</span><span class="s2">&quot;https://my-host.cloud.databricks.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;my-service-principal-token&quot;</span><span class="p">)</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">.</span><span class="nf">register_external_table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;s3://mybucket/the/path/to/mytable&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;examwarehouseple&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;my-catalog-name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;myschema&quot;</span><span class="p">)</span>
</span></code></pre></div>
</div>
<ul>
<li>For the Databricks permissions needed to run this method, check out the <a href="../../../integrations/unity-catalog/">Unity Catalog Exporter</a> docs.</li>
</ul>
<h3 id="encodingbase64encodedata"><code>encoding/base64/encode(data)</code><a class="headerlink" href="#encodingbase64encodedata" title="Permanent link">&para;</a></h3>
<p>Encodes the given data to a base64 string</p>
<h3 id="encodingbase64decodedata"><code>encoding/base64/decode(data)</code><a class="headerlink" href="#encodingbase64decodedata" title="Permanent link">&para;</a></h3>
<p>Decodes the given base64 encoded data and return it as a string</p>
<h3 id="encodingbase64url_encodedata"><code>encoding/base64/url_encode(data)</code><a class="headerlink" href="#encodingbase64url_encodedata" title="Permanent link">&para;</a></h3>
<p>Encodes the given data to an unpadded alternate base64 encoding defined in RFC 4648.</p>
<h3 id="encodingbase64url_decodedata"><code>encoding/base64/url_decode(data)</code><a class="headerlink" href="#encodingbase64url_decodedata" title="Permanent link">&para;</a></h3>
<p>Decodes the given unpadded alternate base64 encoding defined in RFC 4648 and return it as a string</p>
<h3 id="encodinghexencodevalue"><code>encoding/hex/encode(value)</code><a class="headerlink" href="#encodinghexencodevalue" title="Permanent link">&para;</a></h3>
<p>Encode the given value string to hexadecimal values (string)</p>
<h3 id="encodinghexdecodevalue"><code>encoding/hex/decode(value)</code><a class="headerlink" href="#encodinghexdecodevalue" title="Permanent link">&para;</a></h3>
<p>Decode the given hexadecimal string back to the string it represents (UTF-8)</p>
<h3 id="encodingjsonmarshaltable"><code>encoding/json/marshal(table)</code><a class="headerlink" href="#encodingjsonmarshaltable" title="Permanent link">&para;</a></h3>
<p>Encodes the given table into a JSON string</p>
<h3 id="encodingjsonunmarshalstring"><code>encoding/json/unmarshal(string)</code><a class="headerlink" href="#encodingjsonunmarshalstring" title="Permanent link">&para;</a></h3>
<p>Decodes the given string into the equivalent Lua structure</p>
<h3 id="encodingyamlmarshaltable"><code>encoding/yaml/marshal(table)</code><a class="headerlink" href="#encodingyamlmarshaltable" title="Permanent link">&para;</a></h3>
<p>Encodes the given table into a YAML string</p>
<h3 id="encodingyamlunmarshalstring"><code>encoding/yaml/unmarshal(string)</code><a class="headerlink" href="#encodingyamlunmarshalstring" title="Permanent link">&para;</a></h3>
<p>Decodes the given YAML encoded string into the equivalent Lua structure</p>
<h3 id="encodingparquetget_schemapayload"><code>encoding/parquet/get_schema(payload)</code><a class="headerlink" href="#encodingparquetget_schemapayload" title="Permanent link">&para;</a></h3>
<p>Read the payload (string) as the contents of a Parquet file and return its schema in the following table structure:</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="p">{</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;column_a&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;INT32&quot;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;column_b&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;BYTE_ARRAY&quot;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="formats"><code>formats</code><a class="headerlink" href="#formats" title="Permanent link">&para;</a></h3>
<h3 id="formatsdelta_clientkey-secret-region"><code>formats/delta_client(key, secret, region)</code><a class="headerlink" href="#formatsdelta_clientkey-secret-region" title="Permanent link">&para;</a></h3>
<p>Creates a new Delta Lake client used to interact with the lakeFS server.
* <code>key</code>: lakeFS access key id
* <code>secret</code>: lakeFS secret access key
* <code>region</code>: The region in which your lakeFS server is configured at.</p>
<h3 id="formatsdelta_clientget_tablerepository_id-reference_id-prefix"><code>formats/delta_client.get_table(repository_id, reference_id, prefix)</code><a class="headerlink" href="#formatsdelta_clientget_tablerepository_id-reference_id-prefix" title="Permanent link">&para;</a></h3>
<p>Returns a representation of a Delta Lake table under the given repository, reference, and prefix.
The format of the response is two tables:</p>
<ol>
<li>the first is a table of the format <code>{number, {string}}</code> where <code>number</code> is a version in the Delta Log, and the mapped <code>{string}</code>
array contains JSON strings of the different Delta Lake log operations listed in the mapped version entry. e.g.:</li>
</ol>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="p">{</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">commitInfo</span><span class="se">\&quot;</span><span class="s2">:...}&quot;</span><span class="p">,</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">add</span><span class="se">\&quot;</span><span class="s2">: ...}&quot;</span><span class="p">,</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">remove</span><span class="se">\&quot;</span><span class="s2">: ...}&quot;</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">    </span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">commitInfo</span><span class="se">\&quot;</span><span class="s2">:...}&quot;</span><span class="p">,</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">    </span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">add</span><span class="se">\&quot;</span><span class="s2">: ...}&quot;</span><span class="p">,</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">    </span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">remove</span><span class="se">\&quot;</span><span class="s2">: ...}&quot;</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>the second is a table of the metadata of the current table snapshot. The metadata table can be used to initialize the Delta Lake table in an external Catalog.<br />
It consists of the following fields:<ul>
<li><code>id</code>: The table's ID</li>
<li><code>name</code>: The table's name</li>
<li><code>description</code>: The table's description</li>
<li><code>schema_string</code>: The table's schema string</li>
<li><code>partition_columns</code>: The table's partition columns</li>
<li><code>configuration</code>: The table's configuration</li>
<li><code>created_time</code>: The table's creation time</li>
</ul>
</li>
</ol>
<h3 id="gcloud"><code>gcloud</code><a class="headerlink" href="#gcloud" title="Permanent link">&para;</a></h3>
<h3 id="gcloudgs_clientgcs_credentials_json_string"><code>gcloud/gs_client(gcs_credentials_json_string)</code><a class="headerlink" href="#gcloudgs_clientgcs_credentials_json_string" title="Permanent link">&para;</a></h3>
<p>Create a new Google Cloud Storage client using a string that contains a valid <a href="https://developers.google.com/workspace/guides/create-credentials"><code>credentials.json</code></a> file content.</p>
<h3 id="gcloudgswrite_fuse_symlinksource-destination-mount_info"><code>gcloud/gs.write_fuse_symlink(source, destination, mount_info)</code><a class="headerlink" href="#gcloudgswrite_fuse_symlinksource-destination-mount_info" title="Permanent link">&para;</a></h3>
<p>Will create a <a href="https://github.com/GoogleCloudPlatform/gcsfuse/blob/master/docs/semantics.md#symlink-inodes">gcsfuse symlink</a>
from the source (typically a lakeFS physical address for an object) to a given destination.</p>
<p><code>mount_info</code> is a Lua table with <code>"from"</code> and <code>"to"</code> keys - since symlinks don't work for <code>gs://...</code> URIs, they need to point
to the mounted location instead. <code>from</code> will be removed from the beginning of <code>source</code>, and <code>destination</code> will be added instead.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nv">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;gs://bucket/lakefs/data/abc/def&quot;</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nv">destination</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;gs://bucket/exported/path/to/object&quot;</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nv">mount_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;from&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;gs://bucket&quot;</span><span class="p">,</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;to&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/home/user/gcs-mount&quot;</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="p">}</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="nv">gs</span><span class="p">.</span><span class="nf">write_fuse_symlink</span><span class="p">(</span><span class="nv">source</span><span class="p">,</span><span class="w"> </span><span class="nv">destination</span><span class="p">,</span><span class="w"> </span><span class="nv">mount_info</span><span class="p">)</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="c1">-- Symlink: &quot;/home/user/gcs-mount/exported/path/to/object&quot; -&gt; &quot;/home/user/gcs-mount/lakefs/data/abc/def&quot;</span>
</span></code></pre></div>
</div>
<h3 id="hook"><code>hook</code><a class="headerlink" href="#hook" title="Permanent link">&para;</a></h3>
<p>A set of utilities to aide in writing user friendly hooks.</p>
<h3 id="hookfailmessage"><code>hook/fail(message)</code><a class="headerlink" href="#hookfailmessage" title="Permanent link">&para;</a></h3>
<p>Will abort the current hook's execution with the given message. This is similar to using <code>error()</code>, but is typically used to separate
generic runtime errors (an API call that returned an unexpected response) and explicit failure of the calling hook.</p>
<p>When called, errors will appear without a stack-trace, and the error message will be directly the one given as <code>message</code>.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">hook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;hook&quot;</span><span class="p">)</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">hook</span><span class="p">.</span><span class="nf">fail</span><span class="p">(</span><span class="s2">&quot;this hook shall not pass because of: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">reason</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="lakefs"><code>lakefs</code><a class="headerlink" href="#lakefs" title="Permanent link">&para;</a></h3>
<p>The Lua Hook library allows calling back to the lakeFS API using the identity of the user that triggered the action.
For example, if user A tries to commit and triggers a <code>pre-commit</code> hook - any call made inside that hook to the lakeFS
API, will automatically use user A's identity for authorization and auditing purposes.</p>
<h3 id="lakefscreate_tagrepository_id-reference_id-tag_id"><code>lakefs/create_tag(repository_id, reference_id, tag_id)</code><a class="headerlink" href="#lakefscreate_tagrepository_id-reference_id-tag_id" title="Permanent link">&para;</a></h3>
<p>Create a new tag for the given reference</p>
<h3 id="lakefsdiff_refsrepository_id-left_reference_id-right_reference_id-after-prefix-delimiter-amount"><code>lakefs/diff_refs(repository_id, left_reference_id, right_reference_id [, after, prefix, delimiter, amount])</code><a class="headerlink" href="#lakefsdiff_refsrepository_id-left_reference_id-right_reference_id-after-prefix-delimiter-amount" title="Permanent link">&para;</a></h3>
<p>Returns an object-wise diff between <code>left_reference_id</code> and <code>right_reference_id</code>.</p>
<h3 id="lakefslist_objectsrepository_id-reference_id-after-prefix-delimiter-amount"><code>lakefs/list_objects(repository_id, reference_id [, after, prefix, delimiter, amount])</code><a class="headerlink" href="#lakefslist_objectsrepository_id-reference_id-after-prefix-delimiter-amount" title="Permanent link">&para;</a></h3>
<p>List objects in the specified repository and reference (branch, tag, commit ID, etc.).
If delimiter is empty, will default to a recursive listing. Otherwise, common prefixes up to <code>delimiter</code> will be shown as a single entry.</p>
<h3 id="lakefsget_objectrepository_id-reference_id-path"><code>lakefs/get_object(repository_id, reference_id, path)</code><a class="headerlink" href="#lakefsget_objectrepository_id-reference_id-path" title="Permanent link">&para;</a></h3>
<p>Returns 2 values:</p>
<ol>
<li>The HTTP status code returned by the lakeFS API</li>
<li>The content of the specified object as a Lua string</li>
</ol>
<h3 id="lakefsdiff_branchrepository_id-branch_id-after-amount-prefix-delimiter"><code>lakefs/diff_branch(repository_id, branch_id [, after, amount, prefix, delimiter])</code><a class="headerlink" href="#lakefsdiff_branchrepository_id-branch_id-after-amount-prefix-delimiter" title="Permanent link">&para;</a></h3>
<p>Returns an object-wise diff of uncommitted changes on <code>branch_id</code>.</p>
<h3 id="lakefsstat_objectrepository_id-ref_id-path-user_metadata"><code>lakefs/stat_object(repository_id, ref_id, path[, user_metadata])</code><a class="headerlink" href="#lakefsstat_objectrepository_id-ref_id-path-user_metadata" title="Permanent link">&para;</a></h3>
<p>Returns a stat object for the given path under the given reference and repository.
Returns 2 values:</p>
<ol>
<li>The HTTP status code returned by the lakeFS API</li>
<li>The stat response object as a JSON string</li>
</ol>
<p>Parameters:</p>
<ul>
<li><code>repository_id</code>: The repository ID</li>
<li><code>ref_id</code>: The reference to stat from (branch, tag, commit ID)</li>
<li><code>path</code>: Path to the object to stat</li>
<li><code>user_metadata</code>: (Optional) Boolean flag to include user metadata in response</li>
</ul>
<h3 id="lakefsupdate_object_user_metadatarepository_id-branch_id-path-metadata"><code>lakefs/update_object_user_metadata(repository_id, branch_id, path, metadata)</code><a class="headerlink" href="#lakefsupdate_object_user_metadatarepository_id-branch_id-path-metadata" title="Permanent link">&para;</a></h3>
<p>Update user metadata for an object.</p>
<p>Parameters:</p>
<ul>
<li><code>repository_id</code>: The repository ID</li>
<li><code>branch_id</code>: The branch containing the object</li>
<li><code>path</code>: Path to the object to update</li>
<li><code>metadata</code>: A table containing key-value pairs to set as user metadata</li>
</ul>
<p>Returns 2 values:</p>
<ol>
<li>The HTTP status code returned by the lakeFS API (204 on success)</li>
<li>Empty on success, error on failure</li>
</ol>
<h3 id="lakefscatalogexportglue_exporterget_full_table_namedescriptor-action_info"><code>lakefs/catalogexport/glue_exporter.get_full_table_name(descriptor, action_info)</code><a class="headerlink" href="#lakefscatalogexportglue_exporterget_full_table_namedescriptor-action_info" title="Permanent link">&para;</a></h3>
<p>Generate glue table name.</p>
<p>Parameters:</p>
<ul>
<li><code>descriptor(Table)</code>: Object from (e.g. _lakefs_tables/my_table.yaml).</li>
<li><code>action_info(Table)</code>: The global action object.</li>
</ul>
<h3 id="lakefscatalogexportdelta_exporter"><code>lakefs/catalogexport/delta_exporter</code><a class="headerlink" href="#lakefscatalogexportdelta_exporter" title="Permanent link">&para;</a></h3>
<p>A package used to export Delta Lake tables from lakeFS to an external cloud storage.</p>
<h3 id="lakefscatalogexportdelta_exporterexport_delta_logaction-table_def_names-write_object-delta_client-table_descriptors_path-path_transformer"><code>lakefs/catalogexport/delta_exporter.export_delta_log(action, table_def_names, write_object, delta_client, table_descriptors_path, path_transformer)</code><a class="headerlink" href="#lakefscatalogexportdelta_exporterexport_delta_logaction-table_def_names-write_object-delta_client-table_descriptors_path-path_transformer" title="Permanent link">&para;</a></h3>
<p>The function used to export Delta Lake tables.
The return value is a table with mapping of table names to external table location (from which it is possible to query the data) and latest Delta table version's metadata.<br />
The response is of the form:
<code>{&lt;table_name&gt; = {path = "s3://mybucket/mypath/mytable", metadata = {id = "table_id", name = "table_name", ...}}}</code>.</p>
<p>Parameters:</p>
<ul>
<li><code>action</code>: The global action object</li>
<li><code>table_def_names</code>: Delta tables name list (e.g. <code>{"table1", "table2"}</code>)</li>
<li><code>write_object</code>: A writer function with <code>function(bucket, key, data)</code> signature, used to write the exported Delta Log (e.g. <code>aws/s3_client.put_object</code> or <code>azure/blob_client.put_object</code>)</li>
<li><code>delta_client</code>: A Delta Lake client that implements <code>get_table: function(repo, ref, prefix)</code></li>
<li><code>table_descriptors_path</code>: The path under which the table descriptors of the provided <code>table_def_names</code> reside</li>
<li><code>path_transformer</code>: (Optional) A function(path) used for transforming the path of the saved delta logs path fields as well as the saved table physical path (used to support Azure Unity catalog use cases)</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Delta export example for AWS S3</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nn">---</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delta_exporter</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nt">on</span><span class="p">:</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="nt">post-commit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="nt">hooks</span><span class="p">:</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delta_export</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lua</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">    </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">        </span><span class="no">local aws = require(&quot;aws&quot;)</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">        </span><span class="no">local formats = require(&quot;formats&quot;)</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="w">        </span><span class="no">local delta_exporter = require(&quot;lakefs/catalogexport/delta_exporter&quot;)</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="w">        </span><span class="no">local json = require(&quot;encoding/json&quot;)</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="w">        </span><span class="no">local table_descriptors_path = &quot;_lakefs_tables&quot;</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w">        </span><span class="no">local sc = aws.s3_client(args.aws.access_key_id, args.aws.secret_access_key, args.aws.region)</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">        </span><span class="no">local delta_client = formats.delta_client(args.lakefs.access_key_id, args.lakefs.secret_access_key, args.aws.region)</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="w">        </span><span class="no">local delta_table_details = delta_export.export_delta_log(action, args.table_defs, sc.put_object, delta_client, table_descriptors_path)</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="w">        </span><span class="no">for t, details in pairs(delta_table_details) do</span>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a><span class="w">        </span><span class="no">print(&quot;Delta Lake exported table \&quot;&quot; .. t .. &quot;\&quot;&#39;s location: &quot; .. details[&quot;path&quot;] .. &quot;\n&quot;)</span>
</span><span id="__span-19-22"><a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="w">        </span><span class="no">print(&quot;Delta Lake exported table \&quot;&quot; .. t .. &quot;\&quot;&#39;s metadata:\n&quot;)</span>
</span><span id="__span-19-23"><a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a><span class="w">        </span><span class="no">for k, v in pairs(details[&quot;metadata&quot;]) do</span>
</span><span id="__span-19-24"><a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="w">            </span><span class="no">if type(v) == &quot;table&quot; then</span>
</span><span id="__span-19-25"><a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a><span class="w">            </span><span class="no">print(&quot;\t&quot; .. k .. &quot; = &quot; .. json.marshal(v) .. &quot;\n&quot;)</span>
</span><span id="__span-19-26"><a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a><span class="w">            </span><span class="no">else</span>
</span><span id="__span-19-27"><a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a><span class="w">            </span><span class="no">print(&quot;\t&quot; .. k .. &quot; = &quot; .. v .. &quot;\n&quot;)</span>
</span><span id="__span-19-28"><a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a><span class="w">            </span><span class="no">end</span>
</span><span id="__span-19-29"><a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a><span class="w">        </span><span class="no">end</span>
</span><span id="__span-19-30"><a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a><span class="w">        </span><span class="no">end</span>
</span><span id="__span-19-31"><a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a><span class="w">    </span><span class="nt">args</span><span class="p">:</span>
</span><span id="__span-19-32"><a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a><span class="w">        </span><span class="nt">aws</span><span class="p">:</span>
</span><span id="__span-19-33"><a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a><span class="w">        </span><span class="nt">access_key_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;AWS_ACCESS_KEY_ID&gt;</span>
</span><span id="__span-19-34"><a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a><span class="w">        </span><span class="nt">secret_access_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;AWS_SECRET_ACCESS_KEY&gt;</span>
</span><span id="__span-19-35"><a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a><span class="w">        </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-east-1</span>
</span><span id="__span-19-36"><a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a><span class="w">        </span><span class="nt">lakefs</span><span class="p">:</span>
</span><span id="__span-19-37"><a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a><span class="w">        </span><span class="nt">access_key_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;LAKEFS_ACCESS_KEY_ID&gt;</span><span class="w"> </span>
</span><span id="__span-19-38"><a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a><span class="w">        </span><span class="nt">secret_access_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;LAKEFS_SECRET_ACCESS_KEY&gt;</span>
</span><span id="__span-19-39"><a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a><span class="w">        </span><span class="nt">table_defs</span><span class="p">:</span>
</span><span id="__span-19-40"><a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mytable</span>
</span></code></pre></div>
<p>For the table descriptor under the <code>_lakefs_tables/mytable.yaml</code>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nn">---</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myTableActualName</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delta</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a/path/to/my/delta/table</span>
</span></code></pre></div>
<p>Delta export example for Azure Blob Storage:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Delta Exporter</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="nt">on</span><span class="p">:</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="nt">post-commit</span><span class="p">:</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;{%</span><span class="nv"> </span><span class="s">raw</span><span class="nv"> </span><span class="s">%}{{</span><span class="nv"> </span><span class="s">.Branch</span><span class="nv"> </span><span class="s">}}{%</span><span class="nv"> </span><span class="s">endraw</span><span class="nv"> </span><span class="s">%}*&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="nt">hooks</span><span class="p">:</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delta_exporter</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lua</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">    </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">        </span><span class="no">local azure = require(&quot;azure&quot;)</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="w">        </span><span class="no">local formats = require(&quot;formats&quot;)</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">        </span><span class="no">local delta_exporter = require(&quot;lakefs/catalogexport/delta_exporter&quot;)</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="w">        </span><span class="no">local table_descriptors_path = &quot;_lakefs_tables&quot;</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="w">        </span><span class="no">local sc = azure.blob_client(args.azure.storage_account, args.azure.access_key)</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="w">        </span><span class="no">local function write_object(_, key, buf)</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="w">        </span><span class="no">return sc.put_object(key,buf)</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="w">        </span><span class="no">end</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="w">        </span><span class="no">local delta_client = formats.delta_client(args.lakefs.access_key_id, args.lakefs.secret_access_key)</span>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a><span class="w">        </span><span class="no">local delta_table_details = delta_export.export_delta_log(action, args.table_defs, sc.put_object, delta_client, table_descriptors_path)</span>
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>
</span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a><span class="w">        </span><span class="no">for t, details in pairs(delta_table_details) do</span>
</span><span id="__span-21-23"><a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a><span class="w">        </span><span class="no">print(&quot;Delta Lake exported table \&quot;&quot; .. t .. &quot;\&quot;&#39;s location: &quot; .. details[&quot;path&quot;] .. &quot;\n&quot;)</span>
</span><span id="__span-21-24"><a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a><span class="w">        </span><span class="no">print(&quot;Delta Lake exported table \&quot;&quot; .. t .. &quot;\&quot;&#39;s metadata:\n&quot;)</span>
</span><span id="__span-21-25"><a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a><span class="w">        </span><span class="no">for k, v in pairs(details[&quot;metadata&quot;]) do</span>
</span><span id="__span-21-26"><a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a><span class="w">            </span><span class="no">if type(v) == &quot;table&quot; then</span>
</span><span id="__span-21-27"><a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a><span class="w">            </span><span class="no">print(&quot;\t&quot; .. k .. &quot; = &quot; .. json.marshal(v) .. &quot;\n&quot;)</span>
</span><span id="__span-21-28"><a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a><span class="w">            </span><span class="no">else</span>
</span><span id="__span-21-29"><a id="__codelineno-21-29" name="__codelineno-21-29" href="#__codelineno-21-29"></a><span class="w">            </span><span class="no">print(&quot;\t&quot; .. k .. &quot; = &quot; .. v .. &quot;\n&quot;)</span>
</span><span id="__span-21-30"><a id="__codelineno-21-30" name="__codelineno-21-30" href="#__codelineno-21-30"></a><span class="w">            </span><span class="no">end</span>
</span><span id="__span-21-31"><a id="__codelineno-21-31" name="__codelineno-21-31" href="#__codelineno-21-31"></a><span class="w">        </span><span class="no">end</span>
</span><span id="__span-21-32"><a id="__codelineno-21-32" name="__codelineno-21-32" href="#__codelineno-21-32"></a><span class="w">        </span><span class="no">end</span>
</span><span id="__span-21-33"><a id="__codelineno-21-33" name="__codelineno-21-33" href="#__codelineno-21-33"></a><span class="w">    </span><span class="nt">args</span><span class="p">:</span>
</span><span id="__span-21-34"><a id="__codelineno-21-34" name="__codelineno-21-34" href="#__codelineno-21-34"></a><span class="w">        </span><span class="nt">azure</span><span class="p">:</span>
</span><span id="__span-21-35"><a id="__codelineno-21-35" name="__codelineno-21-35" href="#__codelineno-21-35"></a><span class="w">        </span><span class="nt">storage_account</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{%</span><span class="nv"> </span><span class="s">raw</span><span class="nv"> </span><span class="s">%}{{</span><span class="nv"> </span><span class="s">.AzureStorageAccount</span><span class="nv"> </span><span class="s">}}{%</span><span class="nv"> </span><span class="s">endraw</span><span class="nv"> </span><span class="s">%}&quot;</span>
</span><span id="__span-21-36"><a id="__codelineno-21-36" name="__codelineno-21-36" href="#__codelineno-21-36"></a><span class="w">        </span><span class="nt">access_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{%</span><span class="nv"> </span><span class="s">raw</span><span class="nv"> </span><span class="s">%}{{</span><span class="nv"> </span><span class="s">.AzureAccessKey</span><span class="nv"> </span><span class="s">}}{%</span><span class="nv"> </span><span class="s">endraw</span><span class="nv"> </span><span class="s">%}&quot;</span>
</span><span id="__span-21-37"><a id="__codelineno-21-37" name="__codelineno-21-37" href="#__codelineno-21-37"></a><span class="w">        </span><span class="nt">lakefs</span><span class="p">:</span><span class="w"> </span><span class="c1"># provide credentials of a user that has access to the script and Delta Table</span>
</span><span id="__span-21-38"><a id="__codelineno-21-38" name="__codelineno-21-38" href="#__codelineno-21-38"></a><span class="w">        </span><span class="nt">access_key_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{%</span><span class="nv"> </span><span class="s">raw</span><span class="nv"> </span><span class="s">%}{{</span><span class="nv"> </span><span class="s">.LakeFSAccessKeyID</span><span class="nv"> </span><span class="s">}}{%</span><span class="nv"> </span><span class="s">endraw</span><span class="nv"> </span><span class="s">%}&quot;</span>
</span><span id="__span-21-39"><a id="__codelineno-21-39" name="__codelineno-21-39" href="#__codelineno-21-39"></a><span class="w">        </span><span class="nt">secret_access_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{%</span><span class="nv"> </span><span class="s">raw</span><span class="nv"> </span><span class="s">%}{{</span><span class="nv"> </span><span class="s">.LakeFSSecretAccessKey</span><span class="nv"> </span><span class="s">}}{%</span><span class="nv"> </span><span class="s">endraw</span><span class="nv"> </span><span class="s">%}&quot;</span>
</span><span id="__span-21-40"><a id="__codelineno-21-40" name="__codelineno-21-40" href="#__codelineno-21-40"></a><span class="w">        </span><span class="nt">table_defs</span><span class="p">:</span>
</span><span id="__span-21-41"><a id="__codelineno-21-41" name="__codelineno-21-41" href="#__codelineno-21-41"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mytable</span>
</span></code></pre></div>
</div>
<h3 id="lakefscatalogexportdelta_exporterchanged_table_defstable_def_names-table_descriptors_path-repository_id-ref-compare_ref"><code>lakefs/catalogexport/delta_exporter.changed_table_defs(table_def_names, table_descriptors_path, repository_id, ref, compare_ref)</code><a class="headerlink" href="#lakefscatalogexportdelta_exporterchanged_table_defstable_def_names-table_descriptors_path-repository_id-ref-compare_ref" title="Permanent link">&para;</a></h3>
<p>Utility function to filter list of table defs based on those that have changed. Returns the subset of the tables in the table_def_names parameter that have changed.</p>
<p>Parameters:</p>
<ul>
<li><code>table_def_names(table of strings)</code>: List of table names to filter based on the diff</li>
<li><code>table_descriptors_path(string)</code>: The path under which the table descriptors of the provided <code>table_def_names</code> reside</li>
<li><code>repository_id(string)</code>: The repository ID</li>
<li><code>ref(string)</code>: base reference pointing at a specific version of the data i.e. a branch, commit ID, or tag</li>
<li><code>compare_ref(string)</code>: compared-to reference for the diff to determine which tables changed</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">delta_export</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;lakefs/catalogexport/delta_exporter&quot;</span><span class="p">)</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">action</span><span class="p">.</span><span class="py">commit</span><span class="p">.</span><span class="py">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">compare_ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">action</span><span class="p">.</span><span class="py">commit_id</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="kd">local</span><span class="w"> </span><span class="nv">changed_table_defs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">delta_export</span><span class="p">.</span><span class="nf">changed_table_defs</span><span class="p">(</span><span class="nv">args</span><span class="p">.</span><span class="py">table_defs</span><span class="p">,</span><span class="w"> </span><span class="nv">args</span><span class="p">.</span><span class="py">table_descriptors_path</span><span class="p">,</span><span class="w"> </span><span class="nv">action</span><span class="p">.</span><span class="py">repository_id</span><span class="p">,</span><span class="w"> </span><span class="nv">ref</span><span class="p">,</span><span class="w"> </span><span class="nv">compare_ref</span><span class="p">)</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="kr">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">#</span><span class="nv">changed_table_defs</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="nv">changed_table_defs</span><span class="p">[</span><span class="nv">i</span><span class="p">])</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="kr">end</span>
</span></code></pre></div>
</div>
<h3 id="lakefscatalogexporttable_extractor"><code>lakefs/catalogexport/table_extractor</code><a class="headerlink" href="#lakefscatalogexporttable_extractor" title="Permanent link">&para;</a></h3>
<p>Utility package to parse <code>_lakefs_tables/</code> descriptors.</p>
<h3 id="lakefscatalogexporttable_extractorlist_table_descriptor_entriesclient-repo_id-commit_id"><code>lakefs/catalogexport/table_extractor.list_table_descriptor_entries(client, repo_id, commit_id)</code><a class="headerlink" href="#lakefscatalogexporttable_extractorlist_table_descriptor_entriesclient-repo_id-commit_id" title="Permanent link">&para;</a></h3>
<p>List all YAML files under <code>_lakefs_tables/*</code> and return a list of type <code>[{physical_address, path}]</code>, ignores hidden files.
The <code>client</code> is <code>lakefs</code> client.</p>
<h3 id="lakefscatalogexporttable_extractorget_table_descriptorclient-repo_id-ref-logical_path"><code>lakefs/catalogexport/table_extractor.get_table_descriptor(client, repo_id, ref, logical_path)</code><a class="headerlink" href="#lakefscatalogexporttable_extractorget_table_descriptorclient-repo_id-ref-logical_path" title="Permanent link">&para;</a></h3>
<p>Read a table descriptor and parse YAML object. Will set <code>partition_columns</code> to <code>{}</code> if no partitions are defined.</p>
<p>Parameters:
* <code>client</code>: <code>lakefs</code> client
* <code>repo_id(string)</code>: The repository ID
* <code>ref(string)</code>: reference pointing at a specific version of the data i.e. a branch, commit ID, or tag
* <code>logical_path(string)</code>: logical path of the table descriptor file within the repo</p>
<h3 id="lakefscatalogexporthiveextract_partition_pagerclient-repo_id-commit_id-base_path-partition_cols-page_size"><code>lakefs/catalogexport/hive.extract_partition_pager(client, repo_id, commit_id, base_path, partition_cols, page_size)</code><a class="headerlink" href="#lakefscatalogexporthiveextract_partition_pagerclient-repo_id-commit_id-base_path-partition_cols-page_size" title="Permanent link">&para;</a></h3>
<p>Hive format partition iterator each result set is a collection of files under the same partition in lakeFS.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">lakefs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;lakefs&quot;</span><span class="p">)</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">pager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">hive</span><span class="p">.</span><span class="nf">extract_partition_pager</span><span class="p">(</span><span class="nv">lakefs</span><span class="p">,</span><span class="w"> </span><span class="nv">repo_id</span><span class="p">,</span><span class="w"> </span><span class="nv">commit_id</span><span class="p">,</span><span class="w"> </span><span class="nv">prefix</span><span class="p">,</span><span class="w"> </span><span class="nv">partitions</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="kr">for</span><span class="w"> </span><span class="nv">part_key</span><span class="p">,</span><span class="w"> </span><span class="nv">entries</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nv">pager</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;partition: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">part_key</span><span class="p">)</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">entry</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">entries</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;path: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">entry</span><span class="p">.</span><span class="py">path</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; physical: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">entry</span><span class="p">.</span><span class="py">physical_address</span><span class="p">)</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="kr">end</span>
</span></code></pre></div>
</div>
<h3 id="lakefscatalogexportsymlink_exporter"><code>lakefs/catalogexport/symlink_exporter</code><a class="headerlink" href="#lakefscatalogexportsymlink_exporter" title="Permanent link">&para;</a></h3>
<p>Writes metadata for a table using Hive's <a href="https://svn.apache.org/repos/infra/websites/production/hive/content/javadocs/r2.1.1/api/org/apache/hadoop/hive/ql/io/SymlinkTextInputFormat.html">SymlinkTextInputFormat</a>.
Currently only <code>S3</code> is supported.</p>
<p>The default export paths per commit:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>${storageNamespace}
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>_lakefs/
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>    exported/
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>        ${ref}/
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>            ${commitId}/
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>                ${tableName}/
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>                    p1=v1/symlink.txt
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>                    p1=v2/symlink.txt
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>                    p1=v3/symlink.txt
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>                    ...
</span></code></pre></div>
<h3 id="lakefscatalogexportsymlink_exporterexport_s3s3_client-table_src_path-action_info-options"><code>lakefs/catalogexport/symlink_exporter.export_s3(s3_client, table_src_path, action_info [, options])</code><a class="headerlink" href="#lakefscatalogexportsymlink_exporterexport_s3s3_client-table_src_path-action_info-options" title="Permanent link">&para;</a></h3>
<p>Export Symlink files that represent a table to S3 location.</p>
<p>Parameters:</p>
<ul>
<li><code>s3_client</code>: Configured client.</li>
<li><code>table_src_path(string)</code>: Path to the table spec YAML file in <code>_lakefs_tables</code> (e.g. _lakefs_tables/my_table.yaml).</li>
<li><code>action_info(table)</code>: The global action object.</li>
<li><code>options(table)</code>:</li>
<li><code>debug(boolean)</code>: Print extra info.</li>
<li><code>export_base_uri(string)</code>: Override the prefix in S3 e.g. <code>s3://other-bucket/path/</code>.</li>
<li><code>writer(function(bucket, key, data))</code>: If passed then will not use s3 client, helpful for debug.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">exporter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;lakefs/catalogexport/symlink_exporter&quot;</span><span class="p">)</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;aws&quot;</span><span class="p">)</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="c1">-- args are user inputs from a lakeFS action.</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="kd">local</span><span class="w"> </span><span class="nv">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws</span><span class="p">.</span><span class="nf">s3_client</span><span class="p">(</span><span class="nv">args</span><span class="p">.</span><span class="py">aws</span><span class="p">.</span><span class="py">aws_access_key_id</span><span class="p">,</span><span class="w"> </span><span class="nv">args</span><span class="p">.</span><span class="py">aws</span><span class="p">.</span><span class="py">aws_secret_access_key</span><span class="p">,</span><span class="w"> </span><span class="nv">args</span><span class="p">.</span><span class="py">aws</span><span class="p">.</span><span class="py">aws_region</span><span class="p">)</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="nv">exporter</span><span class="p">.</span><span class="nf">export_s3</span><span class="p">(</span><span class="nv">s3</span><span class="p">,</span><span class="w"> </span><span class="nv">args</span><span class="p">.</span><span class="py">table_descriptor_path</span><span class="p">,</span><span class="w"> </span><span class="nv">action</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nv">debug</span><span class="o">=</span><span class="kc">true</span><span class="p">})</span>
</span></code></pre></div>
</div>
<h3 id="lakefscatalogexportglue_exporter"><code>lakefs/catalogexport/glue_exporter</code><a class="headerlink" href="#lakefscatalogexportglue_exporter" title="Permanent link">&para;</a></h3>
<p>A Package for automating the export process from lakeFS stored tables into Glue catalog.</p>
<h3 id="lakefscatalogexportglue_exporterexport_glueglue-db-table_src_path-create_table_input-action_info-options"><code>lakefs/catalogexport/glue_exporter.export_glue(glue, db, table_src_path, create_table_input, action_info, options)</code><a class="headerlink" href="#lakefscatalogexportglue_exporterexport_glueglue-db-table_src_path-create_table_input-action_info-options" title="Permanent link">&para;</a></h3>
<p>Represent lakeFS table in Glue Catalog.
This function will create a table in Glue based on configuration.
It assumes that there is a symlink location that is already created and only configures it by default for the same commit.</p>
<p>Parameters:</p>
<ul>
<li><code>glue</code>: AWS glue client</li>
<li><code>db(string)</code>: glue database name</li>
<li><code>table_src_path(string)</code>: path to table spec (e.g. _lakefs_tables/my_table.yaml)</li>
<li><code>create_table_input(table)</code>: Input equal mapping to <a href="https://docs.aws.amazon.com/glue/latest/webapi/API_CreateTable.html#API_CreateTable_RequestSyntax">table_input</a> in AWS, the same as we use for <code>glue.create_table</code>.
should contain inputs describing the data format (e.g. InputFormat, OutputFormat, SerdeInfo) since the exporter is agnostic to this.
by default this function will configure table location and schema.</li>
<li><code>action_info(table)</code>: the global action object.</li>
<li><code>options(table)</code>:</li>
<li><code>table_name(string)</code>: Override default glue table name</li>
<li><code>debug(boolean</code></li>
<li><code>export_base_uri(string)</code>: Override the default prefix in S3 for symlink location e.g. s3://other-bucket/path/</li>
<li><code>create_db_input(table)</code>: if this is specified, then it indicates we want to create a new database for the table export. The parameter expects a table that is converted to JSON and passed "as is" to AWS and is parallel to the AWS SDK <a href="https://docs.aws.amazon.com/glue/latest/webapi/API_CreateDatabase.html#API_CreateDatabase_RequestSyntax">CreateDatabaseInput</a></li>
</ul>
<p>When creating a glue table, the final table input will consist of the <code>create_table_input</code> input parameter and lakeFS computed defaults that will override it:</p>
<ul>
<li><code>Name</code> Gable table name <code>get_full_table_name(descriptor, action_info)</code>.</li>
<li><code>PartitionKeys</code> Partition columns usually deduced from <code>_lakefs_tables/${table_src_path}</code>.</li>
<li><code>TableType</code> = "EXTERNAL_TABLE"</li>
<li><code>StorageDescriptor</code>: Columns usually deduced from <code>_lakefs_tables/${table_src_path}</code>.</li>
<li><code>StorageDescriptor.Location</code> = symlink_location</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;aws&quot;</span><span class="p">)</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">exporter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;lakefs/catalogexport/glue_exporter&quot;</span><span class="p">)</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">glue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws</span><span class="p">.</span><span class="nf">glue_client</span><span class="p">(</span><span class="nv">args</span><span class="p">.</span><span class="py">aws_access_key_id</span><span class="p">,</span><span class="w"> </span><span class="nv">args</span><span class="p">.</span><span class="py">aws_secret_access_key</span><span class="p">,</span><span class="w"> </span><span class="nv">args</span><span class="p">.</span><span class="py">aws_region</span><span class="p">)</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="c1">-- table_input can be passed as a simple Key-Value object in YAML as an argument from an action, this is inline example:</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="kd">local</span><span class="w"> </span><span class="nv">table_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="nv">StorageDescriptor</span><span class="p">:</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">    </span><span class="py">InputFormat</span><span class="p">:</span><span class="w"> </span><span class="err">&quot;</span><span class="py">org</span><span class="p">.</span><span class="py">apache</span><span class="p">.</span><span class="py">hadoop</span><span class="p">.</span><span class="py">hive</span><span class="p">.</span><span class="py">ql</span><span class="p">.</span><span class="py">io</span><span class="p">.</span><span class="py">SymlinkTextInputFormat</span><span class="s2">&quot;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="s2">    OutputFormat: &quot;</span><span class="nv">org</span><span class="p">.</span><span class="py">apache</span><span class="p">.</span><span class="py">hadoop</span><span class="p">.</span><span class="py">hive</span><span class="p">.</span><span class="py">ql</span><span class="p">.</span><span class="py">io</span><span class="p">.</span><span class="py">IgnoreKeyTextOutputFormat</span><span class="s2">&quot;</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="s2">    SerdeInfo:</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="s2">    SerializationLibrary: &quot;</span><span class="nv">org</span><span class="p">.</span><span class="py">apache</span><span class="p">.</span><span class="py">hadoop</span><span class="p">.</span><span class="py">hive</span><span class="p">.</span><span class="py">ql</span><span class="p">.</span><span class="py">io</span><span class="p">.</span><span class="py">parquet</span><span class="p">.</span><span class="py">serde</span><span class="p">.</span><span class="py">ParquetHiveSerDe</span><span class="s2">&quot;</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="s2">Parameters:</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="s2">    classification: &quot;</span><span class="nv">parquet</span><span class="s2">&quot;</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="s2">    EXTERNAL: &quot;</span><span class="nv">TRUE</span><span class="s2">&quot;</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="s2">    &quot;</span><span class="nv">parquet</span><span class="p">.</span><span class="py">compression</span><span class="s2">&quot;: &quot;</span><span class="nv">SNAPPY</span><span class="s2">&quot;</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="s2">}</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="s2">exporter.export_glue(glue, &quot;</span><span class="nv">my</span><span class="o">-</span><span class="nv">db</span><span class="s2">&quot;, &quot;</span><span class="nv">_lakefs_tables</span><span class="o">/</span><span class="nv">animals</span><span class="p">.</span><span class="py">yaml</span><span class="s2">&quot;, table_input, action, {debug=true, create_db_input = {DatabaseInput = {Description=&quot;</span><span class="nv">DB</span><span class="w"> </span><span class="nv">exported</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">LakeFS</span><span class="s2">&quot;}, Tags = {Owner = &quot;</span><span class="nv">Joe</span><span class="s2">&quot;}}})</span>
</span></code></pre></div>
</div>
<h3 id="lakefscatalogexportglue_exporterget_full_table_namedescriptor-action_info_1"><code>lakefs/catalogexport/glue_exporter.get_full_table_name(descriptor, action_info)</code><a class="headerlink" href="#lakefscatalogexportglue_exporterget_full_table_namedescriptor-action_info_1" title="Permanent link">&para;</a></h3>
<p>Generate glue table name.</p>
<p>Parameters:</p>
<ul>
<li><code>descriptor(Table)</code>: Object from (e.g. _lakefs_tables/my_table.yaml).</li>
<li><code>action_info(Table)</code>: The global action object.</li>
</ul>
<h3 id="lakefscatalogexportunity_exporter"><code>lakefs/catalogexport/unity_exporter</code><a class="headerlink" href="#lakefscatalogexportunity_exporter" title="Permanent link">&para;</a></h3>
<p>A package used to register exported Delta Lake tables to Databricks' Unity catalog.</p>
<h3 id="lakefscatalogexportunity_exporterregister_tablesaction-table_descriptors_path-delta_table_details-databricks_client-warehouse_id"><code>lakefs/catalogexport/unity_exporter.register_tables(action, table_descriptors_path, delta_table_details, databricks_client, warehouse_id)</code><a class="headerlink" href="#lakefscatalogexportunity_exporterregister_tablesaction-table_descriptors_path-delta_table_details-databricks_client-warehouse_id" title="Permanent link">&para;</a></h3>
<p>The function used to register exported Delta Lake tables in Databricks' Unity Catalog.
The registration will use the following paths to register the table:
<code>&lt;catalog&gt;.&lt;branch name&gt;.&lt;table_name&gt;</code> where the branch name will be used as the schema name.
The return value is a table with mapping of table names to registration request status.</p>
<p><strong>Note: (Azure users)</strong> Databricks catalog external locations is supported only for ADLS Gen2 storage accounts.<br />
When exporting Delta tables using the <code>lakefs/catalogexport/delta_exporter.export_delta_log</code> function, the <code>path_transformer</code> must be<br />
used to convert the paths scheme to <code>abfss</code>. The built-in <code>azure</code> Lua library provides this functionality with <code>transformPathToAbfss</code>.</p>
<p>Parameters:</p>
<ul>
<li><code>action(table)</code>: The global action table</li>
<li><code>table_descriptors_path(string)</code>: The path under which the table descriptors of the provided <code>table_paths</code> reside.</li>
<li><code>delta_table_details(table)</code>: Table names to physical paths mapping and table metadata (e.g. <code>{table1 = {path = "s3://mybucket/mytable1", metadata = {id = "table_1_id", name = "table1", ...}}, table2 = {path = "s3://mybucket/mytable2", metadata = {id = "table_2_id", name = "table2", ...}}}</code>.)</li>
<li><code>databricks_client(table)</code>: A Databricks client that implements <code>create_or_get_schema: function(id, catalog_name)</code> and <code>register_external_table: function(table_name, physical_path, warehouse_id, catalog_name, schema_name)</code></li>
<li><code>warehouse_id(string)</code>: Databricks warehouse ID.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>The following registers an exported Delta Lake table to Unity Catalog.</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">databricks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;databricks&quot;</span><span class="p">)</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">unity_export</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;lakefs/catalogexport/unity_exporter&quot;</span><span class="p">)</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="kd">local</span><span class="w"> </span><span class="nv">delta_table_locations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="p">[</span><span class="s2">&quot;table1&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;s3://mybucket/mytable1&quot;</span><span class="p">,</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="p">}</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="c1">-- Register the exported table in Unity Catalog:</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="kd">local</span><span class="w"> </span><span class="nv">action_details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="nv">repository_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my-repo&quot;</span><span class="p">,</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="nv">commit_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;commit_id&quot;</span><span class="p">,</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="nv">branch_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="p">}</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="kd">local</span><span class="w"> </span><span class="nv">databricks_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">databricks</span><span class="p">.</span><span class="nf">client</span><span class="p">(</span><span class="s2">&quot;&lt;DATABRICKS_HOST&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;DATABRICKS_TOKEN&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="kd">local</span><span class="w"> </span><span class="nv">registration_statuses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">unity_export</span><span class="p">.</span><span class="nf">register_tables</span><span class="p">(</span><span class="nv">action_details</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;_lakefs_tables&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">delta_table_locations</span><span class="p">,</span><span class="w"> </span><span class="nv">databricks_client</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;WAREHOUSE_ID&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="kr">for</span><span class="w"> </span><span class="nv">t</span><span class="p">,</span><span class="w"> </span><span class="nv">status</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">registration_statuses</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unity catalog registration for table </span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> completed with status: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">status</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="kr">end</span>
</span></code></pre></div>
<p>For the table descriptor under the <code>_lakefs_tables/delta-table-descriptor.yaml</code>:
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nn">---</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_table_name</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delta</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path/to/delta/table/data</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="nt">catalog</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-catalog</span>
</span></code></pre></div></p>
</div>
<p>For detailed step-by-step guide on how to use <code>unity_exporter.register_tables</code> as a part of a lakeFS action refer to
the <a href="../../../integrations/unity-catalog/">Unity Catalog docs</a>.</p>
<h3 id="pathparsepath_string"><code>path/parse(path_string)</code><a class="headerlink" href="#pathparsepath_string" title="Permanent link">&para;</a></h3>
<p>Returns a table for the given path string with the following structure:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">)</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">&quot;a/b/c.csv&quot;</span><span class="p">)</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="p">{</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;a/b/&quot;</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;base_name&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;c.csv&quot;</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<h3 id="pathjoinpath_parts"><code>path/join(*path_parts)</code><a class="headerlink" href="#pathjoinpath_parts" title="Permanent link">&para;</a></h3>
<p>Receives a variable number of strings and returns a joined string that represents a path:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">)</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;path/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;file.data&quot;</span><span class="p">)</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="nv">path</span><span class="o">/</span><span class="nv">o</span><span class="o">/</span><span class="nv">a</span><span class="o">/</span><span class="nv">file</span><span class="p">.</span><span class="py">data</span>
</span></code></pre></div>
</div>
<h3 id="pathis_hiddenpath_string-seperator-prefix"><code>path/is_hidden(path_string [, seperator, prefix])</code><a class="headerlink" href="#pathis_hiddenpath_string-seperator-prefix" title="Permanent link">&para;</a></h3>
<p>returns a boolean - <code>true</code> if the given path string is hidden (meaning it starts with <code>prefix</code>) - or if any of its parents start with <code>prefix</code>.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">)</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="p">.</span><span class="nf">is_hidden</span><span class="p">(</span><span class="s2">&quot;a/b/c&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- false</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="p">.</span><span class="nf">is_hidden</span><span class="p">(</span><span class="s2">&quot;a/b/_c&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- true</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="p">.</span><span class="nf">is_hidden</span><span class="p">(</span><span class="s2">&quot;a/_b/c&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- true</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="p">.</span><span class="nf">is_hidden</span><span class="p">(</span><span class="s2">&quot;a/b/_c/&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- true</span>
</span></code></pre></div>
</div>
<h3 id="pathdefault_separator"><code>path/default_separator()</code><a class="headerlink" href="#pathdefault_separator" title="Permanent link">&para;</a></h3>
<p>Returns a constant string (<code>/</code>)</p>
<h3 id="regexpmatchpattern-s"><code>regexp/match(pattern, s)</code><a class="headerlink" href="#regexpmatchpattern-s" title="Permanent link">&para;</a></h3>
<p>Returns true if the string <code>s</code> matches <code>pattern</code>.
This is a thin wrapper over Go's <a href="https://pkg.go.dev/regexp#MatchString" target="_blank">regexp.MatchString</a>.</p>
<h3 id="regexpquote_metas"><code>regexp/quote_meta(s)</code><a class="headerlink" href="#regexpquote_metas" title="Permanent link">&para;</a></h3>
<p>Escapes any meta-characters in string <code>s</code> and returns a new string</p>
<h3 id="regexpcompilepattern"><code>regexp/compile(pattern)</code><a class="headerlink" href="#regexpcompilepattern" title="Permanent link">&para;</a></h3>
<p>Returns a regexp match object for the given pattern</p>
<h3 id="regexpcompiled_patternfind_alls-n"><code>regexp/compiled_pattern.find_all(s, n)</code><a class="headerlink" href="#regexpcompiled_patternfind_alls-n" title="Permanent link">&para;</a></h3>
<p>Returns a table list of all matches for the pattern, (up to <code>n</code> matches, unless <code>n == -1</code> in which case all possible matches will be returned)</p>
<h3 id="regexpcompiled_patternfind_all_submatchs-n"><code>regexp/compiled_pattern.find_all_submatch(s, n)</code><a class="headerlink" href="#regexpcompiled_patternfind_all_submatchs-n" title="Permanent link">&para;</a></h3>
<p>Returns a table list of all sub-matches for the pattern, (up to <code>n</code> matches, unless <code>n == -1</code> in which case all possible matches will be returned).
Submatches are matches of parenthesized subexpressions (also known as capturing groups) within the regular expression,
numbered from left to right in order of opening parenthesis.
Submatch 0 is the match of the entire expression, submatch 1 is the match of the first parenthesized subexpression, and so on</p>
<h3 id="regexpcompiled_patternfinds"><code>regexp/compiled_pattern.find(s)</code><a class="headerlink" href="#regexpcompiled_patternfinds" title="Permanent link">&para;</a></h3>
<p>Returns a string representing the left-most match for the given pattern in string <code>s</code></p>
<h3 id="regexpcompiled_patternfind_submatchs"><code>regexp/compiled_pattern.find_submatch(s)</code><a class="headerlink" href="#regexpcompiled_patternfind_submatchs" title="Permanent link">&para;</a></h3>
<p>find_submatch returns a table of strings holding the text of the leftmost match of the regular expression in <code>s</code> and the matches, if any, of its submatches</p>
<h3 id="stringssplits-sep"><code>strings/split(s, sep)</code><a class="headerlink" href="#stringssplits-sep" title="Permanent link">&para;</a></h3>
<p>returns a table of strings, the result of splitting <code>s</code> with <code>sep</code>.</p>
<h3 id="stringstrims"><code>strings/trim(s)</code><a class="headerlink" href="#stringstrims" title="Permanent link">&para;</a></h3>
<p>Returns a string with all leading and trailing white space removed, as defined by Unicode</p>
<h3 id="stringsreplaces-old-new-n"><code>strings/replace(s, old, new, n)</code><a class="headerlink" href="#stringsreplaces-old-new-n" title="Permanent link">&para;</a></h3>
<p>Returns a copy of the string s with the first n non-overlapping instances of <code>old</code> replaced by <code>new</code>.
If <code>old</code> is empty, it matches at the beginning of the string and after each UTF-8 sequence, yielding up to k+1 replacements for a k-rune string.</p>
<p>If n &lt; 0, there is no limit on the number of replacements</p>
<h3 id="stringshas_prefixs-prefix"><code>strings/has_prefix(s, prefix)</code><a class="headerlink" href="#stringshas_prefixs-prefix" title="Permanent link">&para;</a></h3>
<p>Returns <code>true</code> if <code>s</code> begins with <code>prefix</code></p>
<h3 id="stringshas_suffixs-suffix"><code>strings/has_suffix(s, suffix)</code><a class="headerlink" href="#stringshas_suffixs-suffix" title="Permanent link">&para;</a></h3>
<p>Returns <code>true</code> if <code>s</code> ends with <code>suffix</code></p>
<h3 id="stringscontainss-substr"><code>strings/contains(s, substr)</code><a class="headerlink" href="#stringscontainss-substr" title="Permanent link">&para;</a></h3>
<p>Returns <code>true</code> if <code>substr</code> is contained anywhere in <code>s</code></p>
<h3 id="timenow"><code>time/now()</code><a class="headerlink" href="#timenow" title="Permanent link">&para;</a></h3>
<p>Returns a <code>float64</code> representing the amount of nanoseconds since the unix epoch (01/01/1970 00:00:00).</p>
<h3 id="timeformatepoch_nano-layout-zone"><code>time/format(epoch_nano, layout, zone)</code><a class="headerlink" href="#timeformatepoch_nano-layout-zone" title="Permanent link">&para;</a></h3>
<p>Returns a string representation of the given epoch_nano timestamp for the given Timezone (e.g. <code>"UTC"</code>, <code>"America/Los_Angeles"</code>, ...)
The <code>layout</code> parameter should follow <a href="https://pkg.go.dev/time#pkg-constants" target="_blank">Go's time layout format</a>.</p>
<h3 id="timeformat_isoepoch_nano-zone"><code>time/format_iso(epoch_nano, zone)</code><a class="headerlink" href="#timeformat_isoepoch_nano-zone" title="Permanent link">&para;</a></h3>
<p>Returns a string representation of the given <code>epoch_nano</code> timestamp for the given Timezone (e.g. <code>"UTC"</code>, <code>"America/Los_Angeles"</code>, ...)
The returned string will be in <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank">ISO8601</a> format.</p>
<h3 id="timesleepduration_ns"><code>time/sleep(duration_ns)</code><a class="headerlink" href="#timesleepduration_ns" title="Permanent link">&para;</a></h3>
<p>Sleep for <code>duration_ns</code> nanoseconds</p>
<h3 id="timesinceepoch_nano"><code>time/since(epoch_nano)</code><a class="headerlink" href="#timesinceepoch_nano" title="Permanent link">&para;</a></h3>
<p>Returns the amount of nanoseconds elapsed since <code>epoch_nano</code></p>
<h3 id="timeaddepoch_time-duration_table"><code>time/add(epoch_time, duration_table)</code><a class="headerlink" href="#timeaddepoch_time-duration_table" title="Permanent link">&para;</a></h3>
<p>Returns a new timestamp (in nanoseconds passed since 01/01/1970 00:00:00) for the given <code>duration</code>.
The <code>duration</code> should be a table with the following structure:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">)</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">time</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">time</span><span class="p">.</span><span class="nf">now</span><span class="p">(),</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;hour&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;minute&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;second&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="p">})</span>
</span></code></pre></div>
</div>
<p>You may omit any of the fields from the table, resulting in a default value of <code>0</code> for omitted fields</p>
<h3 id="timeparselayout-value"><code>time/parse(layout, value)</code><a class="headerlink" href="#timeparselayout-value" title="Permanent link">&para;</a></h3>
<p>Returns a <code>float64</code> representing the amount of nanoseconds since the unix epoch (01/01/1970 00:00:00).
This timestamp will represent date <code>value</code> parsed using the <code>layout</code> format.</p>
<p>The <code>layout</code> parameter should follow <a href="https://pkg.go.dev/time#pkg-constants" target="_blank">Go's time layout format</a></p>
<h3 id="timeparse_isovalue"><code>time/parse_iso(value)</code><a class="headerlink" href="#timeparse_isovalue" title="Permanent link">&para;</a></h3>
<p>Returns a <code>float64</code> representing the amount of nanoseconds since the unix epoch (01/01/1970 00:00:00 for <code>value</code>.
The <code>value</code> string should be in <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank">ISO8601</a> format</p>
<h3 id="uuidnew"><code>uuid/new()</code><a class="headerlink" href="#uuidnew" title="Permanent link">&para;</a></h3>
<p>Returns a new 128-bit <a href="https://www.rfc-editor.org/rfc/rfc4122" target="_blank">RFC 4122 UUID</a> in string representation.</p>
<h3 id="neturl"><code>net/url</code><a class="headerlink" href="#neturl" title="Permanent link">&para;</a></h3>
<p>Provides a <code>parse</code> function parse a URL string into parts, returns a table with the URL's host, path, scheme, query and fragment.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="kd">local</span><span class="w"> </span><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;net/url&quot;</span><span class="p">)</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="o">&gt;</span><span class="w"> </span><span class="nv">url</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">&quot;https://example.com/path?p1=a#section&quot;</span><span class="p">)</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="p">{</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;host&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;example.com&quot;</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/path&quot;</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;scheme&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https&quot;</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;p1=a&quot;</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="w">    </span><span class="p">[</span><span class="s2">&quot;fragment&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;section&quot;</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<h3 id="nethttp-optional"><code>net/http</code> (optional)<a class="headerlink" href="#nethttp-optional" title="Permanent link">&para;</a></h3>
<p>Provides a <code>request</code> function that performs an HTTP request.
For security reasons, this package is not available by default as it enables http requests to be sent out from the lakeFS instance network. The feature should be enabled under <code>actions.lua.net_http_enabled</code> <a href="../../../reference/configuration/">configuration</a>.
Request will time out after 30 seconds.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nv">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="nv">url</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="nv">body</span><span class="p">])</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="nv">http</span><span class="p">.</span><span class="py">request</span><span class="p">{</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">string</span><span class="p">,</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="p">[</span><span class="nv">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">string</span><span class="p">,]</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="p">[</span><span class="nv">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">header</span><span class="o">-</span><span class="nv">table</span><span class="p">,]</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="p">[</span><span class="nv">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">string</span><span class="p">,]</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<p>Returns a code (number), body (string), headers (table) and status (string).</p>
<ul>
<li>code - status code number</li>
<li>body - string with the response body</li>
<li>headers - table with the response request headers (key/value or table of values)</li>
<li>status - status code text</li>
</ul>
<p>The first form of the call will perform GET requests or POST requests if the body parameter is passed.</p>
<p>The second form accepts a table and allows you to customize the request method and headers.</p>
<p>Example of a GET request</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;net/http&quot;</span><span class="p">)</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">code</span><span class="p">,</span><span class="w"> </span><span class="nv">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="s2">&quot;&lt;https://example.com&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="nv">body</span><span class="p">)</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="kr">else</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to get example.com - status code: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">code</span><span class="p">)</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="kr">end</span>
</span></code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Example of a POST request</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;net/http&quot;</span><span class="p">)</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">code</span><span class="p">,</span><span class="w"> </span><span class="nv">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">http</span><span class="p">.</span><span class="py">request</span><span class="p">{</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">    </span><span class="nv">url</span><span class="o">=</span><span class="s2">&quot;https://httpbin.org/post&quot;</span><span class="p">,</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">    </span><span class="nv">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="w">    </span><span class="nv">body</span><span class="o">=</span><span class="s2">&quot;custname=tester&quot;</span><span class="p">,</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">    </span><span class="nv">headers</span><span class="o">=</span><span class="p">{[</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">},</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="p">}</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="kr">if</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="nv">body</span><span class="p">)</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="kr">else</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to post data - status code: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">code</span><span class="p">)</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="kr">end</span>
</span></code></pre></div>
</div>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <!-- Custom footer for lakeFS documentation -->
<footer class="md-footer">
  <div class="md-footer__inner md-grid">
    <!-- Primary footer navigation -->
    <nav class="md-footer__nav">
      <ul class="md-footer__list">
        <li><a href="https://docs.lakefs.io/">Docs</a></li>
        <li><a href="https://lakefs.io/blog">Blog</a></li>
        <li><a href="https://github.com/treeverse/lakeFS">GitHub</a></li>
        <li><a href="https://lakefs.io/community">Community</a></li>
        <li><a href="https://lakefs.io/cloud-registration/">Cloud</a></li>
        <li><a href="https://lakefs.io/contact-us/">Contact</a></li>
      </ul>
    </nav>

    <!-- Social links -->
    <nav class="md-footer__social">
      <ul class="md-footer__list">
        <li>
          <a href="https://lakefs.io/youtube" title="YouTube" aria-label="YouTube">
            <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg></span>
          </a>
        </li>
        <li>
          <a href="https://www.linkedin.com/company/treeverse" title="LinkedIn" aria-label="LinkedIn">
            <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg></span>
          </a>
        </li>
        <li>
          <a href="https://github.com/treeverse/lakeFS" title="GitHub" aria-label="GitHub">
            <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></span>
          </a>
        </li>
        <li>
          <a href="https://x.com/lakeFS" title="Twitter / X" aria-label="Twitter / X">
            <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg></span>
          </a>
        </li>
        <li>
          <a href="https://lakefs.io/slack" title="Slack" aria-label="Slack">
            <span class="twemoji" style="color:#F24886;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1s21.16-47.06 47.06-47.06h47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06S448 171 448 196.9s-21.16 47.06-47.06 47.06h-47.06zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06S309 480 283.1 480s-47.06-21.16-47.06-47.06v-47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06s21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06z"/></svg></span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- Legal links -->
    <nav class="md-footer__legal">
      <ul class="md-footer__list">
        <li><a href="https://lakefs.io/terms-of-use/">Terms of use</a></li>
        <li><a href="https://lakefs.io/privacy-policy/">Privacy Policy</a></li>
        <li><a href="#__consent">Cookie Settings</a></li>
      </ul>
    </nav>
  </div>
</footer> 
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to
    make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.footnote.tooltips", "content.code.copy", "content.tabs.link", "content.tooltips", "search.suggest", "search.share"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>