

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/assets/css/just-the-docs-default.css">
  
  <style type="text/css">
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(4) > .nav-list > .nav-list-item:nth-child(20) > .nav-list-link { display: block; font-weight: 600; text-decoration: none; background-image: linear-gradient(-90deg, #ebedf5 0%, rgba(235, 237, 245, 0.8) 80%, rgba(235, 237, 245, 0) 100%); }

.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list > .nav-list-item:not(.passive):nth-child(20) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list > .nav-list-item:not(.passive):nth-child(20) > .nav-list { display: block; }

.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list { display: block; }

</style>


  

  
    <script src="/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="icon" href="/favicon.ico" type="image/x-icon">



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Python | lakeFS Documentation</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Python" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Use Python to interact with your objects on lakeFS" />
<meta property="og:description" content="Use Python to interact with your objects on lakeFS" />
<meta property="og:site_name" content="lakeFS Documentation" />
<meta property="og:image" content="https://docs.lakefs.io/assets/img/docs_logo.png" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://docs.lakefs.io/assets/img/docs_logo.png" />
<meta property="twitter:title" content="Python" />
<meta name="twitter:site" content="@lakeFS" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Use Python to interact with your objects on lakeFS","headline":"Python","image":"https://docs.lakefs.io/assets/img/docs_logo.png","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/logo.svg"}},"url":"/integrations/python.html"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Google Tag Manager Head -->
<!-- type="text/plain" is intentional for cookie consent support -->
<script type="text/plain" data-category="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KTZBZW9');</script>
<!-- End Google Tag Manager Head -->

<meta property="og:image" content="/assets/img/lakefs-logo-with-text.png">
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/fontawesome.min.css" integrity="sha512-giQeaPns4lQTBMRpOOHsYnGw1tGVzbAIHUyHRgn7+6FmiEgGGjaG0T2LZJmAPMzRCl+Cug0ItQ2xDZpTmEc+CQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<link rel="stylesheet" href="/assets/css/cookieconsent.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
<script type="module" src="/assets/js/cookieconsent-init.js"></script>
<script src="/assets/js/copy-code.js"></script>
<script>
    $(function () {
        $(".tabs").tabs();
    });
</script>
<script src="/assets/js/feedback.js"></script>
<link href="https://data-folks.masto.host/@lakeFS" rel="me">

</head>

<script src="https://unpkg.com/mermaid@9.3.0/dist/mermaid.min.js"></script>
<script>
    $(document).ready(function () {
        mermaid.initialize({
            startOnLoad:true,
            theme: "default",
        });
        window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
    });
</script>
<body>
<img src="/assets/img/cookies.png" style="display: none;">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTZBZW9"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-link">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-search">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="16px" viewBox="0 0 20 16" version="1.1"
             class="feather feather-menu">
            <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="header-/-mobile" transform="translate(-30.000000, -32.000000)" fill="#279890">
                    <g id="Group" transform="translate(30.000000, 32.000000)">
                        <path
                                d="M20,14 L20,16 L0,16 L0,14 L20,14 Z M20,7 L20,9 L0,9 L0,7 L20,7 Z M20,0 L20,2 L0,2 L0,0 L20,0 Z"
                                id="mobile-menu" />
                    </g>
                </g>
            </g>
        </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-chevron-right">
            <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-file">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
            <polyline points="13 2 13 9 20 9"></polyline>
        </svg>
    </symbol>
</svg>
<div class="body-wrapper">
    <div class="side-bar">
        <div class="site-header">
            <a href="https://lakefs.io" class="site-title lh-tight">
  <div class="site-logo" role="img" aria-label="lakeFS Documentation"></div>

</a>
            <a href="#" id="menu-button" class="site-button">
                <svg viewBox="0 0 24 24" class="icon">
                    <use xlink:href="#svg-menu"></use>
                </svg>
            </a>
        </div>
        <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
            
            <div class="search">
                <div class="search-input-wrap">
                    <input type="text" id="search-input" class="search-input" tabindex="0"
                           placeholder="Search lakeFS Documentation" aria-label="Search lakeFS Documentation"
                           autocomplete="off">
                    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon">
                            <use xlink:href="#svg-search"></use>
                        </svg></label>
                </div>
                <div id="search-results" class="search-results"></div>
            </div>
            

            <div class="nav-category nav-version">
                <label for="selectversion">Version:</label>
                <select id="selectversion" name="version" onchange="javascript:location.href = '/' + encodeURI(this.value);">
                    <option value="" selected>Latest</option>
                </select>
            </div>
            <script async>
                window.addEventListener("load",  async () => {
                    const pathFirstLevel = location.pathname.split('/')[1];
                    const selectedVersion = pathFirstLevel.startsWith('v') && pathFirstLevel || '';
                    const selectVersionElmFirst = document.getElementById('selectversion').firstElementChild;
                    const response = await fetch('/versions.json');
                    if (!response.ok) {
                        return
                    }
                    const versions = await response.json();
                    for (let [key, value] of Object.entries(versions)) {
                        const el = document.createElement("option");
                        el.value = key;
                        el.textContent = value;
                        if (key === selectedVersion) {
                            el.selected = true;
                        }
                        selectVersionElmFirst.after(el);
                    }
                });
            </script>

            <ul class="nav-list"><li
            class="nav-list-item"><a href="/"
           class="nav-list-link">Welcome to lakeFS</a></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/quickstart/"
           class="nav-list-link">⭐ Quickstart</a><ul class="nav-list "><li class="nav-list-item "><a href="/quickstart/launch.html"
                   class="nav-list-link">1️⃣ Run lakeFS</a></li><li class="nav-list-item "><a href="/quickstart/query.html"
                   class="nav-list-link">2️⃣ Query the data</a></li><li class="nav-list-item "><a href="/quickstart/branch.html"
                   class="nav-list-link">3️⃣ Create a branch</a></li><li class="nav-list-item "><a href="/quickstart/commit-and-merge.html"
                   class="nav-list-link">4️⃣ Commit and Merge</a></li><li class="nav-list-item "><a href="/quickstart/rollback.html"
                   class="nav-list-link">5️⃣ Roll back Changes</a></li><li class="nav-list-item "><a href="/quickstart/actions-and-hooks.html"
                   class="nav-list-link">6️⃣ Using Actions and Hooks in lakeFS</a></li><li class="nav-list-item "><a href="/quickstart/work-with-data-locally.html"
                   class="nav-list-link">7️⃣ Work with lakeFS data locally</a></li><li class="nav-list-item "><a href="/quickstart/learning-more-lakefs.html"
                   class="nav-list-link">Learn more about lakeFS</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/howto/"
           class="nav-list-link">How-To</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/howto/deploy/"
                   class="nav-list-link">Install lakeFS</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/howto/deploy/aws.html"
                           class="nav-list-link">AWS</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/azure.html"
                           class="nav-list-link">Azure</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/gcp.html"
                           class="nav-list-link">GCP</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/onprem.html"
                           class="nav-list-link">On-Premises</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/upgrade.html"
                           class="nav-list-link">Upgrade lakeFS</a>
                    </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/howto/hooks/"
                   class="nav-list-link">Actions and Hooks</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/howto/hooks/airflow.html"
                           class="nav-list-link">Airflow Hooks</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/hooks/lua.html"
                           class="nav-list-link">Lua Hooks</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/hooks/webhooks.html"
                           class="nav-list-link">Webhooks</a>
                    </li></ul></li><li class="nav-list-item "><a href="/howto/protect-branches.html"
                   class="nav-list-link">Branch Protection</a></li><li class="nav-list-item "><a href="/howto/copying.html"
                   class="nav-list-link">Copying data to/from lakeFS</a></li><li class="nav-list-item "><a href="/howto/catalog_exports.html"
                   class="nav-list-link">Data Catalogs Export</a></li><li class="nav-list-item "><a href="/howto/export.html"
                   class="nav-list-link">Export Data</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/howto/garbage-collection/"
                   class="nav-list-link">Garbage Collection</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/howto/garbage-collection/gc.html"
                           class="nav-list-link">Garbage Collection</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/garbage-collection/managed-gc.html"
                           class="nav-list-link">Managed Garbage Collection</a>
                    </li></ul></li><li class="nav-list-item "><a href="/howto/import.html"
                   class="nav-list-link">Import Data</a></li><li class="nav-list-item "><a href="/howto/migrate-away.html"
                   class="nav-list-link">Migrating away from lakeFS</a></li><li class="nav-list-item "><a href="/howto/mirroring.html"
                   class="nav-list-link">Mirroring</a></li><li class="nav-list-item "><a href="/howto/private-link.html"
                   class="nav-list-link">Private Link</a></li><li class="nav-list-item "><a href="/howto/virtual-host-addressing.html"
                   class="nav-list-link">S3 Virtual-host addressing (advanced)</a></li><li class="nav-list-item "><a href="/howto/sizing-guide.html"
                   class="nav-list-link">Sizing Guide</a></li><li class="nav-list-item "><a href="/howto/scim.html"
                   class="nav-list-link">System for Cross-domain Identity Management (SCIM)</a></li><li class="nav-list-item "><a href="/howto/local-checkouts.html"
                   class="nav-list-link">Work with lakeFS data locally</a></li></ul></li><li
            class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/integrations/"
           class="nav-list-link">Integrations</a><ul class="nav-list "><li class="nav-list-item "><a href="/integrations/aws_cli.html"
                   class="nav-list-link">AWS CLI</a></li><li class="nav-list-item "><a href="/integrations/airbyte.html"
                   class="nav-list-link">Airbyte</a></li><li class="nav-list-item "><a href="/integrations/athena.html"
                   class="nav-list-link">Amazon Athena</a></li><li class="nav-list-item "><a href="/integrations/sagemaker.html"
                   class="nav-list-link">Amazon SageMaker</a></li><li class="nav-list-item "><a href="/integrations/airflow.html"
                   class="nav-list-link">Apache Airflow</a></li><li class="nav-list-item "><a href="/integrations/hive.html"
                   class="nav-list-link">Apache Hive</a></li><li class="nav-list-item "><a href="/integrations/iceberg.html"
                   class="nav-list-link">Apache Iceberg</a></li><li class="nav-list-item "><a href="/integrations/kafka.html"
                   class="nav-list-link">Apache Kafka</a></li><li class="nav-list-item "><a href="/integrations/spark.html"
                   class="nav-list-link">Apache Spark</a></li><li class="nav-list-item "><a href="/integrations/cloudera.html"
                   class="nav-list-link">Cloudera</a></li><li class="nav-list-item "><a href="/integrations/delta.html"
                   class="nav-list-link">Delta Lake</a></li><li class="nav-list-item "><a href="/integrations/dremio.html"
                   class="nav-list-link">Dremio</a></li><li class="nav-list-item "><a href="/integrations/duckdb.html"
                   class="nav-list-link">DuckDB</a></li><li class="nav-list-item "><a href="/integrations/git.html"
                   class="nav-list-link">Git</a></li><li class="nav-list-item "><a href="/integrations/glue_hive_metastore.html"
                   class="nav-list-link">Glue / Hive metastore</a></li><li class="nav-list-item "><a href="/integrations/glue_metastore.html"
                   class="nav-list-link">Glue Data Catalog</a></li><li class="nav-list-item "><a href="/integrations/huggingface_datasets.html"
                   class="nav-list-link">HuggingFace Datasets</a></li><li class="nav-list-item "><a href="/integrations/kubeflow.html"
                   class="nav-list-link">Kubeflow</a></li><li class="nav-list-item "><a href="/integrations/presto_trino.html"
                   class="nav-list-link">Presto / Trino</a></li><li class="nav-list-item  active"><a href="/integrations/python.html"
                   class="nav-list-link active">Python</a></li><li class="nav-list-item "><a href="/integrations/r.html"
                   class="nav-list-link">R</a></li><li class="nav-list-item "><a href="/integrations/unity-catalog.html"
                   class="nav-list-link">Unity Catalog</a></li><li class="nav-list-item "><a href="/integrations/vertex_ai.html"
                   class="nav-list-link">Vertex AI</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/understand/"
           class="nav-list-link">Understanding lakeFS</a><ul class="nav-list "><li class="nav-list-item "><a href="/understand/architecture.html"
                   class="nav-list-link">Architecture</a></li><li class="nav-list-item "><a href="/understand/model.html"
                   class="nav-list-link">Concepts and  Model</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/understand/data_lifecycle_management/"
                   class="nav-list-link">Data Lifecycle Management</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/understand/data_lifecycle_management/ci.html"
                           class="nav-list-link">During Deployment</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/data_lifecycle_management/production.html"
                           class="nav-list-link">In Production</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/data_lifecycle_management/data-devenv.html"
                           class="nav-list-link">In Test</a>
                    </li></ul></li><li class="nav-list-item "><a href="/understand/data-structure.html"
                   class="nav-list-link">Data Structure</a></li><li class="nav-list-item "><a href="/understand/faq.html"
                   class="nav-list-link">FAQ</a></li><li class="nav-list-item "><a href="/understand/glossary.html"
                   class="nav-list-link">Glossary</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/understand/how/"
                   class="nav-list-link">How lakeFS Works</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/understand/how/kv.html"
                           class="nav-list-link">Internal database structure</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/how/merge.html"
                           class="nav-list-link">Merge</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/how/versioning-internals.html"
                           class="nav-list-link">Versioning Internals</a>
                    </li></ul></li><li class="nav-list-item "><a href="/understand/performance-best-practices.html"
                   class="nav-list-link">Performance Best Practices</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/understand/use_cases/"
                   class="nav-list-link">Use Cases</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/understand/use_cases/cicd_for_data.html"
                           class="nav-list-link">CI/CD for Data Lakes</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/use_cases/etl_testing.html"
                           class="nav-list-link">ETL Testing Environment</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/use_cases/reproducibility.html"
                           class="nav-list-link">Reproducibility</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/use_cases/rollback.html"
                           class="nav-list-link">Rollback</a>
                    </li></ul></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/reference/"
           class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/reference/auditing.html"
                   class="nav-list-link">Auditing</a></li><li class="nav-list-item "><a href="/reference/monitor.html"
                   class="nav-list-link">Monitoring using Prometheus</a></li><li class="nav-list-item "><a href="/reference/s3.html"
                   class="nav-list-link">S3 Gateway API</a></li><li class="nav-list-item "><a href="/reference/spark-client.html"
                   class="nav-list-link">Spark Client</a></li><li class="nav-list-item "><a href="/reference/api.html"
                   class="nav-list-link">lakeFS API</a></li><li class="nav-list-item "><a href="/reference/configuration.html"
                   class="nav-list-link">lakeFS Server Configuration</a></li><li class="nav-list-item "><a href="/reference/cli.html"
                   class="nav-list-link">lakectl (lakeFS command-line tool)</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/project/"
           class="nav-list-link">The lakeFS Project</a><ul class="nav-list "><li class="nav-list-item "><a href="/project/contributing.html"
                   class="nav-list-link">Contributing to lakeFS</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/project/docs/"
                   class="nav-list-link">Documentation</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/project/docs/callouts.html"
                           class="nav-list-link">Callouts</a>
                    </li></ul></li><li class="nav-list-item "><a href="/project/code-migrate-1.0-sdk.html"
                   class="nav-list-link">Migrating to 1.0</a></li></ul></li><li
            class="nav-list-item"><a href="/cloud/"
           class="nav-list-link">lakeFS Cloud</a></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/enterprise/"
           class="nav-list-link">lakeFS Enterprise</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/enterprise/getstarted/"
                   class="nav-list-link">Get Started</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/enterprise/getstarted/quickstart.html"
                           class="nav-list-link">Quickstart</a>
                    </li><li class="nav-list-item ">
                        <a href="/enterprise/getstarted/install.html"
                           class="nav-list-link">Install</a>
                    </li><li class="nav-list-item ">
                        <a href="/enterprise/getstarted/migrate-from-oss.html"
                           class="nav-list-link">Migrate from lakeFS OSS</a>
                    </li></ul></li><li class="nav-list-item "><a href="/enterprise/upgrade.html"
                   class="nav-list-link">Upgrade</a></li><li class="nav-list-item "><a href="/enterprise/troubleshooting.html"
                   class="nav-list-link">Troubleshooting lakeFS Enterprise</a></li><li class="nav-list-item "><a href="/enterprise/configuration.html"
                   class="nav-list-link">Configuration Reference</a></li><li class="nav-list-item "><a href="/enterprise/architecture.html"
                   class="nav-list-link">Architecture</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/security/"
           class="nav-list-link">Security</a><ul class="nav-list "><li class="nav-list-item "><a href="/security/access-control-lists.html"
                   class="nav-list-link">Access Control Lists (ACLs) -Deprecated-</a></li><li class="nav-list-item "><a href="/security/authentication.html"
                   class="nav-list-link">Authentication</a></li><li class="nav-list-item "><a href="/security/external-principals-aws.html"
                   class="nav-list-link">Login to lakeFS with AWS IAM Roles</a></li><li class="nav-list-item "><a href="/security/presigned-url.html"
                   class="nav-list-link">Presigned URLs</a></li><li class="nav-list-item "><a href="/security/remote-authenticator.html"
                   class="nav-list-link">Remote Authenticator</a></li><li class="nav-list-item "><a href="/security/rbac.html"
                   class="nav-list-link">Role-Based Access Control (RBAC)</a></li><li class="nav-list-item "><a href="/security/sts-login.html"
                   class="nav-list-link">Short-lived token (STS like) Authentication for lakeFS</a></li><li class="nav-list-item "><a href="/security/sso.html"
                   class="nav-list-link">Single Sign On (SSO)</a></li></ul></li></ul>
            <div class="mobile-menu">
                
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

            </div>
        </nav>

    </div>
    <div class="main" id="top">
         <div class="feedback-container">
            <div id="is-helpful-ty">
                <div class="text-epsilon">Thank you for your feedback.</div>
                <div class="mt-2 text-epsilon">
                    <a href="https://lakefs.io/slack" target="_blank">Join the community</a> to get more help.
                </div>
            </div>
            <div class="feedback-buttons">
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-up" id="page-helpful-yes"></button>
                    <span class="tooltiptext">
                        This page is <b>helpful</b>
                    </span>
                </span>
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-down" id="page-helpful-no"></button>
                    <span class="tooltiptext">
                        This page is <b>not helpful</b>
                    </span>
                </span>
            </div>
        </div>
        <div id="main-header" class="main-header">
            
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

        </div>
        <div id="main-content-wrap" class="main-content-wrap">
            
            
            <nav aria-label="Breadcrumb" class="breadcrumb-nav">
                <ol class="breadcrumb-nav-list">
                    
                    <li class="breadcrumb-nav-list-item"><a href="/integrations/">Integrations</a>
                    </li>
                    
                    <li class="breadcrumb-nav-list-item"><span>Python</span></li>
                </ol>
            </nav>
            
            
            <div id="main-content" class="main-content" role="main">
                
                    <h1 id="use-python-to-interact-with-your-objects-on-lakefs">
  
  
    <a href="#use-python-to-interact-with-your-objects-on-lakefs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use Python to interact with your objects on lakeFS
  
  
</h1>
    

<div class="toc-block">
<h2 class="no_toc text-delta" id="table-of-contents">
  
  
    <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents
  
  
</h2>
    

<ol id="markdown-toc">
  <li><a href="#using-the-lakefs-sdk" id="markdown-toc-using-the-lakefs-sdk">Using the lakeFS SDK</a>    <ol>
      <li><a href="#installing" id="markdown-toc-installing">Installing</a></li>
      <li><a href="#initializing" id="markdown-toc-initializing">Initializing</a></li>
      <li><a href="#usage-examples" id="markdown-toc-usage-examples">Usage Examples</a></li>
      <li><a href="#list-branches" id="markdown-toc-list-branches">List branches</a></li>
    </ol>
  </li>
  <li><a href="#io" id="markdown-toc-io">IO</a>    <ol>
      <li><a href="#upload" id="markdown-toc-upload">Upload</a></li>
      <li><a href="#uncommitted-changes" id="markdown-toc-uncommitted-changes">Uncommitted changes</a></li>
      <li><a href="#read-data-from-main-branch" id="markdown-toc-read-data-from-main-branch">Read data from main branch</a></li>
      <li><a href="#importing-data-into-lakefs" id="markdown-toc-importing-data-into-lakefs">Importing data into lakeFS</a></li>
      <li><a href="#transactions" id="markdown-toc-transactions">Transactions</a></li>
      <li><a href="#python-sdk-documentation-and-api-reference" id="markdown-toc-python-sdk-documentation-and-api-reference">Python SDK documentation and API reference</a></li>
    </ol>
  </li>
  <li><a href="#using-lakefs-spec-for-higher-level-file-operations" id="markdown-toc-using-lakefs-spec-for-higher-level-file-operations">Using lakefs-spec for higher-level file operations</a>    <ol>
      <li><a href="#installation" id="markdown-toc-installation">Installation</a></li>
      <li><a href="#interacting-with-lakefs-through-a-file-system" id="markdown-toc-interacting-with-lakefs-through-a-file-system">Interacting with lakeFS through a file system</a></li>
      <li><a href="#integrations-with-popular-data-science-packages" id="markdown-toc-integrations-with-popular-data-science-packages">Integrations with popular data science packages</a></li>
      <li><a href="#using-transactions-for-atomic-versioning-operations" id="markdown-toc-using-transactions-for-atomic-versioning-operations">Using transactions for atomic versioning operations</a></li>
      <li><a href="#further-information" id="markdown-toc-further-information">Further information</a></li>
    </ol>
  </li>
  <li><a href="#using-boto" id="markdown-toc-using-boto">Using Boto</a>    <ol>
      <li><a href="#initializing-1" id="markdown-toc-initializing-1">Initializing</a></li>
      <li><a href="#usage-examples-1" id="markdown-toc-usage-examples-1">Usage Examples</a></li>
    </ol>
  </li>
</ol>

</div>

<p class="note"><strong>High Level Python SDK</strong>  <span class="badge mr-1">New</span>
We’ve just released a new High Level Python SDK library, and we’re super excited to tell you about it! Continue reading to get the
full story!
Though our previous SDK client is still supported and maintained, we highly recommend using the new High Level SDK.
<strong>For previous Python SDKs follow these links:</strong>
<a href="https://pydocs-sdk.lakefs.io">lakefs-sdk</a>
<a href="https://pydocs.lakefs.io">legacy-sdk</a> (Depracated)</p>

<p>There are three primary ways to work with lakeFS from Python:</p>

<ul>
  <li><a href="#using-boto">Use Boto</a> to perform <strong>object operations</strong> through the <strong>lakeFS S3 gateway</strong>.</li>
  <li><a href="#using-the-lakefs-sdk">Use the High Level lakeFS SDK</a> to perform <strong>object operations</strong>, <strong>versioning</strong> and other <strong>lakeFS-specific operations</strong>.</li>
  <li><a href="#using-lakefs-spec-for-higher-level-file-operations">Using lakefs-spec</a> to
perform high-level file operations through a file-system-like API.</li>
</ul>
<h2 id="using-the-lakefs-sdk">
  
  
    <a href="#using-the-lakefs-sdk" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the lakeFS SDK
  
  
</h2>
    
<h3 id="installing">
  
  
    <a href="#installing" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installing
  
  
</h3>
    

<p>Install the Python client using pip:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>lakefs
</code></pre></div></div>
<h3 id="initializing">
  
  
    <a href="#initializing" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Initializing
  
  
</h3>
    

<p>The High Level SDK by default will try to collect authentication parameters from the environment and attempt to create a default client.
When working in an environment where <strong>lakectl</strong> is configured it is not necessary to instantiate a lakeFS client or provide it for creating the lakeFS objects.
In case no authentication parameters exist, it is also possible to explicitly create a lakeFS client</p>

<p>Here’s how to instantiate a client:</p>

<p class="note">See <a href="/security/external-principals-aws.html#login-with-python">here</a> for instructions on how to log in with Python using your AWS role. This is applicable for enterprise users.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">lakefs.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">clt</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span>
    <span class="n">host</span><span class="o">=</span><span class="s">"http://localhost:8000"</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s">"AKIAIOSFODNN7EXAMPLE"</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s">"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>You can use TLS with a CA that is not trusted on the host by configuring the
client with a CA cert bundle file.  It should contain concatenated CA
certificates in PEM format:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">clt</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span>
    <span class="n">host</span><span class="o">=</span><span class="s">"http://localhost:8000"</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s">"AKIAIOSFODNN7EXAMPLE"</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s">"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"</span><span class="p">,</span>
    <span class="c1"># Customize the CA certificates used to verify the peer.
</span>    <span class="n">ssl_ca_cert</span><span class="o">=</span><span class="s">"path/to/concatenated_CA_certificates.PEM"</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>For testing SSL endpoints you may wish to use a self-signed certificate.  If you do this and receive an <code class="language-plaintext highlighter-rouge">SSL: CERTIFICATE_VERIFY_FAILED</code> error message you might add the following configuration to your client:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">clt</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span>
    <span class="n">host</span><span class="o">=</span><span class="s">"http://localhost:8000"</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s">"AKIAIOSFODNN7EXAMPLE"</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s">"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"</span><span class="p">,</span>
    <span class="n">verify_ssl</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p class="warning">This setting allows well-known “man-in-the-middle”,
impersonation, and credential stealing attacks.  Never use this in any
production setting.</p>

<p>Optionally, to enable communication via proxies, add a proxy configuration:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">clt</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span>
    <span class="n">host</span><span class="o">=</span><span class="s">"http://localhost:8000"</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s">"AKIAIOSFODNN7EXAMPLE"</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s">"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"</span><span class="p">,</span>
    <span class="n">ssl_ca_cert</span><span class="o">=</span><span class="s">"(if needed)"</span><span class="p">,</span>
    <span class="n">proxy</span><span class="o">=</span><span class="s">"&lt;proxy server URL&gt;"</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>
<h3 id="usage-examples">
  
  
    <a href="#usage-examples" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Usage Examples
  
  
</h3>
    

<p>Lets see how we can interact with lakeFS using the High Level SDK.</p>
<h4 id="creating-a-repository">
  
  
    <a href="#creating-a-repository" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a repository
  
  
</h4>
    

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span>

<span class="n">repo</span> <span class="o">=</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">repository</span><span class="p">(</span><span class="s">"example-repo"</span><span class="p">).</span><span class="n">create</span><span class="p">(</span><span class="n">storage_namespace</span><span class="o">=</span><span class="s">"s3://storage-bucket/repos/example-repo"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">repo</span><span class="p">)</span>
</code></pre></div></div>

<p>If using an explicit client, create the Repository object and pass the client to it (note the changed syntax).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span>
<span class="kn">from</span> <span class="nn">lakefs.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">clt</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span>
    <span class="n">host</span><span class="o">=</span><span class="s">"http://localhost:8000"</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s">"AKIAIOSFODNN7EXAMPLE"</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s">"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">repo</span> <span class="o">=</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">Repository</span><span class="p">(</span><span class="s">"example-repo"</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">clt</span><span class="p">).</span><span class="n">create</span><span class="p">(</span><span class="n">storage_namespace</span><span class="o">=</span><span class="s">"s3://storage-bucket/repos/example-repo"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">repo</span><span class="p">)</span>
</code></pre></div></div>
<h4 id="output">
  
  
    <a href="#output" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{id: 'example-repo', creation_date: 1697815536, default_branch: 'main', storage_namespace: 's3://storage-bucket/repos/example-repo'}
</code></pre></div></div>
<h4 id="list-repositories">
  
  
    <a href="#list-repositories" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> List repositories
  
  
</h4>
    

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Listing repositories:"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">repositories</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">repo</span><span class="p">)</span>

</code></pre></div></div>
<h4 id="output-1">
  
  
    <a href="#output-1" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Listing repositories:
{id: 'example-repo', creation_date: 1697815536, default_branch: 'main', storage_namespace: 's3://storage-bucket/repos/example-repo'}
</code></pre></div></div>
<h4 id="creating-a-branch">
  
  
    <a href="#creating-a-branch" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a branch
  
  
</h4>
    

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span>

<span class="n">branch1</span> <span class="o">=</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">repository</span><span class="p">(</span><span class="s">"example-repo"</span><span class="p">).</span><span class="n">branch</span><span class="p">(</span><span class="s">"experiment1"</span><span class="p">).</span><span class="n">create</span><span class="p">(</span><span class="n">source_reference_id</span><span class="o">=</span><span class="s">"main"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"experiment1 ref:"</span><span class="p">,</span> <span class="n">branch1</span><span class="p">.</span><span class="n">get_commit</span><span class="p">().</span><span class="nb">id</span><span class="p">)</span>

<span class="n">branch1</span> <span class="o">=</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">repository</span><span class="p">(</span><span class="s">"example-repo"</span><span class="p">).</span><span class="n">branch</span><span class="p">(</span><span class="s">"experiment2"</span><span class="p">).</span><span class="n">create</span><span class="p">(</span><span class="n">source_reference_id</span><span class="o">=</span><span class="s">"main"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"experiment2 ref:"</span><span class="p">,</span> <span class="n">branch2</span><span class="p">.</span><span class="n">get_commit</span><span class="p">().</span><span class="nb">id</span><span class="p">)</span>
</code></pre></div></div>
<h4 id="output-2">
  
  
    <a href="#output-2" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>experiment1 ref: 7a300b41a8e1ca666c653171a364c08f640549c24d7e82b401bf077c646f8859
experiment2 ref: 7a300b41a8e1ca666c653171a364c08f640549c24d7e82b401bf077c646f8859
</code></pre></div></div>
<h3 id="list-branches">
  
  
    <a href="#list-branches" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> List branches
  
  
</h3>
    

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span>

<span class="k">for</span> <span class="n">branch</span> <span class="ow">in</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">repository</span><span class="p">(</span><span class="s">"example-repo"</span><span class="p">).</span><span class="n">branches</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">branch</span><span class="p">)</span>

</code></pre></div></div>
<h4 id="output-3">
  
  
    <a href="#output-3" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>experiment1
experiment2
main
</code></pre></div></div>
<h2 id="io">
  
  
    <a href="#io" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IO
  
  
</h2>
    

<p>Great, now lets see some IO operations in action!
The new High Level SDK provide IO semantics which allow to work with lakeFS objects as if they were files in your
filesystem. This is extremely useful when working with data transformation packages that accept file descriptors and streams.</p>
<h3 id="upload">
  
  
    <a href="#upload" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Upload
  
  
</h3>
    

<p>A simple way to upload data is to use the <code class="language-plaintext highlighter-rouge">upload</code> method which accepts contents as <code class="language-plaintext highlighter-rouge">str/bytes</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">obj</span> <span class="o">=</span> <span class="n">branch1</span><span class="p">.</span><span class="nb">object</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s">"text/sample_data.txt"</span><span class="p">).</span><span class="n">upload</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s">"text/plain"</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s">"This is my object data"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">stats</span><span class="p">())</span>
</code></pre></div></div>
<h4 id="output-4">
  
  
    <a href="#output-4" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'path': 'text/sample_data.txt', 'physical_address': 's3://storage-bucket/repos/example-repo/data/gke0ignnl531fa6k90p0/ckpfk4fnl531fa6k90pg', 'physical_address_expiry': None, 'checksum': '4a09d10820234a95bb548f14e4435bba', 'size_bytes': 15, 'mtime': 1701865289, 'metadata': {}, 'content_type': 'text/plain'}
</code></pre></div></div>

<p>Reading the data is just as simple:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">reader</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s">'r'</span><span class="p">).</span><span class="n">read</span><span class="p">())</span>
</code></pre></div></div>
<h4 id="output-5">
  
  
    <a href="#output-5" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>This is my object data
</code></pre></div></div>

<p>Now let’s generate a “sample_data.csv” file and write it directly to a lakeFS writer object</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">csv</span>

<span class="n">sample_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">"Alice"</span><span class="p">,</span> <span class="s">"alice@example.com"</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">"Bob"</span><span class="p">,</span> <span class="s">"bob@example.com"</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">"Carol"</span><span class="p">,</span> <span class="s">"carol@example.com"</span><span class="p">],</span>
<span class="p">]</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">branch1</span><span class="p">.</span><span class="nb">object</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s">"csv/sample_data.csv"</span><span class="p">)</span>

<span class="k">with</span> <span class="n">obj</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s">'w'</span><span class="p">,</span> <span class="n">pre_sign</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s">"text/csv"</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
    <span class="n">writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">"ID"</span><span class="p">,</span> <span class="s">"Name"</span><span class="p">,</span> <span class="s">"Email"</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sample_data</span><span class="p">:</span>
        <span class="n">writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</code></pre></div></div>

<p>On context exit the object will be uploaded to lakeFS</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">stats</span><span class="p">())</span>
</code></pre></div></div>
<h4 id="output-6">
  
  
    <a href="#output-6" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'path': 'csv/sample_data.csv', 'physical_address': 's3://storage-bucket/repos/example-repo/data/gke0ignnl531fa6k90p0/ckpfk4fnl531fa6k90pg', 'physical_address_expiry': None, 'checksum': 'f181262c138901a74d47652d5ea72295', 'size_bytes': 88, 'mtime': 1701865939, 'metadata': {}, 'content_type': 'text/csv'}
</code></pre></div></div>

<p>We can also upload raw byte contents:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">obj</span> <span class="o">=</span> <span class="n">branch1</span><span class="p">.</span><span class="nb">object</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s">"raw/file1.data"</span><span class="p">).</span><span class="n">upload</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="sa">b</span><span class="s">"Hello Object World"</span><span class="p">,</span> <span class="n">pre_sign</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">stats</span><span class="p">())</span>
</code></pre></div></div>
<h4 id="output-7">
  
  
    <a href="#output-7" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'path': 'raw/file1.data', 'physical_address': 's3://storage-bucket/repos/example-repo/data/gke0ignnl531fa6k90p0/ckpfltvnl531fa6k90q0', 'physical_address_expiry': None, 'checksum': '0ef432f8eb0305f730b0c57bbd7a6b08', 'size_bytes': 18, 'mtime': 1701866323, 'metadata': {}, 'content_type': 'application/octet-stream'}
</code></pre></div></div>
<h3 id="uncommitted-changes">
  
  
    <a href="#uncommitted-changes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Uncommitted changes
  
  
</h3>
    

<p>Using the branch <code class="language-plaintext highlighter-rouge">uncommmitted</code> method will show all the uncommitted changes on that branch:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">diff</span> <span class="ow">in</span> <span class="n">branch1</span><span class="p">.</span><span class="n">uncommitted</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
</code></pre></div></div>
<h4 id="output-8">
  
  
    <a href="#output-8" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'type': 'added', 'path': 'text/sample_data.txt', 'path_type': 'object', 'size_bytes': 15}
{'type': 'added', 'path': 'csv/sample_data.csv', 'path_type': 'object', 'size_bytes': 88}
{'type': 'added', 'path': 'raw/file1.data', 'path_type': 'object', 'size_bytes': 18}

</code></pre></div></div>

<p>As expected, our change appears here. Let’s commit it and attach some arbitrary metadata:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ref</span> <span class="o">=</span> <span class="n">branch1</span><span class="p">.</span><span class="n">commit</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s">'Add some data!'</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s">'using'</span><span class="p">:</span> <span class="s">'python_sdk'</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="n">ref</span><span class="p">.</span><span class="n">get_commit</span><span class="p">())</span>
</code></pre></div></div>
<h4 id="output-9">
  
  
    <a href="#output-9" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'id': 'c4666db80d2a984b4eab8ce02b6a60830767eba53995c26350e0ad994e15fedb', 'parents': ['a7a092a5a32a2cd97f22abcc99414f6283d29f6b9dd2725ce89f90188c5901e5'], 'committer': 'admin', 'message': 'Add some data!', 'creation_date': 1701866838, 'meta_range_id': '999bedeab1b740f83d2cf8c52548d55446f9038c69724d399adc4438412cade2', 'metadata': {'using': 'python_sdk'}}

</code></pre></div></div>

<p>Calling <code class="language-plaintext highlighter-rouge">uncommitted</code> again on the same branch, this time there should be no uncommitted files:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">branch1</span><span class="p">.</span><span class="n">uncommitted</span><span class="p">())))</span>
</code></pre></div></div>
<h4 id="output-10">
  
  
    <a href="#output-10" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0
</code></pre></div></div>
<h4 id="merging-changes-from-a-branch-into-main">
  
  
    <a href="#merging-changes-from-a-branch-into-main" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Merging changes from a branch into main
  
  
</h4>
    

<p>Let’s diff between your branch and the main branch:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">main</span> <span class="o">=</span> <span class="n">repo</span><span class="p">.</span><span class="n">branch</span><span class="p">(</span><span class="s">"main"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">diff</span> <span class="ow">in</span> <span class="n">main</span><span class="p">.</span><span class="n">diff</span><span class="p">(</span><span class="n">other_ref</span><span class="o">=</span><span class="n">branch1</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
</code></pre></div></div>
<h4 id="output-11">
  
  
    <a href="#output-11" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'type': 'added', 'path': 'text/sample_data.txt', 'path_type': 'object', 'size_bytes': 15}
{'type': 'added', 'path': 'csv/sample_data.csv', 'path_type': 'object', 'size_bytes': 88}
{'type': 'added', 'path': 'raw/file1.data', 'path_type': 'object', 'size_bytes': 18}
</code></pre></div></div>

<p>Looks like we have some changes. Let’s merge them:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res</span> <span class="o">=</span> <span class="n">branch1</span><span class="p">.</span><span class="n">merge_into</span><span class="p">(</span><span class="n">main</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="c1"># output:
# cfddb68b7265ae0b17fafa1a2068f8414395e0a8b8bc0f8d741cbcce1e67e394
</span></code></pre></div></div>

<p>Let’s diff again - there should be no changes as all changes are on our main branch already:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">main</span><span class="p">.</span><span class="n">diff</span><span class="p">(</span><span class="n">other_ref</span><span class="o">=</span><span class="n">branch1</span><span class="p">))))</span>
</code></pre></div></div>
<h4 id="output-12">
  
  
    <a href="#output-12" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0
</code></pre></div></div>
<h3 id="read-data-from-main-branch">
  
  
    <a href="#read-data-from-main-branch" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Read data from main branch
  
  
</h3>
    

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">csv</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">main</span><span class="p">.</span><span class="nb">object</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s">"csv/sample_data.csv"</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csv</span><span class="p">.</span><span class="n">reader</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">reader</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s">'r'</span><span class="p">)):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</code></pre></div></div>
<h4 id="output-13">
  
  
    <a href="#output-13" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['ID', 'Name', 'Email']
['1', 'Alice', 'alice@example.com']
['2', 'Bob', 'bob@example.com']
['3', 'Carol', 'carol@example.com']
</code></pre></div></div>
<h3 id="importing-data-into-lakefs">
  
  
    <a href="#importing-data-into-lakefs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Importing data into lakeFS
  
  
</h3>
    

<p>The new SDK makes it much easier to import existing data from the object store into lakeFS, using the new ImportManager</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span>

<span class="n">branch</span> <span class="o">=</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">repository</span><span class="p">(</span><span class="s">"example-repo"</span><span class="p">).</span><span class="n">repo</span><span class="p">.</span><span class="n">branch</span><span class="p">(</span><span class="s">"experiment3"</span><span class="p">)</span>

<span class="c1"># We can import data from multiple sources in a single import process
# The following example initializes a new ImportManager and adds 2 source types; A prefix and an object.
</span><span class="n">importer</span> <span class="o">=</span> <span class="n">branch</span><span class="p">.</span><span class="n">import_data</span><span class="p">(</span><span class="n">commit_message</span><span class="o">=</span><span class="s">"added public S3 data"</span><span class="p">)</span> \
    <span class="p">.</span><span class="n">prefix</span><span class="p">(</span><span class="s">"s3://example-bucket1/path1/"</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="s">"datasets/path1/"</span><span class="p">)</span> \
    <span class="p">.</span><span class="nb">object</span><span class="p">(</span><span class="s">"s3://example-bucket1/path2/imported_obj"</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="s">"datasets/path2/imported_obj"</span><span class="p">)</span>

<span class="c1"># run() is a convenience method that blocks until the import is reported as done, raising an exception if it fails.
</span><span class="n">importer</span><span class="p">.</span><span class="n">run</span><span class="p">()</span>

</code></pre></div></div>

<p>Alternatively we can call <code class="language-plaintext highlighter-rouge">start()</code> and <code class="language-plaintext highlighter-rouge">status()</code> ourselves for an async version of the above</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Async version
</span><span class="n">importer</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">importer</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

<span class="k">while</span> <span class="ow">not</span> <span class="n">status</span><span class="p">.</span><span class="n">completed</span> <span class="ow">or</span> <span class="n">status</span><span class="p">.</span><span class="n">error</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># or whatever interval you choose
</span>        <span class="n">status</span> <span class="o">=</span> <span class="n">importer</span><span class="p">.</span><span class="n">status</span><span class="p">()</span>

<span class="k">if</span> <span class="n">status</span><span class="p">.</span><span class="n">error</span><span class="p">:</span>
    <span class="c1"># handle!
</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"imported a total of </span><span class="si">{</span><span class="n">status</span><span class="p">.</span><span class="n">ingested_objects</span><span class="si">}</span><span class="s"> objects!"</span><span class="p">)</span>

</code></pre></div></div>
<h4 id="output-14">
  
  
    <a href="#output-14" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>imported a total of 25478 objects!
</code></pre></div></div>
<h3 id="transactions">
  
  
    <a href="#transactions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Transactions
  
  
</h3>
    

<p>Transactions is a new feature in the High Level SDK. It allows performing a sequence of operations on a branch as an atomic unit, similarly to how database transactions work.
Under the hood, the transaction creates an ephemeral branch from the source branch, performs all the operation on that branch, and merges it back to the source branch once the transaction is completed.
Transactions are currently supported as a context manager only.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span>

<span class="n">branch</span> <span class="o">=</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">repository</span><span class="p">(</span><span class="s">"example-repo"</span><span class="p">).</span><span class="n">repo</span><span class="p">.</span><span class="n">branch</span><span class="p">(</span><span class="s">"experiment3"</span><span class="p">)</span>

<span class="k">with</span> <span class="n">branch</span><span class="p">.</span><span class="n">transact</span><span class="p">(</span><span class="n">commit_message</span><span class="o">=</span><span class="s">"my transaction"</span><span class="p">)</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">tx</span><span class="p">.</span><span class="n">objects</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">"prefix_to_delete/"</span><span class="p">):</span>  <span class="c1"># Delete some objects
</span>        <span class="n">obj</span><span class="p">.</span><span class="n">delete</span><span class="p">()</span>

    <span class="c1"># Create new object
</span>    <span class="n">tx</span><span class="p">.</span><span class="nb">object</span><span class="p">(</span><span class="s">"new_object"</span><span class="p">).</span><span class="n">upload</span><span class="p">(</span><span class="s">"new object data"</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">branch</span><span class="p">.</span><span class="n">objects</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">"prefix_to_delete/"</span><span class="p">))))</span>
<span class="k">print</span><span class="p">(</span><span class="n">branch</span><span class="p">.</span><span class="nb">object</span><span class="p">(</span><span class="s">"new_object"</span><span class="p">).</span><span class="n">exists</span><span class="p">())</span>
</code></pre></div></div>
<h4 id="output-15">
  
  
    <a href="#output-15" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0
True
</code></pre></div></div>
<h3 id="python-sdk-documentation-and-api-reference">
  
  
    <a href="#python-sdk-documentation-and-api-reference" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Python SDK documentation and API reference
  
  
</h3>
    

<p>For the documentation of lakeFS’s Python package and full api reference, see <a href="https://pydocs-lakefs.lakefs.io">https://pydocs-lakefs.lakefs.io</a></p>
<h2 id="using-lakefs-spec-for-higher-level-file-operations">
  
  
    <a href="#using-lakefs-spec-for-higher-level-file-operations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using lakefs-spec for higher-level file operations
  
  
</h2>
    

<p>The <a href="https://lakefs-spec.org/latest/">lakefs-spec</a> project
provides higher-level file operations on lakeFS objects with a filesystem API,
built on the <a href="https://github.com/fsspec/filesystem_spec">fsspec</a> project.</p>

<p class="note"><strong>Note</strong> This library is a third-party package and not maintained by the lakeFS developers; please file issues and bug reports directly
in the <a href="https://github.com/aai-institute/lakefs-spec">lakefs-spec</a> repository.</p>
<h3 id="installation">
  
  
    <a href="#installation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation
  
  
</h3>
    

<p>Install <code class="language-plaintext highlighter-rouge">lakefs-spec</code> directly with <code class="language-plaintext highlighter-rouge">pip</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m pip install --upgrade lakefs-spec
</code></pre></div></div>
<h3 id="interacting-with-lakefs-through-a-file-system">
  
  
    <a href="#interacting-with-lakefs-through-a-file-system" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Interacting with lakeFS through a file system
  
  
</h3>
    

<p>To write a file directly to a branch in a lakeFS repository, consider the following example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">lakefs_spec</span> <span class="kn">import</span> <span class="n">LakeFSFileSystem</span>

<span class="n">REPO</span><span class="p">,</span> <span class="n">BRANCH</span> <span class="o">=</span> <span class="s">"example-repo"</span><span class="p">,</span> <span class="s">"main"</span>

<span class="c1"># Prepare a local example file.
</span><span class="n">lpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s">"demo.txt"</span><span class="p">)</span>
<span class="n">lpath</span><span class="p">.</span><span class="n">write_text</span><span class="p">(</span><span class="s">"Hello, lakeFS!"</span><span class="p">)</span>

<span class="n">fs</span> <span class="o">=</span> <span class="n">LakeFSFileSystem</span><span class="p">()</span>  <span class="c1"># will auto-discover credentials from ~/.lakectl.yaml
</span><span class="n">rpath</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">REPO</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">BRANCH</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">lpath</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span>
<span class="n">fs</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">lpath</span><span class="p">,</span> <span class="n">rpath</span><span class="p">)</span>
</code></pre></div></div>

<p>Reading it again from remote is as easy as the following:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f</span> <span class="o">=</span> <span class="n">fs</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="n">rpath</span><span class="p">,</span> <span class="s">"rt"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">readline</span><span class="p">())</span>  <span class="c1"># prints "Hello, lakeFS!"
</span></code></pre></div></div>

<p>Many more operations like retrieving an object’s metadata or checking an
object’s existence on the lakeFS server are also supported. For a full list,
see the <a href="https://lakefs-spec.org/latest/reference/lakefs_spec/">API reference</a>.</p>
<h3 id="integrations-with-popular-data-science-packages">
  
  
    <a href="#integrations-with-popular-data-science-packages" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Integrations with popular data science packages
  
  
</h3>
    

<p>A number of Python data science projects support fsspec, with <a href="https://pandas.pydata.org/">pandas</a> being a prominent example. Reading a Parquet file from a lakeFS repository into a Pandas data frame for analysis is very easy, demonstrated on the quickstart repository sample data:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># Read into pandas directly by supplying the lakeFS URI...
</span><span class="n">lakes</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="sa">f</span><span class="s">"lakefs://quickstart/main/lakes.parquet"</span><span class="p">)</span>
<span class="n">german_lakes</span> <span class="o">=</span> <span class="n">lakes</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="s">'Country == "Germany"'</span><span class="p">)</span>
<span class="c1"># ... and store directly, again with a raw lakeFS URI.
</span><span class="n">german_lakes</span><span class="p">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">f</span><span class="s">"lakefs://quickstart/main/german_lakes.csv"</span><span class="p">)</span>
</code></pre></div></div>

<p>A list of integrations with popular data science libraries can be found in the <a href="https://lakefs-spec.org/latest/guides/integrations/">lakefs-spec documentation</a>.</p>
<h3 id="using-transactions-for-atomic-versioning-operations">
  
  
    <a href="#using-transactions-for-atomic-versioning-operations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using transactions for atomic versioning operations
  
  
</h3>
    

<p>As with the high-level SDK (see above), lakefs-spec also supports transactions
for conducting versioning operations on newly modified files. The following is an example of creating a commit on the repository’s main branch directly after a file upload:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">lakefs_spec</span> <span class="kn">import</span> <span class="n">LakeFSFileSystem</span>

<span class="n">fs</span> <span class="o">=</span> <span class="n">LakeFSFileSystem</span><span class="p">()</span>

<span class="c1"># assumes you have a local train-test split as two text files:
# train-data.txt, and test-data.txt.
</span><span class="k">with</span> <span class="n">fs</span><span class="p">.</span><span class="n">transaction</span><span class="p">(</span><span class="s">"example-repo"</span><span class="p">,</span> <span class="s">"main"</span><span class="p">)</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="n">fs</span><span class="p">.</span><span class="n">put_file</span><span class="p">(</span><span class="s">"train-data.txt"</span><span class="p">,</span> <span class="sa">f</span><span class="s">"example-repo/</span><span class="si">{</span><span class="n">tx</span><span class="p">.</span><span class="n">branch</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">/train-data.txt"</span><span class="p">)</span>
    <span class="n">tx</span><span class="p">.</span><span class="n">commit</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s">"Add training data"</span><span class="p">)</span>
    <span class="n">fs</span><span class="p">.</span><span class="n">put_file</span><span class="p">(</span><span class="s">"test-data.txt"</span><span class="p">,</span> <span class="sa">f</span><span class="s">"example-repo/</span><span class="si">{</span><span class="n">tx</span><span class="p">.</span><span class="n">branch</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">/test-data.txt"</span><span class="p">)</span>
    <span class="n">sha</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">commit</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s">"Add test data"</span><span class="p">)</span>
    <span class="n">tx</span><span class="p">.</span><span class="n">tag</span><span class="p">(</span><span class="n">sha</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">"My train-test split"</span><span class="p">)</span>
</code></pre></div></div>

<p>Transactions are atomic - if an exception happens at any point of the transaction, the repository remains unchanged.</p>
<h3 id="further-information">
  
  
    <a href="#further-information" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Further information
  
  
</h3>
    

<p>For more user guides, tutorials on integrations with data science tools like pandas, and more, check out the <a href="https://lakefs-spec.org/latest/">lakefs-spec documentation</a>.</p>
<h2 id="using-boto">
  
  
    <a href="#using-boto" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Boto
  
  
</h2>
    

<p class="note">💡 To use Boto with lakeFS alongside S3, check out <a href="https://github.com/treeverse/boto-s3-router" target="_blank">Boto S3 Router</a>. It will route
requests to either S3 or lakeFS according to the provided bucket name.</p>

<p>lakeFS exposes an S3-compatible API, so you can use Boto to interact with your objects on lakeFS.</p>
<h3 id="initializing-1">
  
  
    <a href="#initializing-1" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Initializing
  
  
</h3>
    

<p>Create a Boto3 S3 client with your lakeFS endpoint and key-pair:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">boto3</span>
<span class="n">s3</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="n">client</span><span class="p">(</span><span class="s">'s3'</span><span class="p">,</span>
    <span class="n">endpoint_url</span><span class="o">=</span><span class="s">'https://lakefs.example.com'</span><span class="p">,</span>
    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="s">'AKIAIOSFODNN7EXAMPLE'</span><span class="p">,</span>
    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="s">'wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY'</span><span class="p">)</span>
</code></pre></div></div>

<p>The client is now configured to operate on your lakeFS installation.</p>
<h3 id="usage-examples-1">
  
  
    <a href="#usage-examples-1" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Usage Examples
  
  
</h3>
    
<h4 id="put-an-object-into-lakefs">
  
  
    <a href="#put-an-object-into-lakefs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Put an object into lakeFS
  
  
</h4>
    

<p>Use a branch name and a path to put an object in lakeFS:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'/local/path/to/file_0'</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">s3</span><span class="p">.</span><span class="n">put_object</span><span class="p">(</span><span class="n">Body</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">Bucket</span><span class="o">=</span><span class="s">'example-repo'</span><span class="p">,</span> <span class="n">Key</span><span class="o">=</span><span class="s">'main/example-file.parquet'</span><span class="p">)</span>
</code></pre></div></div>

<p>You can now commit this change using the lakeFS UI or CLI.</p>
<h4 id="list-objects">
  
  
    <a href="#list-objects" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> List objects
  
  
</h4>
    

<p>List the branch objects starting with a prefix:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list_resp</span> <span class="o">=</span> <span class="n">s3</span><span class="p">.</span><span class="n">list_objects_v2</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="s">'example-repo'</span><span class="p">,</span> <span class="n">Prefix</span><span class="o">=</span><span class="s">'main/example-prefix'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">list_resp</span><span class="p">[</span><span class="s">'Contents'</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s">'Key'</span><span class="p">])</span>
</code></pre></div></div>

<p>Or, use a lakeFS commit ID to list objects for a specific commit:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list_resp</span> <span class="o">=</span> <span class="n">s3</span><span class="p">.</span><span class="n">list_objects_v2</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="s">'example-repo'</span><span class="p">,</span> <span class="n">Prefix</span><span class="o">=</span><span class="s">'c7a632d74f/example-prefix'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">list_resp</span><span class="p">[</span><span class="s">'Contents'</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s">'Key'</span><span class="p">])</span>
</code></pre></div></div>
<h4 id="get-object-metadata">
  
  
    <a href="#get-object-metadata" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get object metadata
  
  
</h4>
    

<p>Get object metadata using branch and path:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">s3</span><span class="p">.</span><span class="n">head_object</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="s">'example-repo'</span><span class="p">,</span> <span class="n">Key</span><span class="o">=</span><span class="s">'main/example-file.parquet'</span><span class="p">)</span>
<span class="c1"># output:
# {'ResponseMetadata': {'RequestId': '72A9EBD1210E90FA',
#  'HostId': '',
#  'HTTPStatusCode': 200,
#  'HTTPHeaders': {'accept-ranges': 'bytes',
#   'content-length': '1024',
#   'etag': '"2398bc5880e535c61f7624ad6f138d62"',
#   'last-modified': 'Sun, 24 May 2020 10:42:24 GMT',
#   'x-amz-request-id': '72A9EBD1210E90FA',
#   'date': 'Sun, 24 May 2020 10:45:42 GMT'},
#  'RetryAttempts': 0},
# 'AcceptRanges': 'bytes',
# 'LastModified': datetime.datetime(2020, 5, 24, 10, 42, 24, tzinfo=tzutc()),
# 'ContentLength': 1024,
# 'ETag': '"2398bc5880e535c61f7624ad6f138d62"',
# 'Metadata': {}}
</span></code></pre></div></div>

                

                
                

                

            </div>
        </div>

        
        

        <div class="search-overlay"></div>
        
    </div>
</div>

<footer>
    <div class="footer-sidebar"></div>
    <div class="footer-main">
        <div class="row">
            <div class="left">
                <ul class="footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs.lakefs.io/" class="site-button" >
                            Docs
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/blog/" class="site-button" >
                            Blog
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                            GitHub
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/community/" class="site-button" >
                            Community
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/cloud-registration/" class="site-button" >
                            lakeFS Cloud
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/contact-us/" class="site-button" >
                            Contact
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
            <div class="right">
                <ul class="footer-social">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/youtube" class="site-button" >
                            <img src="/assets/icons/youtube.svg" class="no-hover" />
                            <img src="/assets/icons/youtube-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://www.linkedin.com/company/treeverse" class="site-button" >
                            <img src="/assets/icons/linkedin.svg" class="no-hover" />
                            <img src="/assets/icons/linkedin-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                            <img src="/assets/icons/github.svg" class="no-hover" />
                            <img src="/assets/icons/github-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://twitter.com/lakeFS" class="site-button" >
                            <img src="/assets/icons/twitter.svg" class="no-hover" />
                            <img src="/assets/icons/twitter-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://data-folks.masto.host/@lakeFS" class="site-button" >
                            <img src="/assets/icons/mastodon.svg" class="no-hover" />
                            <img src="/assets/icons/mastodon-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/slack" class="site-button" >
                            <img src="/assets/icons/slack.svg" class="no-hover" />
                            <img src="/assets/icons/slack-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row top-border">
            <div class="left">
                <a href="https://lakefs.io" class="lh-tight" style="margin-bottom: 0px;">
                    <div class="site-logo"></div>
                </a>                    
            </div>
            <div class="right">
                <ul class="bottom-footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/terms-of-use/" class="site-button" >
                            Terms of use
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/privacy-policy/" class="site-button" >
                            Privacy Policy
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
    </div>
</footer>


</body>

</html>

