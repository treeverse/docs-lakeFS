

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/assets/css/just-the-docs-default.css">
  
  <style type="text/css">
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(4) > .nav-list > .nav-list-item:nth-child(20) > .nav-list-link { display: block; font-weight: 600; text-decoration: none; background-image: linear-gradient(-90deg, #ebedf5 0%, rgba(235, 237, 245, 0.8) 80%, rgba(235, 237, 245, 0) 100%); }

.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list > .nav-list-item:not(.passive):nth-child(20) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(4) > .nav-list > .nav-list-item:not(.passive):nth-child(20) > .nav-list { display: block; }

.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list { display: block; }

</style>


  

  
    <script src="/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="icon" href="/favicon.ico" type="image/x-icon">



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>MLflow | lakeFS Documentation</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="MLflow" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to use MLflow with lakeFS" />
<meta property="og:description" content="How to use MLflow with lakeFS" />
<meta property="og:site_name" content="lakeFS Documentation" />
<meta property="og:image" content="https://docs.lakefs.io/assets/img/docs_logo.png" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://docs.lakefs.io/assets/img/docs_logo.png" />
<meta property="twitter:title" content="MLflow" />
<meta name="twitter:site" content="@lakeFS" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"How to use MLflow with lakeFS","headline":"MLflow","image":"https://docs.lakefs.io/assets/img/docs_logo.png","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/logo.svg"}},"url":"/integrations/mlflow.html"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Google Tag Manager Head -->
<!-- type="text/plain" is intentional for cookie consent support -->
<script type="text/plain" data-category="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KTZBZW9');</script>
<!-- End Google Tag Manager Head -->

<meta property="og:image" content="/assets/img/lakefs-logo-with-text.png">
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/fontawesome.min.css" integrity="sha512-giQeaPns4lQTBMRpOOHsYnGw1tGVzbAIHUyHRgn7+6FmiEgGGjaG0T2LZJmAPMzRCl+Cug0ItQ2xDZpTmEc+CQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<link rel="stylesheet" href="/assets/css/cookieconsent.css" />
<script type="module" src="/assets/js/cookieconsent-init.js"></script>
<script src="/assets/js/copy-code.js"></script>
<script>
    $(function () {
        $(".tabs").tabs();
    });
</script>
<script src="/assets/js/feedback.js"></script>


</head>

<script src="https://unpkg.com/mermaid@9.3.0/dist/mermaid.min.js"></script>
<script>
    $(document).ready(function () {
        mermaid.initialize({
            startOnLoad:true,
            theme: "default",
        });
        window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
    });
</script>
<body>
<img src="/assets/img/cookies.png" style="display: none;">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTZBZW9"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-link">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-search">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="16px" viewBox="0 0 20 16" version="1.1"
             class="feather feather-menu">
            <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="header-/-mobile" transform="translate(-30.000000, -32.000000)" fill="#279890">
                    <g id="Group" transform="translate(30.000000, 32.000000)">
                        <path
                                d="M20,14 L20,16 L0,16 L0,14 L20,14 Z M20,7 L20,9 L0,9 L0,7 L20,7 Z M20,0 L20,2 L0,2 L0,0 L20,0 Z"
                                id="mobile-menu" />
                    </g>
                </g>
            </g>
        </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-chevron-right">
            <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-file">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
            <polyline points="13 2 13 9 20 9"></polyline>
        </svg>
    </symbol>
</svg>
<div class="body-wrapper">
    <div class="side-bar">
        <div class="site-header">
            <a href="https://lakefs.io" class="site-title lh-tight">
  <div class="site-logo" role="img" aria-label="lakeFS Documentation"></div>

</a>
            <a href="#" id="menu-button" class="site-button">
                <svg viewBox="0 0 24 24" class="icon">
                    <use xlink:href="#svg-menu"></use>
                </svg>
            </a>
        </div>
        <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
            
            <div class="search">
                <div class="search-input-wrap">
                    <input type="text" id="search-input" class="search-input" tabindex="0"
                           placeholder="Search lakeFS Documentation" aria-label="Search lakeFS Documentation"
                           autocomplete="off">
                    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon">
                            <use xlink:href="#svg-search"></use>
                        </svg></label>
                </div>
                <div id="search-results" class="search-results"></div>
            </div>
            

            <div class="nav-category nav-version">
                <label for="selectversion">Version:</label>
                <select id="selectversion" name="version" onchange="javascript:location.href = '/' + encodeURI(this.value);">
                    <option value="" selected>Latest</option>
                </select>
            </div>
            <script async>
                window.addEventListener("load",  async () => {
                    const pathFirstLevel = location.pathname.split('/')[1];
                    const selectedVersion = pathFirstLevel.startsWith('v') && pathFirstLevel || '';
                    const selectVersionElmFirst = document.getElementById('selectversion').firstElementChild;
                    const response = await fetch('/versions.json');
                    if (!response.ok) {
                        return
                    }
                    const versions = await response.json();
                    for (let [key, value] of Object.entries(versions)) {
                        const el = document.createElement("option");
                        el.value = key;
                        el.textContent = value;
                        if (key === selectedVersion) {
                            el.selected = true;
                        }
                        selectVersionElmFirst.after(el);
                    }
                });
            </script>

            <ul class="nav-list"><li
            class="nav-list-item"><a href="/"
           class="nav-list-link">Welcome to lakeFS</a></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/quickstart/"
           class="nav-list-link">⭐ Quickstart</a><ul class="nav-list "><li class="nav-list-item "><a href="/quickstart/launch.html"
                   class="nav-list-link">1️⃣ Run lakeFS</a></li><li class="nav-list-item "><a href="/quickstart/query.html"
                   class="nav-list-link">2️⃣ Query the data</a></li><li class="nav-list-item "><a href="/quickstart/branch.html"
                   class="nav-list-link">3️⃣ Create a branch</a></li><li class="nav-list-item "><a href="/quickstart/commit-and-merge.html"
                   class="nav-list-link">4️⃣ Commit and Merge</a></li><li class="nav-list-item "><a href="/quickstart/rollback.html"
                   class="nav-list-link">5️⃣ Roll back Changes</a></li><li class="nav-list-item "><a href="/quickstart/actions-and-hooks.html"
                   class="nav-list-link">6️⃣ Using Actions and Hooks in lakeFS</a></li><li class="nav-list-item "><a href="/quickstart/work-with-data-locally.html"
                   class="nav-list-link">7️⃣ Work with lakeFS data locally</a></li><li class="nav-list-item "><a href="/quickstart/learning-more-lakefs.html"
                   class="nav-list-link">Learn more about lakeFS</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/howto/"
           class="nav-list-link">How-To</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/howto/deploy/"
                   class="nav-list-link">Install lakeFS</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/howto/deploy/aws.html"
                           class="nav-list-link">AWS</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/azure.html"
                           class="nav-list-link">Azure</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/gcp.html"
                           class="nav-list-link">GCP</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/onprem.html"
                           class="nav-list-link">On-Premises</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/deploy/upgrade.html"
                           class="nav-list-link">Upgrade lakeFS</a>
                    </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/howto/hooks/"
                   class="nav-list-link">Actions and Hooks</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/howto/hooks/airflow.html"
                           class="nav-list-link">Airflow Hooks</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/hooks/lua.html"
                           class="nav-list-link">Lua Hooks</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/hooks/webhooks.html"
                           class="nav-list-link">Webhooks</a>
                    </li></ul></li><li class="nav-list-item "><a href="/howto/backup-and-restore.html"
                   class="nav-list-link">Backup and Restore Repository</a></li><li class="nav-list-item "><a href="/howto/protect-branches.html"
                   class="nav-list-link">Branch Protection</a></li><li class="nav-list-item "><a href="/howto/copying.html"
                   class="nav-list-link">Copying data to/from lakeFS</a></li><li class="nav-list-item "><a href="/howto/catalog_exports.html"
                   class="nav-list-link">Data Catalogs Exports</a></li><li class="nav-list-item "><a href="/howto/export.html"
                   class="nav-list-link">Export Data</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/howto/garbage-collection/"
                   class="nav-list-link">Garbage Collection</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/howto/garbage-collection/gc.html"
                           class="nav-list-link">Garbage Collection</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/garbage-collection/managed-gc.html"
                           class="nav-list-link">Managed Garbage Collection</a>
                    </li><li class="nav-list-item ">
                        <a href="/howto/garbage-collection/standalone-gc.html"
                           class="nav-list-link">Standalone Garbage Collection</a>
                    </li></ul></li><li class="nav-list-item "><a href="/howto/import.html"
                   class="nav-list-link">Import Data</a></li><li class="nav-list-item "><a href="/howto/migrate-away.html"
                   class="nav-list-link">Migrating away from lakeFS</a></li><li class="nav-list-item "><a href="/howto/mirroring.html"
                   class="nav-list-link">Mirroring</a></li><li class="nav-list-item "><a href="/howto/multiple-storage-backends.html"
                   class="nav-list-link">Multiple Storage Backend</a></li><li class="nav-list-item "><a href="/howto/private-link.html"
                   class="nav-list-link">Private Link</a></li><li class="nav-list-item "><a href="/howto/pull-requests.html"
                   class="nav-list-link">Pull Requests</a></li><li class="nav-list-item "><a href="/howto/virtual-host-addressing.html"
                   class="nav-list-link">S3 Virtual-host addressing (advanced)</a></li><li class="nav-list-item "><a href="/howto/sizing-guide.html"
                   class="nav-list-link">Sizing Guide</a></li><li class="nav-list-item "><a href="/howto/scim.html"
                   class="nav-list-link">System for Cross-domain Identity Management (SCIM)</a></li><li class="nav-list-item "><a href="/howto/local-checkouts.html"
                   class="nav-list-link">Work with lakeFS data locally</a></li><li class="nav-list-item "><a href="/howto/lakefs-tables.html"
                   class="nav-list-link">lakeFS Tables</a></li></ul></li><li
            class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/integrations/"
           class="nav-list-link">Integrations</a><ul class="nav-list "><li class="nav-list-item "><a href="/integrations/aws_cli.html"
                   class="nav-list-link">AWS CLI</a></li><li class="nav-list-item "><a href="/integrations/airbyte.html"
                   class="nav-list-link">Airbyte</a></li><li class="nav-list-item "><a href="/integrations/athena.html"
                   class="nav-list-link">Amazon Athena</a></li><li class="nav-list-item "><a href="/integrations/sagemaker.html"
                   class="nav-list-link">Amazon SageMaker</a></li><li class="nav-list-item "><a href="/integrations/airflow.html"
                   class="nav-list-link">Apache Airflow</a></li><li class="nav-list-item "><a href="/integrations/hive.html"
                   class="nav-list-link">Apache Hive</a></li><li class="nav-list-item "><a href="/integrations/iceberg.html"
                   class="nav-list-link">Apache Iceberg</a></li><li class="nav-list-item "><a href="/integrations/kafka.html"
                   class="nav-list-link">Apache Kafka</a></li><li class="nav-list-item "><a href="/integrations/spark.html"
                   class="nav-list-link">Apache Spark</a></li><li class="nav-list-item "><a href="/integrations/cloudera.html"
                   class="nav-list-link">Cloudera</a></li><li class="nav-list-item "><a href="/integrations/databricks.html"
                   class="nav-list-link">Databricks</a></li><li class="nav-list-item "><a href="/integrations/delta.html"
                   class="nav-list-link">Delta Lake</a></li><li class="nav-list-item "><a href="/integrations/dremio.html"
                   class="nav-list-link">Dremio</a></li><li class="nav-list-item "><a href="/integrations/duckdb.html"
                   class="nav-list-link">DuckDB</a></li><li class="nav-list-item "><a href="/integrations/git.html"
                   class="nav-list-link">Git</a></li><li class="nav-list-item "><a href="/integrations/glue_hive_metastore.html"
                   class="nav-list-link">Glue / Hive metastore</a></li><li class="nav-list-item "><a href="/integrations/glue_metastore.html"
                   class="nav-list-link">Glue Data Catalog</a></li><li class="nav-list-item "><a href="/integrations/huggingface_datasets.html"
                   class="nav-list-link">HuggingFace Datasets</a></li><li class="nav-list-item "><a href="/integrations/kubeflow.html"
                   class="nav-list-link">Kubeflow</a></li><li class="nav-list-item  active"><a href="/integrations/mlflow.html"
                   class="nav-list-link active">MLflow</a></li><li class="nav-list-item "><a href="/integrations/presto_trino.html"
                   class="nav-list-link">Presto / Trino</a></li><li class="nav-list-item "><a href="/integrations/python.html"
                   class="nav-list-link">Python</a></li><li class="nav-list-item "><a href="/integrations/r.html"
                   class="nav-list-link">R</a></li><li class="nav-list-item "><a href="/integrations/red_hat_openshift_ai.html"
                   class="nav-list-link">Red Hat OpenShift AI</a></li><li class="nav-list-item "><a href="/integrations/unity-catalog.html"
                   class="nav-list-link">Unity Catalog</a></li><li class="nav-list-item "><a href="/integrations/vertex_ai.html"
                   class="nav-list-link">Vertex AI</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/understand/"
           class="nav-list-link">Understanding lakeFS</a><ul class="nav-list "><li class="nav-list-item "><a href="/understand/architecture.html"
                   class="nav-list-link">Architecture</a></li><li class="nav-list-item "><a href="/understand/model.html"
                   class="nav-list-link">Concepts and  Model</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/understand/data_lifecycle_management/"
                   class="nav-list-link">Data Lifecycle Management</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/understand/data_lifecycle_management/ci.html"
                           class="nav-list-link">During Deployment</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/data_lifecycle_management/production.html"
                           class="nav-list-link">In Production</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/data_lifecycle_management/data-devenv.html"
                           class="nav-list-link">In Test</a>
                    </li></ul></li><li class="nav-list-item "><a href="/understand/data-structure.html"
                   class="nav-list-link">Data Structure</a></li><li class="nav-list-item "><a href="/understand/faq.html"
                   class="nav-list-link">FAQ</a></li><li class="nav-list-item "><a href="/understand/glossary.html"
                   class="nav-list-link">Glossary</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/understand/how/"
                   class="nav-list-link">How lakeFS Works</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/understand/how/kv.html"
                           class="nav-list-link">Internal database structure</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/how/merge.html"
                           class="nav-list-link">Merge</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/how/versioning-internals.html"
                           class="nav-list-link">Versioning Internals</a>
                    </li></ul></li><li class="nav-list-item "><a href="/understand/performance-best-practices.html"
                   class="nav-list-link">Performance Best Practices</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/understand/use_cases/"
                   class="nav-list-link">Use Cases</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/understand/use_cases/cicd_for_data.html"
                           class="nav-list-link">CI/CD for Data Lakes</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/use_cases/etl_testing.html"
                           class="nav-list-link">ETL Testing Environment</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/use_cases/reproducibility.html"
                           class="nav-list-link">Reproducibility</a>
                    </li><li class="nav-list-item ">
                        <a href="/understand/use_cases/rollback.html"
                           class="nav-list-link">Rollback</a>
                    </li></ul></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/reference/"
           class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/reference/auditing.html"
                   class="nav-list-link">Auditing</a></li><li class="nav-list-item "><a href="/reference/monitor.html"
                   class="nav-list-link">Monitoring using Prometheus</a></li><li class="nav-list-item "><a href="/reference/s3.html"
                   class="nav-list-link">S3 Gateway API</a></li><li class="nav-list-item "><a href="/reference/spark-client.html"
                   class="nav-list-link">Spark Client</a></li><li class="nav-list-item "><a href="/reference/api.html"
                   class="nav-list-link">lakeFS API</a></li><li class="nav-list-item "><a href="/reference/configuration.html"
                   class="nav-list-link">lakeFS Server Configuration</a></li><li class="nav-list-item "><a href="/reference/cli.html"
                   class="nav-list-link">lakectl (lakeFS command-line tool)</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/project/"
           class="nav-list-link">The lakeFS Project</a><ul class="nav-list "><li class="nav-list-item "><a href="/project/contributing.html"
                   class="nav-list-link">Contributing to lakeFS</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/project/docs/"
                   class="nav-list-link">Documentation</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/project/docs/callouts.html"
                           class="nav-list-link">Callouts</a>
                    </li></ul></li><li class="nav-list-item "><a href="/project/code-migrate-1.0-sdk.html"
                   class="nav-list-link">Migrating to 1.0</a></li></ul></li><li
            class="nav-list-item"><a href="/cloud/"
           class="nav-list-link">lakeFS Cloud</a></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/enterprise/"
           class="nav-list-link">lakeFS Enterprise</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/enterprise/getstarted/"
                   class="nav-list-link">Get Started</a><ul class="nav-list"><li class="nav-list-item ">
                        <a href="/enterprise/getstarted/quickstart.html"
                           class="nav-list-link">Quickstart</a>
                    </li><li class="nav-list-item ">
                        <a href="/enterprise/getstarted/install.html"
                           class="nav-list-link">Install</a>
                    </li><li class="nav-list-item ">
                        <a href="/enterprise/getstarted/migrate-from-oss.html"
                           class="nav-list-link">Migrate from lakeFS OSS</a>
                    </li></ul></li><li class="nav-list-item "><a href="/enterprise/upgrade.html"
                   class="nav-list-link">Upgrade</a></li><li class="nav-list-item "><a href="/enterprise/troubleshooting.html"
                   class="nav-list-link">Troubleshooting lakeFS Enterprise</a></li><li class="nav-list-item "><a href="/enterprise/configuration.html"
                   class="nav-list-link">Configuration Reference</a></li><li class="nav-list-item "><a href="/enterprise/architecture.html"
                   class="nav-list-link">Architecture</a></li></ul></li><li
            class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/security/"
           class="nav-list-link">Security</a><ul class="nav-list "><li class="nav-list-item "><a href="/security/access-control-lists.html"
                   class="nav-list-link">Access Control Lists (ACLs) -Deprecated-</a></li><li class="nav-list-item "><a href="/security/authentication.html"
                   class="nav-list-link">Authentication</a></li><li class="nav-list-item "><a href="/security/external-principals-aws.html"
                   class="nav-list-link">Login to lakeFS with AWS IAM Roles</a></li><li class="nav-list-item "><a href="/security/presigned-url.html"
                   class="nav-list-link">Presigned URLs</a></li><li class="nav-list-item "><a href="/security/remote-authenticator.html"
                   class="nav-list-link">Remote Authenticator</a></li><li class="nav-list-item "><a href="/security/rbac.html"
                   class="nav-list-link">Role-Based Access Control (RBAC)</a></li><li class="nav-list-item "><a href="/security/sts-login.html"
                   class="nav-list-link">Short-lived token (STS like) Authentication for lakeFS</a></li><li class="nav-list-item "><a href="/security/sso.html"
                   class="nav-list-link">Single Sign On (SSO)</a></li></ul></li></ul>
            <div class="mobile-menu">
                
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

            </div>
        </nav>

    </div>
    <div class="main" id="top">
         <div class="feedback-container">
            <div id="is-helpful-ty">
                <div class="text-epsilon">Thank you for your feedback.</div>
                <div class="mt-2 text-epsilon">
                    <a href="https://lakefs.io/slack" target="_blank">Join the community</a> to get more help.
                </div>
            </div>
            <div class="feedback-buttons">
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-up" id="page-helpful-yes"></button>
                    <span class="tooltiptext">
                        This page is <b>helpful</b>
                    </span>
                </span>
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-down" id="page-helpful-no"></button>
                    <span class="tooltiptext">
                        This page is <b>not helpful</b>
                    </span>
                </span>
            </div>
        </div>
        <div id="main-header" class="main-header">
            
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                GitHub
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

        </div>
        <div id="main-content-wrap" class="main-content-wrap">
            
            
            <nav aria-label="Breadcrumb" class="breadcrumb-nav">
                <ol class="breadcrumb-nav-list">
                    
                    <li class="breadcrumb-nav-list-item"><a href="/integrations/">Integrations</a>
                    </li>
                    
                    <li class="breadcrumb-nav-list-item"><span>MLflow</span></li>
                </ol>
            </nav>
            
            
            <div id="main-content" class="main-content" role="main">
                
                    <h1 id="using-mlflow-with-lakefs">
  
  
    <a href="#using-mlflow-with-lakefs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using MLflow with lakeFS
  
  
</h1>
    

<p><a href="https://mlflow.org/docs/latest/index.html">MLflow</a> is a comprehensive tool designed to manage the machine learning lifecycle,
assisting practitioners and teams in handling the complexities of ML processes. It focuses on the full lifecycle of machine
learning projects, ensuring that each phase is manageable, traceable, and reproducible.</p>

<p>MLflow comprises multiple core components, and lakeFS seamlessly integrates with the <a href="https://mlflow.org/docs/latest/tracking">MLflow Tracking</a>
component. MLflow tracking enables experiment tracking that accounts for both inputs and outputs, allowing for visualization
and comparison of experiment results.</p>

<div class="toc-block">
<h2 class="no_toc text-delta" id="table-of-contents">
  
  
    <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents
  
  
</h2>
    

<ol id="markdown-toc">
  <li><a href="#benefits-of-integrating-mlflow-with-lakefs" id="markdown-toc-benefits-of-integrating-mlflow-with-lakefs">Benefits of integrating MLflow with lakeFS</a></li>
  <li><a href="#how-to-use-mlflow-with-lakefs" id="markdown-toc-how-to-use-mlflow-with-lakefs">How to use MLflow with lakeFS</a>    <ol>
      <li><a href="#recommended-workflow" id="markdown-toc-recommended-workflow">Recommended workflow</a></li>
      <li><a href="#example-using-pandas" id="markdown-toc-example-using-pandas">Example: Using Pandas</a></li>
      <li><a href="#example-using-spark" id="markdown-toc-example-using-spark">Example: Using Spark</a></li>
      <li><a href="#reproduce-experiment-results" id="markdown-toc-reproduce-experiment-results">Reproduce experiment results</a></li>
      <li><a href="#compare-runs-input" id="markdown-toc-compare-runs-input">Compare runs input</a></li>
    </ol>
  </li>
</ol>

</div>
<h2 id="benefits-of-integrating-mlflow-with-lakefs">
  
  
    <a href="#benefits-of-integrating-mlflow-with-lakefs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Benefits of integrating MLflow with lakeFS
  
  
</h2>
    

<p>Integrating MLflow with lakeFS offers several advantages that enhance the machine learning workflow:</p>
<ol>
  <li><strong>Experiment Reproducibility</strong>: By leveraging MLflow’s <a href="https://mlflow.org/docs/latest/api_reference/python_api/mlflow.html#mlflow.log_input">input logging</a>
capabilities alongside lakeFS’s data versioning, you can precisely track the specific dataset version used in each experiment
run. This ensures that experiments remain reproducible over time, even as datasets evolve.</li>
  <li><strong>Parallel Experiments with Zero Data Copy</strong>: lakeFS enables efficient <a href="/understand/model.html#branches">branching</a> without
duplicating data. This allows for multiple experiments to be conducted in parallel, with each branch providing an isolated
environment for dataset modifications. Changes in one branch do not affect others, promoting safe collaboration among
team members. Once an experiment is complete, the branch can be seamlessly merged back into the main dataset, incorporating
new insights.</li>
</ol>
<h2 id="how-to-use-mlflow-with-lakefs">
  
  
    <a href="#how-to-use-mlflow-with-lakefs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to use MLflow with lakeFS
  
  
</h2>
    

<p>To harness the combined capabilities of MLflow and lakeFS for safe experimentation and accurate result reproduction, consider
the workflow below and review the practical examples provided on the next section.</p>
<h3 id="recommended-workflow">
  
  
    <a href="#recommended-workflow" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Recommended workflow
  
  
</h3>
    

<ol>
  <li><strong>Create a branch for each experiment</strong>: Start each experiment by creating a dedicated lakeFS branch for it. This approach 
allows you to safely make changes to your input dataset without duplicating it. You will later load data from this branch 
to your MLflow experiment runs.</li>
  <li><strong>Read datasets from the experiment branch</strong>: Conduct your experiments by reading data directly from the dedicated 
branch. We recommend to read the dataset from the head commit of the branch to ensure precise version tracking.</li>
  <li><strong>Create an MLflow Dataset pointing to lakeFS</strong>: Use MLflow’s <a href="https://mlflow.org/docs/latest/api_reference/python_api/mlflow.data.html#mlflow.data.dataset.Dataset">Dataset</a>
ensuring that the <a href="https://mlflow.org/docs/latest/api_reference/python_api/mlflow.data.html#mlflow.data.dataset_source.DatasetSource">dataset source</a>
points to lakeFS.</li>
  <li><strong>Log your input</strong>: Use MLflow’s <a href="https://mlflow.org/docs/latest/api_reference/python_api/mlflow.html#mlflow.log_input">log_input</a> 
function to log the versioned dataset stored in lakeFS.</li>
  <li><strong>Commit dataset changes</strong>: Machine learning development is inherently iterative. When you make changes to your input dataset,
commit them to the experiment branch in lakeFS with a meaningful commit message. During an experiment run, load the dataset
version corresponding to the branch’s head commit and track this reference to facilitate future result reproduction.</li>
  <li><strong>Merge experiment results</strong>: After concluding your experimentation, merge the branch used for the selected experiment 
run back into the main branch.</li>
</ol>

<p class="note"><strong>Note: Branch per experiment Vs. Branch per experiment run</strong><br />
While it’s possible to create a lakeFS branch for each experiment run, given that lakeFS branches are both quick and 
cost-effective to create, it’s often more efficient to create a branch per experiment. By reading directly from the head
commit of the experiment branch, you can distinguish between dataset versions without creating excessive branches. This
practice maintains branch hygiene within lakeFS.</p>
<h3 id="example-using-pandas">
  
  
    <a href="#example-using-pandas" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example: Using Pandas
  
  
</h3>
    

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span> 
<span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="n">repo</span> <span class="o">=</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">Repository</span><span class="p">(</span><span class="s">"my-repo"</span><span class="p">)</span>
<span class="n">repo_id</span> <span class="o">=</span> <span class="n">repo</span><span class="p">.</span><span class="nb">id</span>

<span class="n">exp_branch</span> <span class="o">=</span> <span class="n">repo</span><span class="p">.</span><span class="n">branch</span><span class="p">(</span><span class="s">"experiment-1"</span><span class="p">).</span><span class="n">create</span><span class="p">(</span><span class="n">source_reference</span><span class="o">=</span><span class="s">"main"</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">branch_id</span> <span class="o">=</span> <span class="n">exp_branch</span><span class="p">.</span><span class="nb">id</span>
<span class="n">head_commit_id</span> <span class="o">=</span> <span class="n">exp_branch</span><span class="p">.</span><span class="n">head</span><span class="p">.</span><span class="nb">id</span>

<span class="n">table_path</span> <span class="o">=</span> <span class="s">"famous_people.csv"</span>

<span class="n">dataset_source_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"s3://</span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">head_commit_id</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">table_path</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Use Pandas to read from lakeFS, at its most updated version to which the head commit id is pointing
</span><span class="n">raw_data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dataset_source_url</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">";"</span><span class="p">,</span> <span class="n">storage_options</span><span class="o">=</span><span class="p">{</span>
        <span class="s">"key"</span><span class="p">:</span> <span class="s">"AKIAIOSFOLKFSSAMPLES"</span><span class="p">,</span>
        <span class="s">"secret"</span><span class="p">:</span> <span class="s">"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"</span><span class="p">,</span>
        <span class="s">"client_kwargs"</span><span class="p">:</span> <span class="p">{</span><span class="s">"endpoint_url"</span><span class="p">:</span> <span class="s">"http://localhost:8000"</span><span class="p">}</span>
    <span class="p">})</span>

<span class="c1"># Create an instance of a PandasDataset
</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">mlflow</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">from_pandas</span><span class="p">(</span>
    <span class="n">raw_data</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">dataset_source_url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">"famous_people"</span>
<span class="p">)</span>

<span class="c1"># View some of the recorded Dataset information
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Dataset name: </span><span class="si">{</span><span class="n">dataset</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Dataset source URI: </span><span class="si">{</span><span class="n">dataset</span><span class="p">.</span><span class="n">source</span><span class="p">.</span><span class="n">uri</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># Use mlflow input logging to track the dataset versioned by lakeFS
</span><span class="k">with</span> <span class="n">mlflow</span><span class="p">.</span><span class="n">start_run</span><span class="p">()</span> <span class="k">as</span> <span class="n">run</span><span class="p">:</span>
    <span class="n">mlflow</span><span class="p">.</span><span class="n">log_input</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s">"training"</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="p">.</span><span class="n">set_tag</span><span class="p">(</span><span class="s">"lakefs_repo"</span><span class="p">,</span> <span class="n">repo_id</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="p">.</span><span class="n">set_tag</span><span class="p">(</span><span class="s">"lakefs_branch"</span><span class="p">,</span> <span class="n">branch_id</span><span class="p">)</span> 
    <span class="n">mlflow</span><span class="p">.</span><span class="n">set_tag</span><span class="p">(</span><span class="s">"lakefs_commit"</span><span class="p">,</span> <span class="n">head_commit_id</span><span class="p">)</span> 

<span class="c1"># Inspect run's dataset
</span><span class="n">logged_run</span> <span class="o">=</span> <span class="n">mlflow</span><span class="p">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">run_id</span><span class="p">)</span> <span class="c1"># 
</span>
<span class="c1"># Retrieve the Dataset object
</span><span class="n">logged_dataset</span> <span class="o">=</span> <span class="n">logged_run</span><span class="p">.</span><span class="n">inputs</span><span class="p">.</span><span class="n">dataset_inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">dataset</span>

<span class="c1"># View some of the recorded Dataset information
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Logged dataset name: </span><span class="si">{</span><span class="n">logged_dataset</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Logged dataset source URI: </span><span class="si">{</span><span class="n">logged_dataset</span><span class="p">.</span><span class="n">source</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Output</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Dataset name: famous_people
Dataset source URI: s3://my-repo/3afddad4fef987b4919f5e82f16682c018f59ed2ff003a6a81adf72edaad23c3/fp.csv
Logged dataset name: famous_people
Logged dataset source URI: {"uri": "s3://my-repo/3afddad4fef987b4919f5e82f16682c018f59ed2ff003a6a81adf72edaad23c3/fp.csv"}
</code></pre></div></div>
<h3 id="example-using-spark">
  
  
    <a href="#example-using-spark" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example: Using Spark
  
  
</h3>
    

<p>The example below configures Spark to access lakeFS’ <a href="/integrations/spark.html#s3-compatible-api">S3-compatible API</a> and load a Delta
Lake tables to the experiment.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">lakefs</span> 
<span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">SparkSession</span>

<span class="n">spark</span> <span class="o">=</span> <span class="n">SparkSession</span><span class="p">.</span><span class="n">builder</span><span class="p">.</span><span class="n">appName</span><span class="p">(</span><span class="s">"lakeFS / Mlflow"</span><span class="p">)</span> \
    <span class="p">.</span><span class="n">config</span><span class="p">(</span><span class="s">"spark.hadoop.fs.s3.impl"</span><span class="p">,</span> <span class="s">"org.apache.hadoop.fs.s3a.S3AFileSystem"</span><span class="p">)</span> \ 
    <span class="p">.</span><span class="n">config</span><span class="p">(</span><span class="s">"spark.hadoop.fs.s3a.endpoint"</span><span class="p">,</span> <span class="s">'http://localhost:8000'</span><span class="p">)</span> \ 
    <span class="p">.</span><span class="n">config</span><span class="p">(</span><span class="s">"spark.hadoop.fs.s3a.path.style.access"</span><span class="p">,</span> <span class="s">"true"</span><span class="p">)</span> \ 
    <span class="p">.</span><span class="n">config</span><span class="p">(</span><span class="s">"spark.hadoop.fs.s3a.access.key"</span><span class="p">,</span> <span class="s">'AKIAlakefs12345EXAMPLE'</span><span class="p">)</span> \ 
    <span class="p">.</span><span class="n">config</span><span class="p">(</span><span class="s">"spark.hadoop.fs.s3a.secret.key"</span><span class="p">,</span> <span class="s">'abc/lakefs/1234567bPxRfiCYEXAMPLEKEY'</span><span class="p">)</span> \ 
    <span class="p">.</span><span class="n">config</span><span class="p">(</span><span class="s">"spark.jars.packages"</span><span class="p">,</span> <span class="s">"io.delta:delta-core_2.12:2.3.0"</span><span class="p">)</span> \ 
    <span class="p">.</span><span class="n">config</span><span class="p">(</span><span class="s">"spark.sql.extensions"</span><span class="p">,</span> <span class="s">"io.delta.sql.DeltaSparkSessionExtension"</span><span class="p">)</span> \ 
    <span class="p">.</span><span class="n">config</span><span class="p">(</span><span class="s">"spark.sql.catalog.spark_catalog"</span><span class="p">,</span> <span class="s">"org.apache.spark.sql.delta.catalog.DeltaCatalog"</span><span class="p">)</span> \ 
    <span class="p">.</span><span class="n">getOrCreate</span><span class="p">()</span>

<span class="n">repo</span> <span class="o">=</span> <span class="n">lakefs</span><span class="p">.</span><span class="n">Repository</span><span class="p">(</span><span class="s">"my-repo"</span><span class="p">)</span>
<span class="n">repo_id</span> <span class="o">=</span> <span class="n">repo</span><span class="p">.</span><span class="nb">id</span>

<span class="n">exp_branch</span> <span class="o">=</span> <span class="n">repo</span><span class="p">.</span><span class="n">branch</span><span class="p">(</span><span class="s">"experiment-1"</span><span class="p">).</span><span class="n">create</span><span class="p">(</span><span class="n">source_reference</span><span class="o">=</span><span class="s">"main"</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">branch_id</span> <span class="o">=</span> <span class="n">exp_branch</span><span class="p">.</span><span class="nb">id</span>
<span class="n">head_commit_id</span> <span class="o">=</span> <span class="n">exp_branch</span><span class="p">.</span><span class="n">head</span><span class="p">.</span><span class="nb">id</span>

<span class="n">table_path</span> <span class="o">=</span> <span class="s">"gold/train_v2/"</span>

<span class="n">dataset_source_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"s3://</span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">head_commit_id</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">table_path</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Load delta lake table from lakeFS, at its most updated version to which the head commit id is pointing
</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">mlflow</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">load_delta</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">dataset_source_url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">"boat-images"</span><span class="p">)</span>

<span class="c1"># View some of the recorded Dataset information
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Dataset name: </span><span class="si">{</span><span class="n">dataset</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Dataset source URI: </span><span class="si">{</span><span class="n">dataset</span><span class="p">.</span><span class="n">source</span><span class="p">.</span><span class="n">path</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># Use mlflow input logging to track the dataset versioned by lakeFS
</span><span class="k">with</span> <span class="n">mlflow</span><span class="p">.</span><span class="n">start_run</span><span class="p">()</span> <span class="k">as</span> <span class="n">run</span><span class="p">:</span>
    <span class="n">mlflow</span><span class="p">.</span><span class="n">log_input</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s">"training"</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="p">.</span><span class="n">set_tag</span><span class="p">(</span><span class="s">"lakefs_repo"</span><span class="p">,</span> <span class="n">repo_id</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="p">.</span><span class="n">set_tag</span><span class="p">(</span><span class="s">"lakefs_branch"</span><span class="p">,</span> <span class="n">branch_id</span><span class="p">)</span> <span class="c1"># Log the branch id, to have a friendly lakeFS reference to search the input dataset in
</span>    <span class="n">mlflow</span><span class="p">.</span><span class="n">set_tag</span><span class="p">(</span><span class="s">"lakefs_commit"</span><span class="p">,</span> <span class="n">head_commit_id</span><span class="p">)</span>

<span class="c1"># Inspect run's dataset
</span><span class="n">logged_run</span> <span class="o">=</span> <span class="n">mlflow</span><span class="p">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">run_id</span><span class="p">)</span> <span class="c1"># 
</span>
<span class="c1"># Retrieve the Dataset object
</span><span class="n">logged_dataset</span> <span class="o">=</span> <span class="n">logged_run</span><span class="p">.</span><span class="n">inputs</span><span class="p">.</span><span class="n">dataset_inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">dataset</span>

<span class="c1"># View some of the recorded Dataset information
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Logged dataset name: </span><span class="si">{</span><span class="n">logged_dataset</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Logged dataset source URI: </span><span class="si">{</span><span class="n">logged_dataset</span><span class="p">.</span><span class="n">source</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Output</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Dataset name: boat-images
Dataset source URI: s3://my-repo/3afddad4fef987b4919f5e82f16682c018f59ed2ff003a6a81adf72edaad23c3/gold/train_v2/
Logged dataset name: boat-images
Logged dataset source URI: {"path": "s3://my-repo/3afddad4fef987b4919f5e82f16682c018f59ed2ff003a6a81adf72edaad23c3/gold/train_v2/"}
</code></pre></div></div>
<h3 id="reproduce-experiment-results">
  
  
    <a href="#reproduce-experiment-results" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reproduce experiment results
  
  
</h3>
    

<p>To reproduce the results of a specific experiment run in MLflow, it’s essential to retrieve the exact dataset and associated
metadata used during that run. While the MLflow Tracking UI provides a general overview, detailed dataset information 
and its source are best accessed programmatically.</p>

<ol>
  <li>Obtain the Run ID: Navigate to the MLflow UI and copy the Run ID of the experiment you’re interested in.</li>
</ol>

<p><img src="/assets/img/mlflow_experiment_run.png" alt="mlflow run" /></p>

<ol>
  <li>Extract Dataset Information Using MLflow’s Python SDK:</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">mlflow</span>

<span class="c1"># Inspect run's dataset and tags
</span><span class="n">run_id</span> <span class="o">=</span> <span class="s">"c0f8fbb1b63748abaa0a6479115e272c"</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">mlflow</span><span class="p">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span> 

<span class="c1"># Retrieve the Dataset object
</span><span class="n">logged_dataset</span> <span class="o">=</span> <span class="n">run</span><span class="p">.</span><span class="n">inputs</span><span class="p">.</span><span class="n">dataset_inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">dataset</span>

<span class="c1"># View some of the recorded Dataset information
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Run ID: </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s"> Dataset name: </span><span class="si">{</span><span class="n">logged_dataset</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Run ID: </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s"> Dataset source URI: </span><span class="si">{</span><span class="n">logged_dataset</span><span class="p">.</span><span class="n">source</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># Retrieve run's tags 
</span><span class="n">logged_tags</span> <span class="o">=</span> <span class="n">run</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">tags</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Run ID: </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s"> tags: </span><span class="si">{</span><span class="n">logged_tags</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Output</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Run ID: c0f8fbb1b63748abaa0a6479115e272c Dataset name: boat-images
Run ID: c0f8fbb1b63748abaa0a6479115e272c Dataset source URI: {"path": "s3://my-repo/3afddad4fef987b4919f5e82f16682c018f59ed2ff003a6a81adf72edaad23c3/gold/train_v2/"}
Run ID: c0f8fbb1b63748abaa0a6479115e272c tags: {'lakefs_branch': 'experiment-1', 'lakefs_repo': 'my-repo', 'lakefs_commit': '3afddad4fef987b4919f5e82f16682c018f59ed2ff003a6a81adf72edaad23c3'}
</code></pre></div></div>

<p>Notes:</p>
<ul>
  <li>The Dataset Source URI provides the location of the dataset at the exact version used in the run.</li>
  <li>Run tags, such as ‘lakefs_branch’ and ‘lakefs_repo’, offer additional context about the dataset’s origin within lakeFS.</li>
</ul>
<h3 id="compare-runs-input">
  
  
    <a href="#compare-runs-input" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Compare runs input
  
  
</h3>
    

<p>To determine whether two distinct MLflow runs utilized the same input dataset, you can compare specific attributes of 
their logged Dataset objects. The source attribute, which contains the versioned dataset’s URI, is a common choice for 
this comparison. Here’s an example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">mlflow</span>

<span class="n">first_run_id</span> <span class="o">=</span> <span class="s">"4c0464d665944dc5bb90587d455948b8"</span>
<span class="n">first_run</span> <span class="o">=</span> <span class="n">mlflow</span><span class="p">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">first_run_id</span><span class="p">)</span>

<span class="c1"># Retrieve the Dataset object
</span><span class="n">first_dataset</span> <span class="o">=</span> <span class="n">first_run</span><span class="p">.</span><span class="n">inputs</span><span class="p">.</span><span class="n">dataset_inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">dataset</span>
<span class="n">first_dataset_src</span> <span class="o">=</span> <span class="n">first_dataset</span><span class="p">.</span><span class="n">source</span>

<span class="n">sec_run_id</span> <span class="o">=</span> <span class="s">"12b91e073a8b40df97ea8d570534de31"</span>
<span class="n">sec_run</span> <span class="o">=</span> <span class="n">mlflow</span><span class="p">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">sec_run_id</span><span class="p">)</span>

<span class="c1"># Retrieve the Dataset object
</span><span class="n">sec_dataset</span> <span class="o">=</span> <span class="n">sec_run</span><span class="p">.</span><span class="n">inputs</span><span class="p">.</span><span class="n">dataset_inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">dataset</span>
<span class="n">sec_dataset_src</span> <span class="o">=</span> <span class="n">sec_dataset</span><span class="p">.</span><span class="n">source</span>

<span class="k">assert</span> <span class="n">first_dataset_src</span> <span class="o">==</span> <span class="n">sec_dataset_src</span><span class="p">,</span> <span class="s">"Dataset sources are not equal."</span>

<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"First dataset src: </span><span class="si">{</span><span class="n">first_dataset_src</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Second dataset src: </span><span class="si">{</span><span class="n">sec_dataset_src</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Output</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>First dataset src: {"uri": "s3://mlflow-tracking/f16682c0186a81adf72edaad23c3f59ed2ff3afddad4fef987b4919f5e82003a/gold/train_v2/"}
Second dataset src: {"uri": "s3://mlflow-tracking/3afddad4fef987b4919f5e82f16682c018f59ed2ff003a6a81adf72edaad23c3/gold/train_v2/"}
</code></pre></div></div>

<p>In this example, the source attribute of each Dataset object is compared to determine if the input datasets are identical. 
If they differ, you can further inspect them. With the dataset source URI in hand, you can use lakeFS to gain more insights
about the changes made to your dataset:</p>
<ul>
  <li>Inspect the lakeFS Commit ID: By examining the commit ID within the URI, you can retrieve detailed information about 
the commit, including the author and the purpose of the changes.</li>
  <li>Use lakeFS Diff: lakeFS offers a diff function that allows you to compare different versions of your data.</li>
</ul>

<p>By leveraging these tools, you can effectively track and understand the evolution of your datasets across different MLflow runs.</p>

                

                
                

                

            </div>
        </div>

        
        

        <div class="search-overlay"></div>
        
    </div>
</div>

<footer>
    <div class="footer-sidebar"></div>
    <div class="footer-main">
        <div class="row">
            <div class="left">
                <ul class="footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs.lakefs.io/" class="site-button" >
                            Docs
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/blog/" class="site-button" >
                            Blog
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                            GitHub
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/community/" class="site-button" >
                            Community
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/cloud-registration/" class="site-button" >
                            lakeFS Cloud
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/contact-us/" class="site-button" >
                            Contact
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
            <div class="right">
                <ul class="footer-social">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/youtube" class="site-button" >
                            <img src="/assets/icons/youtube.svg" class="no-hover" />
                            <img src="/assets/icons/youtube-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://www.linkedin.com/company/treeverse" class="site-button" >
                            <img src="/assets/icons/linkedin.svg" class="no-hover" />
                            <img src="/assets/icons/linkedin-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                            <img src="/assets/icons/github.svg" class="no-hover" />
                            <img src="/assets/icons/github-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://twitter.com/lakeFS" class="site-button" >
                            <img src="/assets/icons/twitter.svg" class="no-hover" />
                            <img src="/assets/icons/twitter-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/slack" class="site-button" >
                            <img src="/assets/icons/slack.svg" class="no-hover" />
                            <img src="/assets/icons/slack-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row top-border">
            <div class="left">
                <a href="https://lakefs.io" class="lh-tight" style="margin-bottom: 0px;">
                    <div class="site-logo"></div>
                </a>                    
            </div>
            <div class="right">
                <ul class="bottom-footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/terms-of-use/" class="site-button" >
                            Terms of use
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/privacy-policy/" class="site-button" >
                            Privacy Policy
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
    </div>
</footer>


</body>

</html>

